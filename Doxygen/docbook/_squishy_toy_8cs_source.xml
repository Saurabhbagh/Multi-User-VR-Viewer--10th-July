<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="__squishy_toy_8cs_source">
<title>SquishyToy.cs</title>
<indexterm><primary>O:/GitHUBMINIPRoject/Assets/SteamVR/InteractionSystem/Samples/Squishy/SquishyToy.cs</primary></indexterm>
<programlisting>00001 <emphasis role="keyword">using</emphasis>&#32;System.Collections;
00002 <emphasis role="keyword">using</emphasis>&#32;System.Collections.Generic;
00003 <emphasis role="keyword">using</emphasis>&#32;<link linkend="__balloon_8cs_1a7d67e097df9376eb709b6a23aa3c7d23">UnityEngine</link>;
00004 <emphasis role="keyword">using</emphasis>&#32;<link linkend="_namespace_valve">Valve</link>.<link linkend="_namespace_valve_1_1_v_r">VR</link>;
00005 <emphasis role="keyword">using</emphasis>&#32;<link linkend="_namespace_valve">Valve</link>.<link linkend="_namespace_valve_1_1_v_r">VR</link>.<link linkend="_namespace_valve_1_1_v_r_1_1_interaction_system">InteractionSystem</link>;
00006 
00007 <emphasis role="keyword">namespace&#32;</emphasis><link linkend="_namespace_valve_1_1_v_r_1_1_interaction_system_1_1_sample">Valve.VR.InteractionSystem.Sample</link>
00008 {
<anchor xml:id="__squishy_toy_8cs_source_1l00009"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy">00009</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">class&#32;</emphasis><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy">SquishyToy</link>&#32;:&#32;MonoBehaviour
00010 &#32;&#32;&#32;&#32;{
<anchor xml:id="__squishy_toy_8cs_source_1l00011"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1ab2adf011ad980c7fc7869f16d6ddd391">00011</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_interactable">Interactable</link>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1ab2adf011ad980c7fc7869f16d6ddd391">interactable</link>;
<anchor xml:id="__squishy_toy_8cs_source_1l00012"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1a98aa284f24410c72459ac8a44f1366a7">00012</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">new</emphasis>&#32;SkinnedMeshRenderer&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1a98aa284f24410c72459ac8a44f1366a7">renderer</link>;
00013 
<anchor xml:id="__squishy_toy_8cs_source_1l00014"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1a282e8574aef9d3c0959d98ef6ce09ad1">00014</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">bool</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1a282e8574aef9d3c0959d98ef6ce09ad1">affectMaterial</link>&#32;=&#32;<emphasis role="keyword">true</emphasis>;
00015 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="__squishy_toy_8cs_source_1l00016"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1a0d622661e59529ca14c7af7db96667a9">00016</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___single">SteamVR_Action_Single</link>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1a0d622661e59529ca14c7af7db96667a9">gripSqueeze</link>&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___input">SteamVR_Input</link>.GetAction&lt;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___single">SteamVR_Action_Single</link>&gt;(<emphasis role="stringliteral">&quot;Squeeze&quot;</emphasis>);
00017 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="__squishy_toy_8cs_source_1l00018"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1a23f7d66f584278c6280f278041c6ae0b">00018</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___single">SteamVR_Action_Single</link>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1a23f7d66f584278c6280f278041c6ae0b">pinchSqueeze</link>&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___input">SteamVR_Input</link>.GetAction&lt;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___single">SteamVR_Action_Single</link>&gt;(<emphasis role="stringliteral">&quot;Squeeze&quot;</emphasis>);
00019 
00020 
00021 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keyword">new</emphasis>&#32;Rigidbody&#32;rigidbody;
00022 
00023 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;Start()
00024 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00025 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(rigidbody&#32;==&#32;<emphasis role="keyword">null</emphasis>)
00026 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;rigidbody&#32;=&#32;GetComponent&lt;Rigidbody&gt;();
00027 
00028 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1ab2adf011ad980c7fc7869f16d6ddd391">interactable</link>&#32;==&#32;<emphasis role="keyword">null</emphasis>)
00029 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1ab2adf011ad980c7fc7869f16d6ddd391">interactable</link>&#32;=&#32;GetComponent&lt;Interactable&gt;();
00030 
00031 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1a98aa284f24410c72459ac8a44f1366a7">renderer</link>&#32;==&#32;<emphasis role="keyword">null</emphasis>)
00032 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1a98aa284f24410c72459ac8a44f1366a7">renderer</link>&#32;=&#32;GetComponent&lt;SkinnedMeshRenderer&gt;();
00033 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00034 
00035 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;Update()
00036 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00037 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;grip&#32;=&#32;0;
00038 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;pinch&#32;=&#32;0;
00039 
00040 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1ab2adf011ad980c7fc7869f16d6ddd391">interactable</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_interactable_1a1980377b09ca72c574f045e7d6aac17f">attachedToHand</link>)
00041 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00042 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;grip&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1a0d622661e59529ca14c7af7db96667a9">gripSqueeze</link>.<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___single_1a3b78812c9a7bea43b8d64440d5f4b339">GetAxis</link>(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1ab2adf011ad980c7fc7869f16d6ddd391">interactable</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_interactable_1a1980377b09ca72c574f045e7d6aac17f">attachedToHand</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_hand_1a05520135148fd74ca10b8549d5c7354d">handType</link>);
00043 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;pinch&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1a23f7d66f584278c6280f278041c6ae0b">pinchSqueeze</link>.<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___single_1a3b78812c9a7bea43b8d64440d5f4b339">GetAxis</link>(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1ab2adf011ad980c7fc7869f16d6ddd391">interactable</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_interactable_1a1980377b09ca72c574f045e7d6aac17f">attachedToHand</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_hand_1a05520135148fd74ca10b8549d5c7354d">handType</link>);
00044 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00045 
00046 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1a98aa284f24410c72459ac8a44f1366a7">renderer</link>.SetBlendShapeWeight(0,&#32;Mathf.Lerp(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1a98aa284f24410c72459ac8a44f1366a7">renderer</link>.GetBlendShapeWeight(0),&#32;grip&#32;*&#32;100,&#32;Time.deltaTime&#32;*&#32;10));
00047 
00048 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1a98aa284f24410c72459ac8a44f1366a7">renderer</link>.sharedMesh.blendShapeCount&#32;&gt;&#32;1)&#32;<emphasis role="comment">//&#32;make&#32;sure&#32;there&apos;s&#32;a&#32;pinch&#32;blend&#32;shape</emphasis>
00049 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1a98aa284f24410c72459ac8a44f1366a7">renderer</link>.SetBlendShapeWeight(1,&#32;Mathf.Lerp(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1a98aa284f24410c72459ac8a44f1366a7">renderer</link>.GetBlendShapeWeight(1),&#32;pinch&#32;*&#32;100,&#32;Time.deltaTime&#32;*&#32;10));
00050 
00051 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1a282e8574aef9d3c0959d98ef6ce09ad1">affectMaterial</link>)
00052 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00053 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1a98aa284f24410c72459ac8a44f1366a7">renderer</link>.material.SetFloat(<emphasis role="stringliteral">&quot;_Deform&quot;</emphasis>,&#32;Mathf.Pow(grip&#32;*&#32;1f,&#32;0.5f));
00054 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1a98aa284f24410c72459ac8a44f1366a7">renderer</link>.material.HasProperty(<emphasis role="stringliteral">&quot;_PinchDeform&quot;</emphasis>))
00055 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00056 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_squishy_toy_1a98aa284f24410c72459ac8a44f1366a7">renderer</link>.material.SetFloat(<emphasis role="stringliteral">&quot;_PinchDeform&quot;</emphasis>,&#32;Mathf.Pow(pinch&#32;*&#32;1f,&#32;0.5f));
00057 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00058 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00059 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00060 &#32;&#32;&#32;&#32;}
00061 }
</programlisting></section>
