<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="__t_m_p___sprite_animator_8cs_source">
<title>TMP_SpriteAnimator.cs</title>
<indexterm><primary>O:/GitHUBMINIPRoject/Library/PackageCache/com.unity.textmeshpro@1.3.0/Scripts/Runtime/TMP_SpriteAnimator.cs</primary></indexterm>
<programlisting>00001 <emphasis role="keyword">using</emphasis>&#32;<link linkend="__balloon_8cs_1a7d67e097df9376eb709b6a23aa3c7d23">UnityEngine</link>;
00002 <emphasis role="keyword">using</emphasis>&#32;System.Collections;
00003 <emphasis role="keyword">using</emphasis>&#32;System.Collections.Generic;
00004 
00005 <emphasis role="keyword">namespace&#32;</emphasis><link linkend="_namespace_t_m_pro">TMPro</link>
00006 {
00007 &#32;&#32;&#32;&#32;[DisallowMultipleComponent]
<anchor xml:id="__t_m_p___sprite_animator_8cs_source_1l00008"/><link linkend="_class_t_m_pro_1_1_t_m_p___sprite_animator">00008</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">class&#32;</emphasis><link linkend="_class_t_m_pro_1_1_t_m_p___sprite_animator">TMP_SpriteAnimator</link>&#32;:&#32;MonoBehaviour
00009 &#32;&#32;&#32;&#32;{
00010 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;Dictionary&lt;int,&#32;bool&gt;&#32;m_animations&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;Dictionary&lt;int,&#32;bool&gt;(16);
00011 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//private&#32;bool&#32;isPlaying&#32;=&#32;false;</emphasis>
00012 
00013 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<link linkend="_class_t_m_pro_1_1_t_m_p___text">TMP_Text</link>&#32;m_TextComponent;
00014 
00015 
00016 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">void</emphasis>&#32;Awake()
00017 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00018 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;m_TextComponent&#32;=&#32;GetComponent&lt;TMP_Text&gt;();
00019 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00020 
00021 
00022 
00023 
00024 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">void</emphasis>&#32;OnEnable()
00025 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00026 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//m_playAnimations&#32;=&#32;true;</emphasis>
00027 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00028 
00029 
00030 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">void</emphasis>&#32;OnDisable()
00031 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00032 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//m_playAnimations&#32;=&#32;false;</emphasis>
00033 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00034 
00035 
<anchor xml:id="__t_m_p___sprite_animator_8cs_source_1l00036"/><link linkend="_class_t_m_pro_1_1_t_m_p___sprite_animator_1ade0c942998e861854cd24c280c679320">00036</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_t_m_pro_1_1_t_m_p___sprite_animator_1ade0c942998e861854cd24c280c679320">StopAllAnimations</link>()
00037 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00038 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;StopAllCoroutines();
00039 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;m_animations.Clear();
00040 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00041 
00042 
00043 
<anchor xml:id="__t_m_p___sprite_animator_8cs_source_1l00044"/><link linkend="_class_t_m_pro_1_1_t_m_p___sprite_animator_1aaea8d585b20ea1d6f9d96c60033dc1a6">00044</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_t_m_pro_1_1_t_m_p___sprite_animator_1aaea8d585b20ea1d6f9d96c60033dc1a6">DoSpriteAnimation</link>(<emphasis role="keywordtype">int</emphasis>&#32;currentCharacter,&#32;<link linkend="_class_t_m_pro_1_1_t_m_p___sprite_asset">TMP_SpriteAsset</link>&#32;spriteAsset,&#32;<emphasis role="keywordtype">int</emphasis>&#32;start,&#32;<emphasis role="keywordtype">int</emphasis>&#32;end,&#32;<emphasis role="keywordtype">int</emphasis>&#32;framerate)
00045 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00046 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">bool</emphasis>&#32;isPlaying&#32;=&#32;<emphasis role="keyword">false</emphasis>;
00047 
00048 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Need&#32;to&#32;add&#32;tracking&#32;of&#32;coroutines&#32;that&#32;have&#32;been&#32;lunched&#32;for&#32;this&#32;text&#32;object.</emphasis>
00049 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(!m_animations.TryGetValue(currentCharacter,&#32;out&#32;isPlaying))
00050 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00051 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;StartCoroutine(DoSpriteAnimationInternal(currentCharacter,&#32;spriteAsset,&#32;start,&#32;end,&#32;framerate));
00052 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;m_animations.Add(currentCharacter,&#32;<emphasis role="keyword">true</emphasis>);
00053 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00054 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00055 
00056 
00057 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;IEnumerator&#32;DoSpriteAnimationInternal(<emphasis role="keywordtype">int</emphasis>&#32;currentCharacter,&#32;<link linkend="_class_t_m_pro_1_1_t_m_p___sprite_asset">TMP_SpriteAsset</link>&#32;spriteAsset,&#32;<emphasis role="keywordtype">int</emphasis>&#32;start,&#32;<emphasis role="keywordtype">int</emphasis>&#32;end,&#32;<emphasis role="keywordtype">int</emphasis>&#32;framerate)
00058 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00059 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(m_TextComponent&#32;==&#32;<emphasis role="keyword">null</emphasis>)&#32;yield&#32;<emphasis role="keywordflow">break</emphasis>;
00060 
00061 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;We&#32;yield&#32;otherwise&#32;this&#32;gets&#32;called&#32;before&#32;the&#32;sprite&#32;has&#32;rendered.</emphasis>
00062 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;yield&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">null</emphasis>;
00063 
00064 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;currentFrame&#32;=&#32;start;
00065 
00066 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Make&#32;sure&#32;end&#32;frame&#32;does&#32;not&#32;exceed&#32;the&#32;number&#32;of&#32;sprites&#32;in&#32;the&#32;sprite&#32;asset.</emphasis>
00067 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(end&#32;&gt;&#32;spriteAsset.<link linkend="_class_t_m_pro_1_1_t_m_p___sprite_asset_1a6770844be35fbf6d455eadbc9a528372">spriteInfoList</link>.Count)
00068 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;end&#32;=&#32;spriteAsset.<link linkend="_class_t_m_pro_1_1_t_m_p___sprite_asset_1a6770844be35fbf6d455eadbc9a528372">spriteInfoList</link>.Count&#32;-&#32;1;
00069 
00070 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Get&#32;a&#32;reference&#32;to&#32;the&#32;geometry&#32;of&#32;the&#32;current&#32;character.</emphasis>
00071 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_struct_t_m_pro_1_1_t_m_p___character_info">TMP_CharacterInfo</link>&#32;charInfo&#32;=&#32;m_TextComponent.<link linkend="_class_t_m_pro_1_1_t_m_p___text_1a4b2d23d558ff8f9aecf5814f046bcef6">textInfo</link>.<link linkend="_class_t_m_pro_1_1_t_m_p___text_info_1ae539414faa4f544ff7a08c2ef5c36d25">characterInfo</link>[currentCharacter];
00072 
00073 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;materialIndex&#32;=&#32;charInfo.<link linkend="_struct_t_m_pro_1_1_t_m_p___character_info_1aec65f6b555fa50bc7b2a5510dd488ef8">materialReferenceIndex</link>;
00074 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;vertexIndex&#32;=&#32;charInfo.<link linkend="_struct_t_m_pro_1_1_t_m_p___character_info_1a92354221459bdb806b3ebbb17bf066da">vertexIndex</link>;
00075 
00076 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_struct_t_m_pro_1_1_t_m_p___mesh_info">TMP_MeshInfo</link>&#32;meshInfo&#32;=&#32;m_TextComponent.<link linkend="_class_t_m_pro_1_1_t_m_p___text_1a4b2d23d558ff8f9aecf5814f046bcef6">textInfo</link>.<link linkend="_class_t_m_pro_1_1_t_m_p___text_info_1a944c68132d16336aee460c0d99e78442">meshInfo</link>[materialIndex];
00077 
00078 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;elapsedTime&#32;=&#32;0;
00079 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;targetTime&#32;=&#32;1f&#32;/&#32;Mathf.Abs(framerate);
00080 
00081 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">while</emphasis>&#32;(<emphasis role="keyword">true</emphasis>)
00082 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00083 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(elapsedTime&#32;&gt;&#32;targetTime)
00084 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00085 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;elapsedTime&#32;=&#32;0;
00086 
00087 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Get&#32;a&#32;reference&#32;to&#32;the&#32;current&#32;sprite</emphasis>
00088 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_t_m_pro_1_1_t_m_p___sprite">TMP_Sprite</link>&#32;sprite&#32;=&#32;spriteAsset.<link linkend="_class_t_m_pro_1_1_t_m_p___sprite_asset_1a6770844be35fbf6d455eadbc9a528372">spriteInfoList</link>[currentFrame];
00089 
00090 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Update&#32;the&#32;vertices&#32;for&#32;the&#32;new&#32;sprite</emphasis>
00091 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3[]&#32;vertices&#32;=&#32;meshInfo.<link linkend="_struct_t_m_pro_1_1_t_m_p___mesh_info_1a7f31f8c5b18a9d84129a7f2cb5981728">vertices</link>;
00092 
00093 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector2&#32;origin&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;Vector2(charInfo.<link linkend="_struct_t_m_pro_1_1_t_m_p___character_info_1adb1943c1989c4178129a3763af82ef09">origin</link>,&#32;charInfo.<link linkend="_struct_t_m_pro_1_1_t_m_p___character_info_1aa4e9ea324c757e38321a2fe59c8c1287">baseLine</link>);
00094 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;spriteScale&#32;=&#32;charInfo.<link linkend="_struct_t_m_pro_1_1_t_m_p___character_info_1ade9e06ebc56c1d6bd5650241ca37814f">fontAsset</link>.<link linkend="_class_t_m_pro_1_1_t_m_p___font_asset_1a6afd05863cb5c5f39221cc63904b3f90">fontInfo</link>.<link linkend="_class_t_m_pro_1_1_face_info_1a24c7184e75041c3aff9b4bb8bd12e17b">Ascender</link>&#32;/&#32;sprite.<link linkend="_class_t_m_pro_1_1_t_m_p___text_element_1a8e0536e8531dafd5cd8737d0c4fb28bc">height</link>&#32;*&#32;sprite.<link linkend="_class_t_m_pro_1_1_t_m_p___text_element_1a555701c73d767af5770e029ef3b243b2">scale</link>&#32;*&#32;charInfo.<link linkend="_struct_t_m_pro_1_1_t_m_p___character_info_1aa6eae7bb3d16d8601eb1f5d02e9775a5">scale</link>;
00095 
00096 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;bl&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;Vector3(origin.x&#32;+&#32;sprite.<link linkend="_class_t_m_pro_1_1_t_m_p___text_element_1ad7d4c5cd8e004c37301cebea4ccef2f1">xOffset</link>&#32;*&#32;spriteScale,&#32;origin.y&#32;+&#32;(sprite.<link linkend="_class_t_m_pro_1_1_t_m_p___text_element_1a69b38f4991fe27916600dc332326ec80">yOffset</link>&#32;-&#32;sprite.<link linkend="_class_t_m_pro_1_1_t_m_p___text_element_1a8e0536e8531dafd5cd8737d0c4fb28bc">height</link>)&#32;*&#32;spriteScale);
00097 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;tl&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;Vector3(bl.x,&#32;origin.y&#32;+&#32;sprite.<link linkend="_class_t_m_pro_1_1_t_m_p___text_element_1a69b38f4991fe27916600dc332326ec80">yOffset</link>&#32;*&#32;spriteScale);
00098 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;tr&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;Vector3(origin.x&#32;+&#32;(sprite.<link linkend="_class_t_m_pro_1_1_t_m_p___text_element_1ad7d4c5cd8e004c37301cebea4ccef2f1">xOffset</link>&#32;+&#32;sprite.<link linkend="_class_t_m_pro_1_1_t_m_p___text_element_1ae65ca9c0aba4731278f18a8c4890628b">width</link>)&#32;*&#32;spriteScale,&#32;tl.y);
00099 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;br&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;Vector3(tr.x,&#32;bl.y);
00100 
00101 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;vertices[vertexIndex&#32;+&#32;0]&#32;=&#32;bl;
00102 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;vertices[vertexIndex&#32;+&#32;1]&#32;=&#32;tl;
00103 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;vertices[vertexIndex&#32;+&#32;2]&#32;=&#32;tr;
00104 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;vertices[vertexIndex&#32;+&#32;3]&#32;=&#32;br;
00105 
00106 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Update&#32;the&#32;UV&#32;to&#32;point&#32;to&#32;the&#32;new&#32;sprite</emphasis>
00107 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector2[]&#32;uvs0&#32;=&#32;meshInfo.<link linkend="_struct_t_m_pro_1_1_t_m_p___mesh_info_1aa6816d4ade18d6066c2c0b17d1fe5987">uvs0</link>;
00108 
00109 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector2&#32;uv0&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;Vector2(sprite.<link linkend="_class_t_m_pro_1_1_t_m_p___text_element_1a584627e5824a29fbd54c2606798cc433">x</link>&#32;/&#32;spriteAsset.<link linkend="_class_t_m_pro_1_1_t_m_p___sprite_asset_1ad58008ac004e19c361192d6159f34367">spriteSheet</link>.width,&#32;sprite.<link linkend="_class_t_m_pro_1_1_t_m_p___text_element_1a8e2cedf1184993e8d566bc0b95b8532e">y</link>&#32;/&#32;spriteAsset.<link linkend="_class_t_m_pro_1_1_t_m_p___sprite_asset_1ad58008ac004e19c361192d6159f34367">spriteSheet</link>.height);
00110 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector2&#32;uv1&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;Vector2(uv0.x,&#32;(sprite.<link linkend="_class_t_m_pro_1_1_t_m_p___text_element_1a8e2cedf1184993e8d566bc0b95b8532e">y</link>&#32;+&#32;sprite.<link linkend="_class_t_m_pro_1_1_t_m_p___text_element_1a8e0536e8531dafd5cd8737d0c4fb28bc">height</link>)&#32;/&#32;spriteAsset.<link linkend="_class_t_m_pro_1_1_t_m_p___sprite_asset_1ad58008ac004e19c361192d6159f34367">spriteSheet</link>.height);
00111 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector2&#32;uv2&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;Vector2((sprite.<link linkend="_class_t_m_pro_1_1_t_m_p___text_element_1a584627e5824a29fbd54c2606798cc433">x</link>&#32;+&#32;sprite.<link linkend="_class_t_m_pro_1_1_t_m_p___text_element_1ae65ca9c0aba4731278f18a8c4890628b">width</link>)&#32;/&#32;spriteAsset.<link linkend="_class_t_m_pro_1_1_t_m_p___sprite_asset_1ad58008ac004e19c361192d6159f34367">spriteSheet</link>.width,&#32;uv1.y);
00112 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector2&#32;uv3&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;Vector2(uv2.x,&#32;uv0.y);
00113 
00114 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;uvs0[vertexIndex&#32;+&#32;0]&#32;=&#32;uv0;
00115 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;uvs0[vertexIndex&#32;+&#32;1]&#32;=&#32;uv1;
00116 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;uvs0[vertexIndex&#32;+&#32;2]&#32;=&#32;uv2;
00117 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;uvs0[vertexIndex&#32;+&#32;3]&#32;=&#32;uv3;
00118 
00119 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Update&#32;the&#32;modified&#32;vertex&#32;attributes</emphasis>
00120 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;meshInfo.<link linkend="_struct_t_m_pro_1_1_t_m_p___mesh_info_1a2b53d43187ab86ccefe3f5dd6babcfef">mesh</link>.vertices&#32;=&#32;vertices;
00121 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;meshInfo.<link linkend="_struct_t_m_pro_1_1_t_m_p___mesh_info_1a2b53d43187ab86ccefe3f5dd6babcfef">mesh</link>.uv&#32;=&#32;uvs0;
00122 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;m_TextComponent.<link linkend="_class_t_m_pro_1_1_t_m_p___text_1a555f26eef9b5a5e51d27217c4c8adb8a">UpdateGeometry</link>(meshInfo.<link linkend="_struct_t_m_pro_1_1_t_m_p___mesh_info_1a2b53d43187ab86ccefe3f5dd6babcfef">mesh</link>,&#32;materialIndex);
00123 
00124 
00125 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(framerate&#32;&gt;&#32;0)
00126 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00127 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(currentFrame&#32;&lt;&#32;end)
00128 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;currentFrame&#32;+=&#32;1;
00129 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>
00130 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;currentFrame&#32;=&#32;start;
00131 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00132 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>
00133 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00134 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(currentFrame&#32;&gt;&#32;start)
00135 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;currentFrame&#32;-=&#32;1;
00136 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>
00137 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;currentFrame&#32;=&#32;end;
00138 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00139 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00140 
00141 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;elapsedTime&#32;+=&#32;Time.deltaTime;
00142 
00143 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;yield&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">null</emphasis>;
00144 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00145 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00146 
00147 &#32;&#32;&#32;&#32;}
00148 }
</programlisting></section>
