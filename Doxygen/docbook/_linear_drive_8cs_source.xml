<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="__linear_drive_8cs_source">
<title>LinearDrive.cs</title>
<indexterm><primary>O:/GitHUBMINIPRoject/Assets/SteamVR/InteractionSystem/Core/Scripts/LinearDrive.cs</primary></indexterm>
<programlisting>00001 <emphasis role="comment">//=======&#32;Copyright&#32;(c)&#32;Valve&#32;Corporation,&#32;All&#32;rights&#32;reserved.&#32;===============</emphasis>
00002 <emphasis role="comment">//</emphasis>
00003 <emphasis role="comment">//&#32;Purpose:&#32;Drives&#32;a&#32;linear&#32;mapping&#32;based&#32;on&#32;position&#32;between&#32;2&#32;positions</emphasis>
00004 <emphasis role="comment">//</emphasis>
00005 <emphasis role="comment">//=============================================================================</emphasis>
00006 
00007 <emphasis role="keyword">using</emphasis>&#32;<link linkend="__balloon_8cs_1a7d67e097df9376eb709b6a23aa3c7d23">UnityEngine</link>;
00008 <emphasis role="keyword">using</emphasis>&#32;System.Collections;
00009 
00010 <emphasis role="keyword">namespace&#32;</emphasis><link linkend="_namespace_valve_1_1_v_r_1_1_interaction_system">Valve.VR.InteractionSystem</link>
00011 {
00012 &#32;&#32;&#32;&#32;<emphasis role="comment">//-------------------------------------------------------------------------</emphasis>
00013 &#32;&#32;&#32;&#32;[RequireComponent(&#32;typeof(&#32;Interactable&#32;)&#32;)]
<anchor xml:id="__linear_drive_8cs_source_1l00014"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive">00014</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">class&#32;</emphasis><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive">LinearDrive</link>&#32;:&#32;MonoBehaviour
00015 &#32;&#32;&#32;&#32;{
<anchor xml:id="__linear_drive_8cs_source_1l00016"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ac9c2e3bc515634ca7a32e71b3ca75e1d">00016</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Transform&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ac9c2e3bc515634ca7a32e71b3ca75e1d">startPosition</link>;
<anchor xml:id="__linear_drive_8cs_source_1l00017"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a20ea9b3f558f3b5121a22bafb3926712">00017</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Transform&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a20ea9b3f558f3b5121a22bafb3926712">endPosition</link>;
<anchor xml:id="__linear_drive_8cs_source_1l00018"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a60de56cbd429c31a845f0e7926a5bbea">00018</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_mapping">LinearMapping</link>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a60de56cbd429c31a845f0e7926a5bbea">linearMapping</link>;
<anchor xml:id="__linear_drive_8cs_source_1l00019"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a4910e742976410f85591cba95f469deb">00019</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">bool</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a4910e742976410f85591cba95f469deb">repositionGameObject</link>&#32;=&#32;<emphasis role="keyword">true</emphasis>;
<anchor xml:id="__linear_drive_8cs_source_1l00020"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a4acb30750b4abe62e6a9e527cef3d015">00020</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">bool</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a4acb30750b4abe62e6a9e527cef3d015">maintainMomemntum</link>&#32;=&#32;<emphasis role="keyword">true</emphasis>;
<anchor xml:id="__linear_drive_8cs_source_1l00021"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a9fbb97e7e809a2b521ff3a84d92d3b93">00021</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a9fbb97e7e809a2b521ff3a84d92d3b93">momemtumDampenRate</link>&#32;=&#32;5.0f;
00022 
<anchor xml:id="__linear_drive_8cs_source_1l00023"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a6ade301020a7164c3a16d88d90080af5">00023</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">protected</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_hand">Hand</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_hand_1a61701f82b8f3fac8818954ec71804cb5">AttachmentFlags</link>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a6ade301020a7164c3a16d88d90080af5">attachmentFlags</link>&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_hand">Hand</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_hand_1a61701f82b8f3fac8818954ec71804cb5">AttachmentFlags</link>.DetachFromOtherHand;
00024 
<anchor xml:id="__linear_drive_8cs_source_1l00025"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ab65070c8f4b512ea34283afe5bb4471c">00025</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">protected</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ab65070c8f4b512ea34283afe5bb4471c">initialMappingOffset</link>;
<anchor xml:id="__linear_drive_8cs_source_1l00026"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1abf4e8792695528d43eb6ef320d2ffed0">00026</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">protected</emphasis>&#32;<emphasis role="keywordtype">int</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1abf4e8792695528d43eb6ef320d2ffed0">numMappingChangeSamples</link>&#32;=&#32;5;
<anchor xml:id="__linear_drive_8cs_source_1l00027"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a9043fc43946ceacb004e078642e51e1e">00027</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">protected</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>[]&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a9043fc43946ceacb004e078642e51e1e">mappingChangeSamples</link>;
<anchor xml:id="__linear_drive_8cs_source_1l00028"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a806b2e66252d2a23963db8f7d4acc937">00028</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">protected</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a806b2e66252d2a23963db8f7d4acc937">prevMapping</link>&#32;=&#32;0.0f;
<anchor xml:id="__linear_drive_8cs_source_1l00029"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ae175b0d8c891b3052bf26c7d3345fac3">00029</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">protected</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ae175b0d8c891b3052bf26c7d3345fac3">mappingChangeRate</link>;
<anchor xml:id="__linear_drive_8cs_source_1l00030"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a4eee470e177540a1eb4e301391927090">00030</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">protected</emphasis>&#32;<emphasis role="keywordtype">int</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a4eee470e177540a1eb4e301391927090">sampleCount</link>&#32;=&#32;0;
00031 
<anchor xml:id="__linear_drive_8cs_source_1l00032"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a599cc89c5bfc162c2c8967ebc7edfb16">00032</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">protected</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_interactable">Interactable</link>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a599cc89c5bfc162c2c8967ebc7edfb16">interactable</link>;
00033 
00034 
<anchor xml:id="__linear_drive_8cs_source_1l00035"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a460e787acea9bc3f2b54eabe66f5742b">00035</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">protected</emphasis>&#32;<emphasis role="keyword">virtual</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a460e787acea9bc3f2b54eabe66f5742b">Awake</link>()
00036 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00037 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a9043fc43946ceacb004e078642e51e1e">mappingChangeSamples</link>&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>[<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1abf4e8792695528d43eb6ef320d2ffed0">numMappingChangeSamples</link>];
00038 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a599cc89c5bfc162c2c8967ebc7edfb16">interactable</link>&#32;=&#32;GetComponent&lt;Interactable&gt;();
00039 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00040 
<anchor xml:id="__linear_drive_8cs_source_1l00041"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ac74f5d84bd359da256b3f1cf18e03975">00041</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">protected</emphasis>&#32;<emphasis role="keyword">virtual</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ac74f5d84bd359da256b3f1cf18e03975">Start</link>()
00042 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00043 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a60de56cbd429c31a845f0e7926a5bbea">linearMapping</link>&#32;==&#32;<emphasis role="keyword">null</emphasis>&#32;)
00044 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00045 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a60de56cbd429c31a845f0e7926a5bbea">linearMapping</link>&#32;=&#32;GetComponent&lt;LinearMapping&gt;();
00046 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00047 
00048 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a60de56cbd429c31a845f0e7926a5bbea">linearMapping</link>&#32;==&#32;<emphasis role="keyword">null</emphasis>&#32;)
00049 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00050 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a60de56cbd429c31a845f0e7926a5bbea">linearMapping</link>&#32;=&#32;gameObject.AddComponent&lt;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_mapping">LinearMapping</link>&gt;();
00051 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00052 
00053 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ab65070c8f4b512ea34283afe5bb4471c">initialMappingOffset</link>&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a60de56cbd429c31a845f0e7926a5bbea">linearMapping</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_mapping_1a775b4f01f606f8083af2dc1ae0f373a5">value</link>;
00054 
00055 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a4910e742976410f85591cba95f469deb">repositionGameObject</link>&#32;)
00056 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00057 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a3cdddbe2e588f05cc21e70cdace58b63">UpdateLinearMapping</link>(&#32;transform&#32;);
00058 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00059 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00060 
<anchor xml:id="__linear_drive_8cs_source_1l00061"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a405389e1f4b635a61139fa99d9eff8e2">00061</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">protected</emphasis>&#32;<emphasis role="keyword">virtual</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a405389e1f4b635a61139fa99d9eff8e2">HandHoverUpdate</link>(&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_hand">Hand</link>&#32;hand&#32;)
00062 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00063 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_namespace_valve_1_1_v_r_1_1_interaction_system_1ae03ab84d315f5997fd000817bfb96a0f">GrabTypes</link>&#32;startingGrabType&#32;=&#32;hand.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_hand_1a3708622be32d8aaca12d368c0fed2047">GetGrabStarting</link>();
00064 
00065 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a599cc89c5bfc162c2c8967ebc7edfb16">interactable</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_interactable_1a1980377b09ca72c574f045e7d6aac17f">attachedToHand</link>&#32;==&#32;<emphasis role="keyword">null</emphasis>&#32;&amp;&amp;&#32;startingGrabType&#32;!=&#32;<link linkend="_namespace_valve_1_1_v_r_1_1_interaction_system_1ae03ab84d315f5997fd000817bfb96a0f">GrabTypes</link>.None)
00066 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00067 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ab65070c8f4b512ea34283afe5bb4471c">initialMappingOffset</link>&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a60de56cbd429c31a845f0e7926a5bbea">linearMapping</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_mapping_1a775b4f01f606f8083af2dc1ae0f373a5">value</link>&#32;-&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ab58d91ba45acbbe00f0bcea8d9963d28">CalculateLinearMapping</link>(&#32;hand.transform&#32;);
00068 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a4eee470e177540a1eb4e301391927090">sampleCount</link>&#32;=&#32;0;
00069 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ae175b0d8c891b3052bf26c7d3345fac3">mappingChangeRate</link>&#32;=&#32;0.0f;
00070 
00071 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;hand.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_hand_1a73b0ea1d5b037fca1b7cb453061d98d6">AttachObject</link>(gameObject,&#32;startingGrabType,&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a6ade301020a7164c3a16d88d90080af5">attachmentFlags</link>);
00072 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00073 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00074 
<anchor xml:id="__linear_drive_8cs_source_1l00075"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a56727bf866a9b6bf25e7d3d6d4e4c964">00075</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">protected</emphasis>&#32;<emphasis role="keyword">virtual</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a56727bf866a9b6bf25e7d3d6d4e4c964">HandAttachedUpdate</link>(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_hand">Hand</link>&#32;hand)
00076 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00077 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a3cdddbe2e588f05cc21e70cdace58b63">UpdateLinearMapping</link>(hand.transform);
00078 
00079 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(hand.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_hand_1af0f01b740ecc869ae14ec6c1be426461">IsGrabEnding</link>(<emphasis role="keyword">this</emphasis>.gameObject))
00080 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00081 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;hand.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_hand_1ab0bccf232d1291c6c3000d9a967635ca">DetachObject</link>(gameObject);
00082 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00083 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00084 
<anchor xml:id="__linear_drive_8cs_source_1l00085"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1aa50628eb960189732449695aa3b3ad36">00085</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">protected</emphasis>&#32;<emphasis role="keyword">virtual</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1aa50628eb960189732449695aa3b3ad36">OnDetachedFromHand</link>(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_hand">Hand</link>&#32;hand)
00086 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00087 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ab416b3c92ed502354a43fbef83cc1997">CalculateMappingChangeRate</link>();
00088 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00089 
00090 
<anchor xml:id="__linear_drive_8cs_source_1l00091"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ab416b3c92ed502354a43fbef83cc1997">00091</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">protected</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ab416b3c92ed502354a43fbef83cc1997">CalculateMappingChangeRate</link>()
00092 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00093 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//Compute&#32;the&#32;mapping&#32;change&#32;rate</emphasis>
00094 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ae175b0d8c891b3052bf26c7d3345fac3">mappingChangeRate</link>&#32;=&#32;0.0f;
00095 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;mappingSamplesCount&#32;=&#32;Mathf.Min(&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a4eee470e177540a1eb4e301391927090">sampleCount</link>,&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a9043fc43946ceacb004e078642e51e1e">mappingChangeSamples</link>.Length&#32;);
00096 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(&#32;mappingSamplesCount&#32;!=&#32;0&#32;)
00097 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00098 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(&#32;<emphasis role="keywordtype">int</emphasis>&#32;i&#32;=&#32;0;&#32;i&#32;&lt;&#32;mappingSamplesCount;&#32;++i&#32;)
00099 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00100 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ae175b0d8c891b3052bf26c7d3345fac3">mappingChangeRate</link>&#32;+=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a9043fc43946ceacb004e078642e51e1e">mappingChangeSamples</link>[i];
00101 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00102 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ae175b0d8c891b3052bf26c7d3345fac3">mappingChangeRate</link>&#32;/=&#32;mappingSamplesCount;
00103 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00104 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00105 
<anchor xml:id="__linear_drive_8cs_source_1l00106"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a3cdddbe2e588f05cc21e70cdace58b63">00106</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">protected</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a3cdddbe2e588f05cc21e70cdace58b63">UpdateLinearMapping</link>(&#32;Transform&#32;updateTransform&#32;)
00107 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00108 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a806b2e66252d2a23963db8f7d4acc937">prevMapping</link>&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a60de56cbd429c31a845f0e7926a5bbea">linearMapping</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_mapping_1a775b4f01f606f8083af2dc1ae0f373a5">value</link>;
00109 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a60de56cbd429c31a845f0e7926a5bbea">linearMapping</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_mapping_1a775b4f01f606f8083af2dc1ae0f373a5">value</link>&#32;=&#32;Mathf.Clamp01(&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ab65070c8f4b512ea34283afe5bb4471c">initialMappingOffset</link>&#32;+&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ab58d91ba45acbbe00f0bcea8d9963d28">CalculateLinearMapping</link>(&#32;updateTransform&#32;)&#32;);
00110 
00111 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a9043fc43946ceacb004e078642e51e1e">mappingChangeSamples</link>[<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a4eee470e177540a1eb4e301391927090">sampleCount</link>&#32;%&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a9043fc43946ceacb004e078642e51e1e">mappingChangeSamples</link>.Length]&#32;=&#32;(&#32;1.0f&#32;/&#32;Time.deltaTime&#32;)&#32;*&#32;(&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a60de56cbd429c31a845f0e7926a5bbea">linearMapping</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_mapping_1a775b4f01f606f8083af2dc1ae0f373a5">value</link>&#32;-&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a806b2e66252d2a23963db8f7d4acc937">prevMapping</link>&#32;);
00112 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a4eee470e177540a1eb4e301391927090">sampleCount</link>++;
00113 
00114 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a4910e742976410f85591cba95f469deb">repositionGameObject</link>&#32;)
00115 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00116 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;transform.position&#32;=&#32;Vector3.Lerp(&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ac9c2e3bc515634ca7a32e71b3ca75e1d">startPosition</link>.position,&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a20ea9b3f558f3b5121a22bafb3926712">endPosition</link>.position,&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a60de56cbd429c31a845f0e7926a5bbea">linearMapping</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_mapping_1a775b4f01f606f8083af2dc1ae0f373a5">value</link>&#32;);
00117 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00118 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00119 
<anchor xml:id="__linear_drive_8cs_source_1l00120"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ab58d91ba45acbbe00f0bcea8d9963d28">00120</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">protected</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ab58d91ba45acbbe00f0bcea8d9963d28">CalculateLinearMapping</link>(&#32;Transform&#32;updateTransform&#32;)
00121 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00122 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;direction&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a20ea9b3f558f3b5121a22bafb3926712">endPosition</link>.position&#32;-&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ac9c2e3bc515634ca7a32e71b3ca75e1d">startPosition</link>.position;
00123 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;length&#32;=&#32;direction.magnitude;
00124 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;direction.Normalize();
00125 
00126 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;displacement&#32;=&#32;updateTransform.position&#32;-&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ac9c2e3bc515634ca7a32e71b3ca75e1d">startPosition</link>.position;
00127 
00128 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;Vector3.Dot(&#32;displacement,&#32;direction&#32;)&#32;/&#32;length;
00129 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00130 
00131 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="__linear_drive_8cs_source_1l00132"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a0cccb08f1c198775cc1ebe491d188520">00132</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">protected</emphasis>&#32;<emphasis role="keyword">virtual</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a0cccb08f1c198775cc1ebe491d188520">Update</link>()
00133 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00134 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a4acb30750b4abe62e6a9e527cef3d015">maintainMomemntum</link>&#32;&amp;&amp;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ae175b0d8c891b3052bf26c7d3345fac3">mappingChangeRate</link>&#32;!=&#32;0.0f&#32;)
00135 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00136 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//Dampen&#32;the&#32;mapping&#32;change&#32;rate&#32;and&#32;apply&#32;it&#32;to&#32;the&#32;mapping</emphasis>
00137 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ae175b0d8c891b3052bf26c7d3345fac3">mappingChangeRate</link>&#32;=&#32;Mathf.Lerp(&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ae175b0d8c891b3052bf26c7d3345fac3">mappingChangeRate</link>,&#32;0.0f,&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a9fbb97e7e809a2b521ff3a84d92d3b93">momemtumDampenRate</link>&#32;*&#32;Time.deltaTime&#32;);
00138 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a60de56cbd429c31a845f0e7926a5bbea">linearMapping</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_mapping_1a775b4f01f606f8083af2dc1ae0f373a5">value</link>&#32;=&#32;Mathf.Clamp01(&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a60de56cbd429c31a845f0e7926a5bbea">linearMapping</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_mapping_1a775b4f01f606f8083af2dc1ae0f373a5">value</link>&#32;+&#32;(&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ae175b0d8c891b3052bf26c7d3345fac3">mappingChangeRate</link>&#32;*&#32;Time.deltaTime&#32;)&#32;);
00139 
00140 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a4910e742976410f85591cba95f469deb">repositionGameObject</link>&#32;)
00141 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00142 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;transform.position&#32;=&#32;Vector3.Lerp(&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1ac9c2e3bc515634ca7a32e71b3ca75e1d">startPosition</link>.position,&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a20ea9b3f558f3b5121a22bafb3926712">endPosition</link>.position,&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_drive_1a60de56cbd429c31a845f0e7926a5bbea">linearMapping</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_linear_mapping_1a775b4f01f606f8083af2dc1ae0f373a5">value</link>&#32;);
00143 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00144 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00145 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00146 &#32;&#32;&#32;&#32;}
00147 }
</programlisting></section>
