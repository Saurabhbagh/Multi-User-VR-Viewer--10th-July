<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="__buggy_buddy_8cs_source">
<title>BuggyBuddy.cs</title>
<indexterm><primary>O:/GitHUBMINIPRoject/Assets/SteamVR/InteractionSystem/Samples/BuggyBuddy/BuggyBuddy.cs</primary></indexterm>
<programlisting>00001 <emphasis role="keyword">using</emphasis>&#32;<link linkend="__balloon_8cs_1a7d67e097df9376eb709b6a23aa3c7d23">UnityEngine</link>;
00002 <emphasis role="keyword">using</emphasis>&#32;System;
00003 <emphasis role="keyword">using</emphasis>&#32;System.Collections;
00004 
00005 
<anchor xml:id="__buggy_buddy_8cs_source_1l00006"/><link linkend="_namespace_valve_1_1_v_r_1_1_interaction_system_1_1_sample">00006</link> <emphasis role="keyword">namespace&#32;</emphasis><link linkend="_namespace_valve_1_1_v_r_1_1_interaction_system_1_1_sample">Valve.VR.InteractionSystem.Sample</link>
00007 {
<anchor xml:id="__buggy_buddy_8cs_source_1l00008"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy">00008</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">class&#32;</emphasis><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy">BuggyBuddy</link>&#32;:&#32;MonoBehaviour
00009 &#32;&#32;&#32;&#32;{
00010 
<anchor xml:id="__buggy_buddy_8cs_source_1l00011"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a881f60e607236680ef5e034ddbf0e332">00011</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Transform&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a881f60e607236680ef5e034ddbf0e332">turret</link>;
00012 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;turretRot;
00013 
00014 
00015 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[Tooltip(<emphasis role="stringliteral">&quot;Maximum&#32;steering&#32;angle&#32;of&#32;the&#32;wheels&quot;</emphasis>)]
<anchor xml:id="__buggy_buddy_8cs_source_1l00016"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a478f1b5fdd57e315c52d951134fb2e36">00016</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a478f1b5fdd57e315c52d951134fb2e36">maxAngle</link>&#32;=&#32;30f;
00017 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[Tooltip(<emphasis role="stringliteral">&quot;Maximum&#32;Turning&#32;torque&quot;</emphasis>)]
<anchor xml:id="__buggy_buddy_8cs_source_1l00018"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a006d048c6e1ddf8c0eb69ac71d67b483">00018</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a006d048c6e1ddf8c0eb69ac71d67b483">maxTurnTorque</link>&#32;=&#32;30f;
00019 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[Tooltip(<emphasis role="stringliteral">&quot;Maximum&#32;torque&#32;applied&#32;to&#32;the&#32;driving&#32;wheels&quot;</emphasis>)]
<anchor xml:id="__buggy_buddy_8cs_source_1l00020"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a35e800de779fd7eb1ccb57414e387506">00020</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a35e800de779fd7eb1ccb57414e387506">maxTorque</link>&#32;=&#32;300f;
00021 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[Tooltip(<emphasis role="stringliteral">&quot;Maximum&#32;brake&#32;torque&#32;applied&#32;to&#32;the&#32;driving&#32;wheels&quot;</emphasis>)]
<anchor xml:id="__buggy_buddy_8cs_source_1l00022"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a2ff3c8506758de6fc86255734ceb8e4f">00022</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a2ff3c8506758de6fc86255734ceb8e4f">brakeTorque</link>&#32;=&#32;30000f;
00023 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[Tooltip(<emphasis role="stringliteral">&quot;If&#32;you&#32;need&#32;the&#32;visual&#32;wheels&#32;to&#32;be&#32;attached&#32;automatically,&#32;drag&#32;the&#32;wheel&#32;shape&#32;here.&quot;</emphasis>)]
<anchor xml:id="__buggy_buddy_8cs_source_1l00024"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1aaf27c7f2414970c0a33443c29ca614cc">00024</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;GameObject[]&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1aaf27c7f2414970c0a33443c29ca614cc">wheelRenders</link>;
00025 
00026 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[Tooltip(<emphasis role="stringliteral">&quot;The&#32;vehicle&apos;s&#32;speed&#32;when&#32;the&#32;physics&#32;engine&#32;can&#32;use&#32;different&#32;amount&#32;of&#32;sub-steps&#32;(in&#32;m/s).&quot;</emphasis>)]
<anchor xml:id="__buggy_buddy_8cs_source_1l00027"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1aac2d3bf1b90d62bf31503999535ac861">00027</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1aac2d3bf1b90d62bf31503999535ac861">criticalSpeed</link>&#32;=&#32;5f;
00028 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[Tooltip(<emphasis role="stringliteral">&quot;Simulation&#32;sub-steps&#32;when&#32;the&#32;speed&#32;is&#32;above&#32;critical.&quot;</emphasis>)]
<anchor xml:id="__buggy_buddy_8cs_source_1l00029"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a9bd8062dd2f8a488721d0d1013fff029">00029</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">int</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a9bd8062dd2f8a488721d0d1013fff029">stepsBelow</link>&#32;=&#32;5;
00030 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[Tooltip(<emphasis role="stringliteral">&quot;Simulation&#32;sub-steps&#32;when&#32;the&#32;speed&#32;is&#32;below&#32;critical.&quot;</emphasis>)]
<anchor xml:id="__buggy_buddy_8cs_source_1l00031"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a9d02f8e52af2d1427daffdf0d7518d3d">00031</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">int</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a9d02f8e52af2d1427daffdf0d7518d3d">stepsAbove</link>&#32;=&#32;1;
00032 
00033 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;WheelCollider[]&#32;m_Wheels;
00034 
<anchor xml:id="__buggy_buddy_8cs_source_1l00035"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1aff774f27ee7de25349c377073ca48f13">00035</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;AudioSource&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1aff774f27ee7de25349c377073ca48f13">au_motor</link>;
00036 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[HideInInspector]
<anchor xml:id="__buggy_buddy_8cs_source_1l00037"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1afc749672df5295276319d0fd8b798ab8">00037</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1afc749672df5295276319d0fd8b798ab8">mvol</link>;
00038 
<anchor xml:id="__buggy_buddy_8cs_source_1l00039"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a3e52fd15fe20a76429ad3c890d5179f0">00039</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;AudioSource&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a3e52fd15fe20a76429ad3c890d5179f0">au_skid</link>;
00040 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;svol;
00041 
<anchor xml:id="__buggy_buddy_8cs_source_1l00042"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1adf2051c465863e5d6f8543439225bf8d">00042</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_wheel_dust">WheelDust</link>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1adf2051c465863e5d6f8543439225bf8d">skidsample</link>;
00043 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;skidSpeed&#32;=&#32;3;
00044 
<anchor xml:id="__buggy_buddy_8cs_source_1l00045"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a3175cce36808b8b3862dfdf4003c1c17">00045</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Vector3&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a3175cce36808b8b3862dfdf4003c1c17">localGravity</link>;
00046 
00047 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[HideInInspector]
<anchor xml:id="__buggy_buddy_8cs_source_1l00048"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a9e5f51e497217d06491e62e801787cc7">00048</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Rigidbody&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a9e5f51e497217d06491e62e801787cc7">body</link>;
00049 
<anchor xml:id="__buggy_buddy_8cs_source_1l00050"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a736f4f0a993011e419cf0a83274a311a">00050</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a736f4f0a993011e419cf0a83274a311a">rapidfireTime</link>&#32;=&#32;0;
00051 
00052 
00053 
00054 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;shootTimer;
00055 
00056 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[HideInInspector]
<anchor xml:id="__buggy_buddy_8cs_source_1l00057"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1acb6eb75ef41b673e8471dfad4c12118c">00057</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Vector2&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1acb6eb75ef41b673e8471dfad4c12118c">steer</link>;
00058 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[HideInInspector]
<anchor xml:id="__buggy_buddy_8cs_source_1l00059"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1af99c456400cf91319b7df00fc0d6c471">00059</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1af99c456400cf91319b7df00fc0d6c471">throttle</link>;
00060 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[HideInInspector]
<anchor xml:id="__buggy_buddy_8cs_source_1l00061"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a08472779ed4ea518ea22bfe0f3db9f86">00061</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a08472779ed4ea518ea22bfe0f3db9f86">handBrake</link>;
00062 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[HideInInspector]
<anchor xml:id="__buggy_buddy_8cs_source_1l00063"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1af2a926d91b091dc8ea3fc82265759508">00063</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Transform&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1af2a926d91b091dc8ea3fc82265759508">controllerReference</link>;
00064 
00065 
00066 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[HideInInspector]
<anchor xml:id="__buggy_buddy_8cs_source_1l00067"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a1c596116b13719bdc07db566a001215c">00067</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a1c596116b13719bdc07db566a001215c">speed</link>;
00068 
<anchor xml:id="__buggy_buddy_8cs_source_1l00069"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a9a5c1abbcdac8f80c7254d6cdc64c0ed">00069</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Transform&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a9a5c1abbcdac8f80c7254d6cdc64c0ed">centerOfMass</link>;
00070 
00071 
00072 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;Start()
00073 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00074 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a9e5f51e497217d06491e62e801787cc7">body</link>&#32;=&#32;GetComponent&lt;Rigidbody&gt;();
00075 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;m_Wheels&#32;=&#32;GetComponentsInChildren&lt;WheelCollider&gt;();
00076 
00077 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a9e5f51e497217d06491e62e801787cc7">body</link>.centerOfMass&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a9e5f51e497217d06491e62e801787cc7">body</link>.transform.InverseTransformPoint(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a9a5c1abbcdac8f80c7254d6cdc64c0ed">centerOfMass</link>.position)&#32;*&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a9e5f51e497217d06491e62e801787cc7">body</link>.transform.lossyScale.x;
00078 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00079 
00080 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">/*</emphasis>
00081 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;private&#32;void&#32;TurretInput()</emphasis>
00082 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{</emphasis>
00083 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector2&#32;tIn&#32;=&#32;TurretControl.joystick();</emphasis>
00084 <emphasis role="comment"></emphasis>
00085 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;tur&#32;=&#32;new&#32;Vector3(tIn.x,&#32;0,&#32;tIn.y);</emphasis>
00086 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;tur&#32;=&#32;TurretControl.transform.TransformDirection(tur);</emphasis>
00087 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;tur&#32;=&#32;transform.InverseTransformDirection(tur);</emphasis>
00088 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;tur&#32;=&#32;Vector3.ProjectOnPlane(tur,&#32;Vector3.up);</emphasis>
00089 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;turretRot&#32;=&#32;VectorMath.FindAngle(Vector3.forward,&#32;tur,&#32;Vector3.up)&#32;*&#32;Mathf.Rad2Deg;</emphasis>
00090 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;turup&#32;=&#32;Vector3.forward;</emphasis>
00091 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;turret.localRotation&#32;=&#32;Quaternion.Euler(turup&#32;*&#32;turretRot);</emphasis>
00092 <emphasis role="comment"></emphasis>
00093 <emphasis role="comment"></emphasis>
00094 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;if&#32;(rapidfireTime&#32;==&#32;0)</emphasis>
00095 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{</emphasis>
00096 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;if&#32;(TurretControl.GetPressDown(KnucklesButton.Trigger))</emphasis>
00097 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{</emphasis>
00098 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Fire();</emphasis>
00099 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}</emphasis>
00100 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}else</emphasis>
00101 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{</emphasis>
00102 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;if&#32;(shootTimer&#32;&gt;&#32;rapidfireTime&amp;&amp;&#32;TurretControl.GetPress(KnucklesButton.Trigger))</emphasis>
00103 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{</emphasis>
00104 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Fire();</emphasis>
00105 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;shootTimer&#32;=&#32;0;</emphasis>
00106 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}</emphasis>
00107 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;shootTimer&#32;+=&#32;Time.deltaTime;</emphasis>
00108 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}</emphasis>
00109 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}</emphasis>
00110 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;*/</emphasis>
00111 
00112 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;Update()
00113 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00114 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;m_Wheels[0].ConfigureVehicleSubsteps(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1aac2d3bf1b90d62bf31503999535ac861">criticalSpeed</link>,&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a9bd8062dd2f8a488721d0d1013fff029">stepsBelow</link>,&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a9d02f8e52af2d1427daffdf0d7518d3d">stepsAbove</link>);
00115 
00116 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//TurretInput();</emphasis>
00117 
00118 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//keyboard&#32;input&#32;for&#32;testing</emphasis>
00119 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//Vector3&#32;move&#32;=&#32;Vector3.forward&#32;*&#32;Input.GetAxis(&quot;Vertical&quot;)&#32;+&#32;Vector3.right&#32;*&#32;Input.GetAxis(&quot;Horizontal&quot;);</emphasis>
00120 
00121 
00122 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//driving&#32;input</emphasis>
00123 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//float&#32;forward&#32;=&#32;maxTorque&#32;*&#32;move.magnitude;</emphasis>
00124 
00125 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;forward&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a35e800de779fd7eb1ccb57414e387506">maxTorque</link>&#32;*&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1af99c456400cf91319b7df00fc0d6c471">throttle</link>;
00126 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1acb6eb75ef41b673e8471dfad4c12118c">steer</link>.y&#32;&lt;&#32;-0.5f)
00127 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;forward&#32;*=&#32;-1;
00128 
00129 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;angle&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a478f1b5fdd57e315c52d951134fb2e36">maxAngle</link>&#32;*&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1acb6eb75ef41b673e8471dfad4c12118c">steer</link>.x;
00130 
00131 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a1c596116b13719bdc07db566a001215c">speed</link>&#32;=&#32;transform.InverseTransformVector(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a9e5f51e497217d06491e62e801787cc7">body</link>.velocity).z;
00132 
00133 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;forw&#32;=&#32;Mathf.Abs(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a1c596116b13719bdc07db566a001215c">speed</link>);
00134 
00135 
00136 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;angle&#32;/=&#32;1&#32;+&#32;forw&#32;/&#32;20;
00137 
00138 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;if&#32;(Mathf.Abs(move.z)&#32;&lt;&#32;0.1f&#32;&amp;&amp;&#32;Mathf.Abs(move.x)&#32;&gt;&#32;0.5)</emphasis>
00139 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;&#32;&#32;&#32;forward&#32;*=&#32;3;</emphasis>
00140 
00141 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//float&#32;forward&#32;=&#32;maxTorque&#32;*&#32;throttle;&#32;not&#32;fun&#32;lawrence&#32;steering</emphasis>
00142 
00143 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;fVol&#32;=&#32;Mathf.Abs(forward);
00144 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1afc749672df5295276319d0fd8b798ab8">mvol</link>&#32;=&#32;Mathf.Lerp(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1afc749672df5295276319d0fd8b798ab8">mvol</link>,&#32;Mathf.Pow((fVol&#32;/&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a35e800de779fd7eb1ccb57414e387506">maxTorque</link>),&#32;0.8f)&#32;*&#32;Mathf.Lerp(0.4f,&#32;1.0f,&#32;(Mathf.Abs(m_Wheels[2].rpm)&#32;/&#32;200))&#32;*&#32;Mathf.Lerp(1.0f,&#32;0.5f,&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a08472779ed4ea518ea22bfe0f3db9f86">handBrake</link>),&#32;Time.deltaTime&#32;*&#32;9);
00145 
00146 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1aff774f27ee7de25349c377073ca48f13">au_motor</link>.volume&#32;=&#32;Mathf.Clamp01(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1afc749672df5295276319d0fd8b798ab8">mvol</link>);
00147 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;motorPitch&#32;=&#32;Mathf.Lerp(0.8f,&#32;1.0f,&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1afc749672df5295276319d0fd8b798ab8">mvol</link>);
00148 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1aff774f27ee7de25349c377073ca48f13">au_motor</link>.pitch&#32;=&#32;Mathf.Clamp01(motorPitch);
00149 
00150 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;svol&#32;=&#32;Mathf.Lerp(svol,&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1adf2051c465863e5d6f8543439225bf8d">skidsample</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_wheel_dust_1a83fecc9173f8d35450f8d409be27126c">amt</link>&#32;/&#32;skidSpeed,&#32;Time.deltaTime&#32;*&#32;9);
00151 
00152 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a3e52fd15fe20a76429ad3c890d5179f0">au_skid</link>.volume&#32;=&#32;Mathf.Clamp01(svol);
00153 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;skidPitch&#32;=&#32;Mathf.Lerp(0.9f,&#32;1.0f,&#32;svol);
00154 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a3e52fd15fe20a76429ad3c890d5179f0">au_skid</link>.pitch&#32;=&#32;Mathf.Clamp01(skidPitch);
00155 
00156 
00157 
00158 
00159 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//float&#32;forward&#32;=&#32;maxTorque&#32;*&#32;Input.GetAxis(&quot;Vertical&quot;);</emphasis>
00160 
00161 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//bool&#32;stopped&#32;=&#32;Mathf.Abs(transform.InverseTransformDirection(GetComponent&lt;Rigidbody&gt;().velocity).z)&#32;&lt;&#32;1.0f;</emphasis>
00162 
00163 
00164 
00165 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(<emphasis role="keywordtype">int</emphasis>&#32;i&#32;=&#32;0;&#32;i&#32;&lt;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1aaf27c7f2414970c0a33443c29ca614cc">wheelRenders</link>.Length;&#32;i++)
00166 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00167 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;WheelCollider&#32;wheel&#32;=&#32;m_Wheels[i];
00168 
00169 
00170 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(wheel.transform.localPosition.z&#32;&gt;&#32;0)
00171 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00172 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;front&#32;wheels</emphasis>
00173 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;wheel.steerAngle&#32;=&#32;angle;
00174 
00175 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//4wd?</emphasis>
00176 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;wheel.motorTorque&#32;=&#32;forward;
00177 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00178 
00179 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(wheel.transform.localPosition.z&#32;&lt;&#32;0)&#32;<emphasis role="comment">//&#32;back&#32;wheels</emphasis>
00180 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00181 
00182 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00183 
00184 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;wheel.brakeTorque&#32;=&#32;Mathf.Lerp(Mathf.Abs(forward)&#32;&lt;&#32;0.1f&#32;?&#32;1&#32;:&#32;0,&#32;brakeTorque,&#32;handBrake);</emphasis>
00185 
00186 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;wheel.motorTorque&#32;=&#32;forward;
00187 
00188 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(wheel.transform.localPosition.x&#32;&lt;&#32;0)&#32;<emphasis role="comment">//&#32;left&#32;wheels</emphasis>
00189 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00190 
00191 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00192 
00193 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(wheel.transform.localPosition.x&#32;&gt;=&#32;0)&#32;<emphasis role="comment">//&#32;right&#32;wheels</emphasis>
00194 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00195 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00196 
00197 
00198 
00199 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Update&#32;visual&#32;wheels&#32;if&#32;they&#32;exist,&#32;and&#32;the&#32;colliders&#32;are&#32;enabled</emphasis>
00200 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1aaf27c7f2414970c0a33443c29ca614cc">wheelRenders</link>[i]&#32;!=&#32;<emphasis role="keyword">null</emphasis>&#32;&amp;&amp;&#32;m_Wheels[0].enabled)
00201 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00202 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Quaternion&#32;q;
00203 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;p;
00204 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;wheel.GetWorldPose(out&#32;p,&#32;out&#32;q);
00205 
00206 
00207 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Transform&#32;shapeTransform&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1aaf27c7f2414970c0a33443c29ca614cc">wheelRenders</link>[i].transform;
00208 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;shapeTransform.position&#32;=&#32;p;
00209 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;shapeTransform.rotation&#32;=&#32;q;
00210 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00211 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00212 
00213 
00214 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1acb6eb75ef41b673e8471dfad4c12118c">steer</link>&#32;=&#32;Vector2.Lerp(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1acb6eb75ef41b673e8471dfad4c12118c">steer</link>,&#32;Vector2.zero,&#32;Time.deltaTime&#32;*&#32;4);
00215 
00216 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00217 
00218 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;FixedUpdate()
00219 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00220 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a9e5f51e497217d06491e62e801787cc7">body</link>.AddForce(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a3175cce36808b8b3862dfdf4003c1c17">localGravity</link>,&#32;ForceMode.Acceleration);
00221 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00222 
<anchor xml:id="__buggy_buddy_8cs_source_1l00223"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a8abf825f7278839e55df1de8b098867b">00223</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">static</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a8abf825f7278839e55df1de8b098867b">FindAngle</link>(Vector3&#32;fromVector,&#32;Vector3&#32;toVector,&#32;Vector3&#32;upVector)
00224 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00225 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;If&#32;the&#32;vector&#32;the&#32;angle&#32;is&#32;being&#32;calculated&#32;to&#32;is&#32;0...</emphasis>
00226 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(toVector&#32;==&#32;Vector3.zero)
00227 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;...&#32;the&#32;angle&#32;between&#32;them&#32;is&#32;0.</emphasis>
00228 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;0f;
00229 
00230 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Create&#32;a&#32;float&#32;to&#32;store&#32;the&#32;angle&#32;between&#32;the&#32;facing&#32;of&#32;the&#32;enemy&#32;and&#32;the&#32;direction&#32;it&apos;s&#32;travelling.</emphasis>
00231 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;angle&#32;=&#32;Vector3.Angle(fromVector,&#32;toVector);
00232 
00233 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Find&#32;the&#32;cross&#32;product&#32;of&#32;the&#32;two&#32;vectors&#32;(this&#32;will&#32;point&#32;up&#32;if&#32;the&#32;velocity&#32;is&#32;to&#32;the&#32;right&#32;of&#32;forward).</emphasis>
00234 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;normal&#32;=&#32;Vector3.Cross(fromVector,&#32;toVector);
00235 
00236 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;The&#32;dot&#32;product&#32;of&#32;the&#32;normal&#32;with&#32;the&#32;upVector&#32;will&#32;be&#32;positive&#32;if&#32;they&#32;point&#32;in&#32;the&#32;same&#32;direction.</emphasis>
00237 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;angle&#32;*=&#32;Mathf.Sign(Vector3.Dot(normal,&#32;upVector));
00238 
00239 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;We&#32;need&#32;to&#32;convert&#32;the&#32;angle&#32;we&apos;ve&#32;found&#32;from&#32;degrees&#32;to&#32;radians.</emphasis>
00240 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;angle&#32;*=&#32;Mathf.Deg2Rad;
00241 
00242 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;angle;
00243 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00244 &#32;&#32;&#32;&#32;}
00245 }
</programlisting></section>
