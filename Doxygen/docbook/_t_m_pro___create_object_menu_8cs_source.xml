<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="__t_m_pro___create_object_menu_8cs_source">
<title>TMPro_CreateObjectMenu.cs</title>
<indexterm><primary>O:/GitHUBMINIPRoject/Library/PackageCache/com.unity.textmeshpro@1.3.0/Scripts/Editor/TMPro_CreateObjectMenu.cs</primary></indexterm>
<programlisting>00001 <emphasis role="keyword">using</emphasis>&#32;<link linkend="__balloon_8cs_1a7d67e097df9376eb709b6a23aa3c7d23">UnityEngine</link>;
00002 <emphasis role="keyword">using</emphasis>&#32;<link linkend="_namespace_unity_editor">UnityEditor</link>;
00003 <emphasis role="keyword">using</emphasis>&#32;<link linkend="_namespace_unity_engine">UnityEngine</link>.UI;
00004 <emphasis role="keyword">using</emphasis>&#32;<link linkend="_namespace_unity_engine">UnityEngine</link>.EventSystems;
00005 
00006 
00007 <emphasis role="keyword">namespace&#32;</emphasis><link linkend="_namespace_t_m_pro_1_1_editor_utilities">TMPro.EditorUtilities</link>
00008 {
00009 &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">class&#32;</emphasis>TMPro_CreateObjectMenu
00010 &#32;&#32;&#32;&#32;{
00011 
00016 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[MenuItem(<emphasis role="stringliteral">&quot;GameObject/3D&#32;Object/TextMeshPro&#32;-&#32;Text&quot;</emphasis>,&#32;<emphasis role="keyword">false</emphasis>,&#32;30)]
00017 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">static</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;CreateTextMeshProObjectPerform(MenuCommand&#32;command)
00018 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00019 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GameObject&#32;go&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;GameObject(<emphasis role="stringliteral">&quot;TextMeshPro&quot;</emphasis>);
00020 
00021 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;TextMeshPro&#32;textMeshPro&#32;=&#32;go.AddComponent&lt;TextMeshPro&gt;();
00022 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;textMeshPro.text&#32;=&#32;<emphasis role="stringliteral">&quot;Sample&#32;text&quot;</emphasis>;
00023 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;textMeshPro.alignment&#32;=&#32;<link linkend="_namespace_t_m_pro_1a1dd743b58b1fd4057c00e4b98ab86301">TextAlignmentOptions</link>.TopLeft;
00024 
00025 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Undo.RegisterCreatedObjectUndo((<link linkend="__t_m_pro___font_asset_creator_window_8cs_1aef19bab18b9814edeef255c43e4f6bbc">Object</link>)go,&#32;<emphasis role="stringliteral">&quot;Create&#32;&quot;</emphasis>&#32;+&#32;go.name);
00026 
00027 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GameObject&#32;contextObject&#32;=&#32;command.context&#32;as&#32;GameObject;
00028 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(contextObject&#32;!=&#32;<emphasis role="keyword">null</emphasis>)
00029 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00030 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GameObjectUtility.SetParentAndAlign(go,&#32;contextObject);
00031 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Undo.SetTransformParent(go.transform,&#32;contextObject.transform,&#32;<emphasis role="stringliteral">&quot;Parent&#32;&quot;</emphasis>&#32;+&#32;go.name);
00032 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00033 
00034 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Selection.activeGameObject&#32;=&#32;go;
00035 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00036 
00037 
00042 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[MenuItem(<emphasis role="stringliteral">&quot;GameObject/UI/TextMeshPro&#32;-&#32;Text&quot;</emphasis>,&#32;<emphasis role="keyword">false</emphasis>,&#32;2001)]
00043 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">static</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;CreateTextMeshProGuiObjectPerform(MenuCommand&#32;command)
00044 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00045 
00046 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Check&#32;if&#32;there&#32;is&#32;a&#32;Canvas&#32;in&#32;the&#32;scene</emphasis>
00047 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Canvas&#32;canvas&#32;=&#32;<link linkend="__t_m_pro___font_asset_creator_window_8cs_1aef19bab18b9814edeef255c43e4f6bbc">Object</link>.FindObjectOfType&lt;Canvas&gt;();
00048 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(canvas&#32;==&#32;<emphasis role="keyword">null</emphasis>)
00049 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00050 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Create&#32;new&#32;Canvas&#32;since&#32;none&#32;exists&#32;in&#32;the&#32;scene.</emphasis>
00051 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GameObject&#32;canvasObject&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;GameObject(<emphasis role="stringliteral">&quot;Canvas&quot;</emphasis>);
00052 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;canvas&#32;=&#32;canvasObject.AddComponent&lt;Canvas&gt;();
00053 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;canvas.renderMode&#32;=&#32;RenderMode.ScreenSpaceOverlay;
00054 
00055 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Add&#32;a&#32;Graphic&#32;Raycaster&#32;Component&#32;as&#32;well</emphasis>
00056 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;canvas.gameObject.AddComponent&lt;GraphicRaycaster&gt;();
00057 
00058 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Undo.RegisterCreatedObjectUndo(canvasObject,&#32;<emphasis role="stringliteral">&quot;Create&#32;&quot;</emphasis>&#32;+&#32;canvasObject.name);
00059 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00060 
00061 
00062 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Create&#32;the&#32;TextMeshProUGUI&#32;Object</emphasis>
00063 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GameObject&#32;go&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;GameObject(<emphasis role="stringliteral">&quot;TextMeshPro&#32;Text&quot;</emphasis>);
00064 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;RectTransform&#32;goRectTransform&#32;=&#32;go.AddComponent&lt;RectTransform&gt;();
00065 
00066 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Undo.RegisterCreatedObjectUndo((<link linkend="__t_m_pro___font_asset_creator_window_8cs_1aef19bab18b9814edeef255c43e4f6bbc">Object</link>)go,&#32;<emphasis role="stringliteral">&quot;Create&#32;&quot;</emphasis>&#32;+&#32;go.name);
00067 
00068 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Check&#32;if&#32;object&#32;is&#32;being&#32;create&#32;with&#32;left&#32;or&#32;right&#32;click</emphasis>
00069 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GameObject&#32;contextObject&#32;=&#32;command.context&#32;as&#32;GameObject;
00070 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(contextObject&#32;==&#32;<emphasis role="keyword">null</emphasis>)
00071 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00072 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//goRectTransform.sizeDelta&#32;=&#32;new&#32;Vector2(200f,&#32;50f);</emphasis>
00073 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GameObjectUtility.SetParentAndAlign(go,&#32;canvas.gameObject);
00074 
00075 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;TextMeshProUGUI&#32;textMeshPro&#32;=&#32;go.AddComponent&lt;TextMeshProUGUI&gt;();
00076 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;textMeshPro.text&#32;=&#32;<emphasis role="stringliteral">&quot;New&#32;Text&quot;</emphasis>;
00077 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;textMeshPro.alignment&#32;=&#32;<link linkend="_namespace_t_m_pro_1a1dd743b58b1fd4057c00e4b98ab86301">TextAlignmentOptions</link>.TopLeft;
00078 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00079 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>
00080 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00081 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(contextObject.GetComponent&lt;Button&gt;()&#32;!=&#32;<emphasis role="keyword">null</emphasis>)
00082 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00083 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;goRectTransform.sizeDelta&#32;=&#32;Vector2.zero;
00084 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;goRectTransform.anchorMin&#32;=&#32;Vector2.zero;
00085 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;goRectTransform.anchorMax&#32;=&#32;Vector2.one;
00086 
00087 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GameObjectUtility.SetParentAndAlign(go,&#32;contextObject);
00088 
00089 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;TextMeshProUGUI&#32;textMeshPro&#32;=&#32;go.AddComponent&lt;TextMeshProUGUI&gt;();
00090 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;textMeshPro.text&#32;=&#32;<emphasis role="stringliteral">&quot;Button&quot;</emphasis>;
00091 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;textMeshPro.fontSize&#32;=&#32;24;
00092 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;textMeshPro.alignment&#32;=&#32;<link linkend="_namespace_t_m_pro_1a1dd743b58b1fd4057c00e4b98ab86301">TextAlignmentOptions</link>.Center;
00093 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00094 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>
00095 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00096 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//goRectTransform.sizeDelta&#32;=&#32;new&#32;Vector2(200f,&#32;50f);</emphasis>
00097 
00098 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GameObjectUtility.SetParentAndAlign(go,&#32;contextObject);
00099 
00100 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;TextMeshProUGUI&#32;textMeshPro&#32;=&#32;go.AddComponent&lt;TextMeshProUGUI&gt;();
00101 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;textMeshPro.text&#32;=&#32;<emphasis role="stringliteral">&quot;New&#32;Text&quot;</emphasis>;
00102 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;textMeshPro.alignment&#32;=&#32;<link linkend="_namespace_t_m_pro_1a1dd743b58b1fd4057c00e4b98ab86301">TextAlignmentOptions</link>.TopLeft;
00103 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00104 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00105 
00106 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
00107 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Check&#32;if&#32;an&#32;event&#32;system&#32;already&#32;exists&#32;in&#32;the&#32;scene</emphasis>
00108 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(!<link linkend="__t_m_pro___font_asset_creator_window_8cs_1aef19bab18b9814edeef255c43e4f6bbc">Object</link>.FindObjectOfType&lt;EventSystem&gt;())
00109 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00110 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GameObject&#32;eventObject&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;GameObject(<emphasis role="stringliteral">&quot;EventSystem&quot;</emphasis>,&#32;typeof(EventSystem));
00111 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;eventObject.AddComponent&lt;StandaloneInputModule&gt;();
00112 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Undo.RegisterCreatedObjectUndo(eventObject,&#32;<emphasis role="stringliteral">&quot;Create&#32;&quot;</emphasis>&#32;+&#32;eventObject.name);
00113 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00114 
00115 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Selection.activeGameObject&#32;=&#32;go;
00116 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00117 
00118 
00119 
00120 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[MenuItem(<emphasis role="stringliteral">&quot;GameObject/UI/TextMeshPro&#32;-&#32;Input&#32;Field&quot;</emphasis>,&#32;<emphasis role="keyword">false</emphasis>,&#32;2037)]
00121 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">static</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;AddTextMeshProInputField(MenuCommand&#32;menuCommand)
00122 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00123 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GameObject&#32;go&#32;=&#32;TMP_DefaultControls.CreateInputField(GetStandardResources());
00124 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;PlaceUIElementRoot(go,&#32;menuCommand);
00125 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00126 
00127 
00128 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[MenuItem(<emphasis role="stringliteral">&quot;GameObject/UI/TextMeshPro&#32;-&#32;Dropdown&quot;</emphasis>,&#32;<emphasis role="keyword">false</emphasis>,&#32;2036)]
00129 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;AddDropdown(MenuCommand&#32;menuCommand)
00130 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00131 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GameObject&#32;go&#32;=&#32;TMP_DefaultControls.CreateDropdown(GetStandardResources());
00132 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;PlaceUIElementRoot(go,&#32;menuCommand);
00133 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00134 
00135 
00136 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keywordtype">string</emphasis>&#32;kUILayerName&#32;=&#32;<emphasis role="stringliteral">&quot;UI&quot;</emphasis>;
00137 
00138 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keywordtype">string</emphasis>&#32;kStandardSpritePath&#32;=&#32;<emphasis role="stringliteral">&quot;UI/Skin/UISprite.psd&quot;</emphasis>;
00139 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keywordtype">string</emphasis>&#32;kBackgroundSpritePath&#32;=&#32;<emphasis role="stringliteral">&quot;UI/Skin/Background.psd&quot;</emphasis>;
00140 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keywordtype">string</emphasis>&#32;kInputFieldBackgroundPath&#32;=&#32;<emphasis role="stringliteral">&quot;UI/Skin/InputFieldBackground.psd&quot;</emphasis>;
00141 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keywordtype">string</emphasis>&#32;kKnobPath&#32;=&#32;<emphasis role="stringliteral">&quot;UI/Skin/Knob.psd&quot;</emphasis>;
00142 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keywordtype">string</emphasis>&#32;kCheckmarkPath&#32;=&#32;<emphasis role="stringliteral">&quot;UI/Skin/Checkmark.psd&quot;</emphasis>;
00143 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keywordtype">string</emphasis>&#32;kDropdownArrowPath&#32;=&#32;<emphasis role="stringliteral">&quot;UI/Skin/DropdownArrow.psd&quot;</emphasis>;
00144 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keywordtype">string</emphasis>&#32;kMaskPath&#32;=&#32;<emphasis role="stringliteral">&quot;UI/Skin/UIMask.psd&quot;</emphasis>;
00145 
00146 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">private</emphasis>&#32;TMP_DefaultControls.Resources&#32;s_StandardResources;
00147 
00148 
00149 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">private</emphasis>&#32;TMP_DefaultControls.Resources&#32;GetStandardResources()
00150 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00151 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(s_StandardResources.standard&#32;==&#32;<emphasis role="keyword">null</emphasis>)
00152 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00153 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;s_StandardResources.standard&#32;=&#32;AssetDatabase.GetBuiltinExtraResource&lt;<link linkend="_namespace_t_m_pro_1ab5662f47179bf1b81c575ecf80b24065a51f2b7b14433aa22c67d1f4fc18943cd">Sprite</link>&gt;(kStandardSpritePath);
00154 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;s_StandardResources.background&#32;=&#32;AssetDatabase.GetBuiltinExtraResource&lt;<link linkend="_namespace_t_m_pro_1ab5662f47179bf1b81c575ecf80b24065a51f2b7b14433aa22c67d1f4fc18943cd">Sprite</link>&gt;(kBackgroundSpritePath);
00155 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;s_StandardResources.inputField&#32;=&#32;AssetDatabase.GetBuiltinExtraResource&lt;<link linkend="_namespace_t_m_pro_1ab5662f47179bf1b81c575ecf80b24065a51f2b7b14433aa22c67d1f4fc18943cd">Sprite</link>&gt;(kInputFieldBackgroundPath);
00156 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;s_StandardResources.knob&#32;=&#32;AssetDatabase.GetBuiltinExtraResource&lt;<link linkend="_namespace_t_m_pro_1ab5662f47179bf1b81c575ecf80b24065a51f2b7b14433aa22c67d1f4fc18943cd">Sprite</link>&gt;(kKnobPath);
00157 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;s_StandardResources.checkmark&#32;=&#32;AssetDatabase.GetBuiltinExtraResource&lt;<link linkend="_namespace_t_m_pro_1ab5662f47179bf1b81c575ecf80b24065a51f2b7b14433aa22c67d1f4fc18943cd">Sprite</link>&gt;(kCheckmarkPath);
00158 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;s_StandardResources.dropdown&#32;=&#32;AssetDatabase.GetBuiltinExtraResource&lt;<link linkend="_namespace_t_m_pro_1ab5662f47179bf1b81c575ecf80b24065a51f2b7b14433aa22c67d1f4fc18943cd">Sprite</link>&gt;(kDropdownArrowPath);
00159 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;s_StandardResources.mask&#32;=&#32;AssetDatabase.GetBuiltinExtraResource&lt;<link linkend="_namespace_t_m_pro_1ab5662f47179bf1b81c575ecf80b24065a51f2b7b14433aa22c67d1f4fc18943cd">Sprite</link>&gt;(kMaskPath);
00160 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00161 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;s_StandardResources;
00162 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00163 
00164 
00165 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keyword">static</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;SetPositionVisibleinSceneView(RectTransform&#32;canvasRTransform,&#32;RectTransform&#32;itemTransform)
00166 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00167 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Find&#32;the&#32;best&#32;scene&#32;view</emphasis>
00168 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;SceneView&#32;sceneView&#32;=&#32;SceneView.lastActiveSceneView;
00169 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(sceneView&#32;==&#32;<emphasis role="keyword">null</emphasis>&#32;&amp;&amp;&#32;SceneView.sceneViews.Count&#32;&gt;&#32;0)
00170 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;sceneView&#32;=&#32;SceneView.sceneViews[0]&#32;as&#32;SceneView;
00171 
00172 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Couldn&apos;t&#32;find&#32;a&#32;SceneView.&#32;Don&apos;t&#32;set&#32;position.</emphasis>
00173 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(sceneView&#32;==&#32;<emphasis role="keyword">null</emphasis>&#32;||&#32;sceneView.camera&#32;==&#32;<emphasis role="keyword">null</emphasis>)
00174 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>;
00175 
00176 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Create&#32;world&#32;space&#32;Plane&#32;from&#32;canvas&#32;position.</emphasis>
00177 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector2&#32;localPlanePosition;
00178 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_namespace_valve_1_1_v_r_1a82e5bf501cc3aa155444ee3f0662853fa967d35e40f3f95b1f538bd248640bf3b">Camera</link>&#32;camera&#32;=&#32;sceneView.camera;
00179 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;position&#32;=&#32;Vector3.zero;
00180 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(RectTransformUtility.ScreenPointToLocalPointInRectangle(canvasRTransform,&#32;<emphasis role="keyword">new</emphasis>&#32;Vector2(camera.pixelWidth&#32;/&#32;2,&#32;camera.pixelHeight&#32;/&#32;2),&#32;camera,&#32;out&#32;localPlanePosition))
00181 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00182 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Adjust&#32;for&#32;canvas&#32;pivot</emphasis>
00183 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;localPlanePosition.x&#32;=&#32;localPlanePosition.x&#32;+&#32;canvasRTransform.sizeDelta.x&#32;*&#32;canvasRTransform.pivot.x;
00184 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;localPlanePosition.y&#32;=&#32;localPlanePosition.y&#32;+&#32;canvasRTransform.sizeDelta.y&#32;*&#32;canvasRTransform.pivot.y;
00185 
00186 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;localPlanePosition.x&#32;=&#32;Mathf.Clamp(localPlanePosition.x,&#32;0,&#32;canvasRTransform.sizeDelta.x);
00187 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;localPlanePosition.y&#32;=&#32;Mathf.Clamp(localPlanePosition.y,&#32;0,&#32;canvasRTransform.sizeDelta.y);
00188 
00189 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Adjust&#32;for&#32;anchoring</emphasis>
00190 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;position.x&#32;=&#32;localPlanePosition.x&#32;-&#32;canvasRTransform.sizeDelta.x&#32;*&#32;itemTransform.anchorMin.x;
00191 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;position.y&#32;=&#32;localPlanePosition.y&#32;-&#32;canvasRTransform.sizeDelta.y&#32;*&#32;itemTransform.anchorMin.y;
00192 
00193 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;minLocalPosition;
00194 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;minLocalPosition.x&#32;=&#32;canvasRTransform.sizeDelta.x&#32;*&#32;(0&#32;-&#32;canvasRTransform.pivot.x)&#32;+&#32;itemTransform.sizeDelta.x&#32;*&#32;itemTransform.pivot.x;
00195 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;minLocalPosition.y&#32;=&#32;canvasRTransform.sizeDelta.y&#32;*&#32;(0&#32;-&#32;canvasRTransform.pivot.y)&#32;+&#32;itemTransform.sizeDelta.y&#32;*&#32;itemTransform.pivot.y;
00196 
00197 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;maxLocalPosition;
00198 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;maxLocalPosition.x&#32;=&#32;canvasRTransform.sizeDelta.x&#32;*&#32;(1&#32;-&#32;canvasRTransform.pivot.x)&#32;-&#32;itemTransform.sizeDelta.x&#32;*&#32;itemTransform.pivot.x;
00199 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;maxLocalPosition.y&#32;=&#32;canvasRTransform.sizeDelta.y&#32;*&#32;(1&#32;-&#32;canvasRTransform.pivot.y)&#32;-&#32;itemTransform.sizeDelta.y&#32;*&#32;itemTransform.pivot.y;
00200 
00201 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;position.x&#32;=&#32;Mathf.Clamp(position.x,&#32;minLocalPosition.x,&#32;maxLocalPosition.x);
00202 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;position.y&#32;=&#32;Mathf.Clamp(position.y,&#32;minLocalPosition.y,&#32;maxLocalPosition.y);
00203 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00204 
00205 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;itemTransform.anchoredPosition&#32;=&#32;position;
00206 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;itemTransform.localRotation&#32;=&#32;Quaternion.identity;
00207 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;itemTransform.localScale&#32;=&#32;Vector3.one;
00208 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00209 
00210 
00211 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keyword">static</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;PlaceUIElementRoot(GameObject&#32;element,&#32;MenuCommand&#32;menuCommand)
00212 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00213 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GameObject&#32;parent&#32;=&#32;menuCommand.context&#32;as&#32;GameObject;
00214 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(parent&#32;==&#32;<emphasis role="keyword">null</emphasis>&#32;||&#32;parent.GetComponentInParent&lt;Canvas&gt;()&#32;==&#32;<emphasis role="keyword">null</emphasis>)
00215 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00216 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;parent&#32;=&#32;GetOrCreateCanvasGameObject();
00217 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00218 
00219 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">string</emphasis>&#32;uniqueName&#32;=&#32;GameObjectUtility.GetUniqueNameForSibling(parent.transform,&#32;element.name);
00220 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;element.name&#32;=&#32;uniqueName;
00221 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Undo.RegisterCreatedObjectUndo(element,&#32;<emphasis role="stringliteral">&quot;Create&#32;&quot;</emphasis>&#32;+&#32;element.name);
00222 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Undo.SetTransformParent(element.transform,&#32;parent.transform,&#32;<emphasis role="stringliteral">&quot;Parent&#32;&quot;</emphasis>&#32;+&#32;element.name);
00223 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GameObjectUtility.SetParentAndAlign(element,&#32;parent);
00224 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(parent&#32;!=&#32;menuCommand.context)&#32;<emphasis role="comment">//&#32;not&#32;a&#32;context&#32;click,&#32;so&#32;center&#32;in&#32;sceneview</emphasis>
00225 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;SetPositionVisibleinSceneView(parent.GetComponent&lt;RectTransform&gt;(),&#32;element.GetComponent&lt;RectTransform&gt;());
00226 
00227 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Selection.activeGameObject&#32;=&#32;element;
00228 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00229 
00230 
00231 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">public</emphasis>&#32;GameObject&#32;CreateNewUI()
00232 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00233 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Root&#32;for&#32;the&#32;UI</emphasis>
00234 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;var&#32;<link linkend="_namespace_valve_1_1_v_r_1a99f7cc968994699a7485078bafddac17a63a9f0ea7bb98050796b649e85481845">root</link>&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;GameObject(<emphasis role="stringliteral">&quot;Canvas&quot;</emphasis>);
00235 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_namespace_valve_1_1_v_r_1a99f7cc968994699a7485078bafddac17a63a9f0ea7bb98050796b649e85481845">root</link>.layer&#32;=&#32;LayerMask.NameToLayer(kUILayerName);
00236 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Canvas&#32;canvas&#32;=&#32;<link linkend="_namespace_valve_1_1_v_r_1a99f7cc968994699a7485078bafddac17a63a9f0ea7bb98050796b649e85481845">root</link>.AddComponent&lt;Canvas&gt;();
00237 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;canvas.renderMode&#32;=&#32;RenderMode.ScreenSpaceOverlay;
00238 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_namespace_valve_1_1_v_r_1a99f7cc968994699a7485078bafddac17a63a9f0ea7bb98050796b649e85481845">root</link>.AddComponent&lt;CanvasScaler&gt;();
00239 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_namespace_valve_1_1_v_r_1a99f7cc968994699a7485078bafddac17a63a9f0ea7bb98050796b649e85481845">root</link>.AddComponent&lt;GraphicRaycaster&gt;();
00240 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Undo.RegisterCreatedObjectUndo(root,&#32;<emphasis role="stringliteral">&quot;Create&#32;&quot;</emphasis>&#32;+&#32;<link linkend="_namespace_valve_1_1_v_r_1a99f7cc968994699a7485078bafddac17a63a9f0ea7bb98050796b649e85481845">root</link>.name);
00241 
00242 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;if&#32;there&#32;is&#32;no&#32;event&#32;system&#32;add&#32;one...</emphasis>
00243 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;CreateEventSystem(<emphasis role="keyword">false</emphasis>);
00244 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_namespace_valve_1_1_v_r_1a99f7cc968994699a7485078bafddac17a63a9f0ea7bb98050796b649e85481845">root</link>;
00245 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00246 
00247 
00248 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keyword">static</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;CreateEventSystem(<emphasis role="keywordtype">bool</emphasis>&#32;select)
00249 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00250 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;CreateEventSystem(select,&#32;<emphasis role="keyword">null</emphasis>);
00251 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00252 
00253 
00254 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keyword">static</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;CreateEventSystem(<emphasis role="keywordtype">bool</emphasis>&#32;select,&#32;GameObject&#32;parent)
00255 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00256 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;var&#32;esys&#32;=&#32;<link linkend="__t_m_pro___font_asset_creator_window_8cs_1aef19bab18b9814edeef255c43e4f6bbc">Object</link>.FindObjectOfType&lt;EventSystem&gt;();
00257 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(esys&#32;==&#32;<emphasis role="keyword">null</emphasis>)
00258 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00259 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;var&#32;eventSystem&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;GameObject(<emphasis role="stringliteral">&quot;EventSystem&quot;</emphasis>);
00260 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GameObjectUtility.SetParentAndAlign(eventSystem,&#32;parent);
00261 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;esys&#32;=&#32;eventSystem.AddComponent&lt;EventSystem&gt;();
00262 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;eventSystem.AddComponent&lt;StandaloneInputModule&gt;();
00263 
00264 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Undo.RegisterCreatedObjectUndo(eventSystem,&#32;<emphasis role="stringliteral">&quot;Create&#32;&quot;</emphasis>&#32;+&#32;eventSystem.name);
00265 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00266 
00267 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(select&#32;&amp;&amp;&#32;esys&#32;!=&#32;<emphasis role="keyword">null</emphasis>)
00268 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00269 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Selection.activeGameObject&#32;=&#32;esys.gameObject;
00270 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00271 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00272 
00273 
00274 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">public</emphasis>&#32;GameObject&#32;GetOrCreateCanvasGameObject()
00275 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00276 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GameObject&#32;selectedGo&#32;=&#32;Selection.activeGameObject;
00277 
00278 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Try&#32;to&#32;find&#32;a&#32;gameobject&#32;that&#32;is&#32;the&#32;selected&#32;GO&#32;or&#32;one&#32;if&#32;its&#32;parents.</emphasis>
00279 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Canvas&#32;canvas&#32;=&#32;(selectedGo&#32;!=&#32;<emphasis role="keyword">null</emphasis>)&#32;?&#32;selectedGo.GetComponentInParent&lt;Canvas&gt;()&#32;:&#32;<emphasis role="keyword">null</emphasis>;
00280 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(canvas&#32;!=&#32;<emphasis role="keyword">null</emphasis>&#32;&amp;&amp;&#32;canvas.gameObject.activeInHierarchy)
00281 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;canvas.gameObject;
00282 
00283 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;No&#32;canvas&#32;in&#32;selection&#32;or&#32;its&#32;parents?&#32;Then&#32;use&#32;just&#32;any&#32;canvas..</emphasis>
00284 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;canvas&#32;=&#32;<link linkend="__t_m_pro___font_asset_creator_window_8cs_1aef19bab18b9814edeef255c43e4f6bbc">Object</link>.FindObjectOfType(typeof(Canvas))&#32;as&#32;Canvas;
00285 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(canvas&#32;!=&#32;<emphasis role="keyword">null</emphasis>&#32;&amp;&amp;&#32;canvas.gameObject.activeInHierarchy)
00286 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;canvas.gameObject;
00287 
00288 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;No&#32;canvas&#32;in&#32;the&#32;scene&#32;at&#32;all?&#32;Then&#32;create&#32;a&#32;new&#32;one.</emphasis>
00289 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;CreateNewUI();
00290 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00291 &#32;&#32;&#32;&#32;}
00292 }
</programlisting></section>
