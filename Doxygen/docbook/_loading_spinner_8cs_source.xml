<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="__loading_spinner_8cs_source">
<title>LoadingSpinner.cs</title>
<indexterm><primary>O:/GitHUBMINIPRoject/Library/PackageCache/com.unity.package-manager-ui@2.0.7/Editor/Sources/UI/Common/LoadingSpinner.cs</primary></indexterm>
<programlisting>00001 <emphasis role="keyword">using</emphasis>&#32;<link linkend="__balloon_8cs_1a7d67e097df9376eb709b6a23aa3c7d23">UnityEngine</link>;
00002 <emphasis role="keyword">using</emphasis>&#32;<link linkend="_namespace_unity_engine">UnityEngine</link>.Experimental.UIElements;
00003 
00004 <emphasis role="keyword">namespace&#32;</emphasis><link linkend="_namespace_unity_editor_1_1_package_manager_1_1_u_i">UnityEditor.PackageManager.UI</link>
00005 {
00006 <emphasis role="preprocessor">#if&#32;!UNITY_2018_3_OR_NEWER</emphasis>
<anchor xml:id="__loading_spinner_8cs_source_1l00007"/><link linkend="_class_unity_editor_1_1_package_manager_1_1_u_i_1_1_loading_spinner_factory">00007</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">internal</emphasis>&#32;<emphasis role="keyword">class&#32;</emphasis><link linkend="_class_unity_editor_1_1_package_manager_1_1_u_i_1_1_loading_spinner_factory">LoadingSpinnerFactory</link>&#32;:&#32;UxmlFactory&lt;LoadingSpinner&gt;
00008 &#32;&#32;&#32;&#32;{
<anchor xml:id="__loading_spinner_8cs_source_1l00009"/><link linkend="_class_unity_editor_1_1_package_manager_1_1_u_i_1_1_loading_spinner_factory_1afe2cdaac2e641174e8e26877b0a2bcd0">00009</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">protected</emphasis>&#32;<emphasis role="keyword">override</emphasis>&#32;<link linkend="_class_unity_editor_1_1_package_manager_1_1_u_i_1_1_loading_spinner">LoadingSpinner</link>&#32;<link linkend="_class_unity_editor_1_1_package_manager_1_1_u_i_1_1_loading_spinner_factory_1afe2cdaac2e641174e8e26877b0a2bcd0">DoCreate</link>(IUxmlAttributes&#32;bag,&#32;CreationContext&#32;cc)
00010 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00011 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">new</emphasis>&#32;<link linkend="_class_unity_editor_1_1_package_manager_1_1_u_i_1_1_loading_spinner">LoadingSpinner</link>();
00012 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00013 &#32;&#32;&#32;&#32;}
00014 <emphasis role="preprocessor">#endif</emphasis>
00015 
<anchor xml:id="__loading_spinner_8cs_source_1l00016"/><link linkend="_class_unity_editor_1_1_package_manager_1_1_u_i_1_1_loading_spinner">00016</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">internal</emphasis>&#32;<emphasis role="keyword">class&#32;</emphasis><link linkend="_class_unity_editor_1_1_package_manager_1_1_u_i_1_1_loading_spinner">LoadingSpinner</link>&#32;:&#32;VisualElement
00017 &#32;&#32;&#32;&#32;{
00018 <emphasis role="preprocessor">#if&#32;UNITY_2018_3_OR_NEWER</emphasis>
00019 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">internal</emphasis>&#32;<emphasis role="keyword">new</emphasis>&#32;<emphasis role="keyword">class&#32;</emphasis>UxmlFactory&#32;:&#32;UxmlFactory&lt;LoadingSpinner,&#32;UxmlTraits&gt;
00020 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00021 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00022 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
00023 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;This&#32;works&#32;around&#32;an&#32;issue&#32;with&#32;UXML&#32;instantiation</emphasis>
00024 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;See&#32;https://fogbugz.unity3d.com/f/cases/1046459/</emphasis>
00025 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">internal</emphasis>&#32;<emphasis role="keyword">new</emphasis>&#32;<emphasis role="keyword">class&#32;</emphasis>UxmlTraits&#32;:&#32;VisualElement.UxmlTraits
00026 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00027 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">override</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;Init(VisualElement&#32;ve,&#32;IUxmlAttributes&#32;bag,&#32;CreationContext&#32;cc)
00028 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00029 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;base.Init(ve,&#32;bag,&#32;cc);
00030 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;UIUtils.SetElementDisplay(ve,&#32;<emphasis role="keyword">false</emphasis>);
00031 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00032 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00033 <emphasis role="preprocessor">#endif</emphasis>
00034 
<anchor xml:id="__loading_spinner_8cs_source_1l00035"/><link linkend="_class_unity_editor_1_1_package_manager_1_1_u_i_1_1_loading_spinner_1a1c2d49803fb29a6c558024e32e36203c">00035</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">bool</emphasis>&#32;<link linkend="_class_unity_editor_1_1_package_manager_1_1_u_i_1_1_loading_spinner_1a1c2d49803fb29a6c558024e32e36203c">InvertColor</link>&#32;{&#32;<emphasis role="keyword">get</emphasis>;&#32;<emphasis role="keyword">set</emphasis>;&#32;}
<anchor xml:id="__loading_spinner_8cs_source_1l00036"/><link linkend="_class_unity_editor_1_1_package_manager_1_1_u_i_1_1_loading_spinner_1a306f9c9a80e18518a2417ad79452c7de">00036</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">bool</emphasis>&#32;<link linkend="_class_unity_editor_1_1_package_manager_1_1_u_i_1_1_loading_spinner_1a306f9c9a80e18518a2417ad79452c7de">Started</link>&#32;{&#32;<emphasis role="keyword">get</emphasis>;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keyword">set</emphasis>;&#32;}
00037 
00038 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keywordtype">int</emphasis>&#32;rotation;
00039 
<anchor xml:id="__loading_spinner_8cs_source_1l00040"/><link linkend="_class_unity_editor_1_1_package_manager_1_1_u_i_1_1_loading_spinner_1a5f826f8913ed7250adff79417233f870">00040</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_class_unity_editor_1_1_package_manager_1_1_u_i_1_1_loading_spinner_1a5f826f8913ed7250adff79417233f870">LoadingSpinner</link>()
00041 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00042 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_unity_editor_1_1_package_manager_1_1_u_i_1_1_loading_spinner_1a1c2d49803fb29a6c558024e32e36203c">InvertColor</link>&#32;=&#32;<emphasis role="keyword">false</emphasis>;
00043 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_unity_editor_1_1_package_manager_1_1_u_i_1_1_loading_spinner_1a306f9c9a80e18518a2417ad79452c7de">Started</link>&#32;=&#32;<emphasis role="keyword">false</emphasis>;
00044 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;UIUtils.SetElementDisplay(<emphasis role="keyword">this</emphasis>,&#32;<emphasis role="keyword">false</emphasis>);
00045 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00046 
00047 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;UpdateProgress()
00048 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00049 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(parent&#32;==&#32;<emphasis role="keyword">null</emphasis>)
00050 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>;
00051 
00052 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;parent.transform.rotation&#32;=&#32;Quaternion.Euler(0,&#32;0,&#32;rotation);
00053 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;rotation&#32;+=&#32;3;
00054 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(rotation&#32;&gt;&#32;360)
00055 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;rotation&#32;-=&#32;360;
00056 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00057 
<anchor xml:id="__loading_spinner_8cs_source_1l00058"/><link linkend="_class_unity_editor_1_1_package_manager_1_1_u_i_1_1_loading_spinner_1ad559c1d41767f5f48ae5556a7003a3dc">00058</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_unity_editor_1_1_package_manager_1_1_u_i_1_1_loading_spinner_1ad559c1d41767f5f48ae5556a7003a3dc">Start</link>()
00059 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00060 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_unity_editor_1_1_package_manager_1_1_u_i_1_1_loading_spinner_1a306f9c9a80e18518a2417ad79452c7de">Started</link>)
00061 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>;
00062 
00063 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Weird&#32;hack&#32;to&#32;make&#32;sure&#32;loading&#32;spinner&#32;doesn&apos;t&#32;generate&#32;an&#32;error&#32;every&#32;frame.</emphasis>
00064 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Cannot&#32;put&#32;in&#32;constructor&#32;as&#32;it&#32;give&#32;really&#32;strange&#32;result.</emphasis>
00065 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(parent&#32;!=&#32;<emphasis role="keyword">null</emphasis>&#32;&amp;&amp;&#32;parent.parent&#32;!=&#32;<emphasis role="keyword">null</emphasis>)
00066 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;parent.parent.clippingOptions&#32;=&#32;ClippingOptions.ClipAndCacheContents;
00067 
00068 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;rotation&#32;=&#32;0;
00069 
00070 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;EditorApplication.update&#32;+=&#32;UpdateProgress;
00071 
00072 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_unity_editor_1_1_package_manager_1_1_u_i_1_1_loading_spinner_1a306f9c9a80e18518a2417ad79452c7de">Started</link>&#32;=&#32;<emphasis role="keyword">true</emphasis>;
00073 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;UIUtils.SetElementDisplay(<emphasis role="keyword">this</emphasis>,&#32;<emphasis role="keyword">true</emphasis>);
00074 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00075 
<anchor xml:id="__loading_spinner_8cs_source_1l00076"/><link linkend="_class_unity_editor_1_1_package_manager_1_1_u_i_1_1_loading_spinner_1a70c60e8f4237f93733e0a78fff702b96">00076</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_unity_editor_1_1_package_manager_1_1_u_i_1_1_loading_spinner_1a70c60e8f4237f93733e0a78fff702b96">Stop</link>()
00077 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00078 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(!<link linkend="_class_unity_editor_1_1_package_manager_1_1_u_i_1_1_loading_spinner_1a306f9c9a80e18518a2417ad79452c7de">Started</link>)
00079 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>;
00080 
00081 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;EditorApplication.update&#32;-=&#32;UpdateProgress;
00082 
00083 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_unity_editor_1_1_package_manager_1_1_u_i_1_1_loading_spinner_1a306f9c9a80e18518a2417ad79452c7de">Started</link>&#32;=&#32;<emphasis role="keyword">false</emphasis>;
00084 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;UIUtils.SetElementDisplay(<emphasis role="keyword">this</emphasis>,&#32;<emphasis role="keyword">false</emphasis>);
00085 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00086 &#32;&#32;&#32;&#32;}
00087 }
</programlisting></section>
