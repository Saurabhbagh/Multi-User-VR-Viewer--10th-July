<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="__data_privacy_button_8cs_source">
<title>DataPrivacyButton.cs</title>
<indexterm><primary>O:/GitHUBMINIPRoject/Library/PackageCache/com.unity.analytics@3.2.2/DataPrivacy/DataPrivacyButton.cs</primary></indexterm>
<programlisting>00001 <emphasis role="preprocessor">#if&#32;ENABLE_CLOUD_SERVICES_ANALYTICS</emphasis>
00002 <emphasis role="keyword">using</emphasis>&#32;System;
00003 <emphasis role="keyword">using</emphasis>&#32;<link linkend="_namespace_unity_engine">UnityEngine</link>.UI;
00004 
00005 <emphasis role="keyword">namespace&#32;</emphasis><link linkend="_namespace_unity_engine_1_1_analytics">UnityEngine.Analytics</link>
00006 {
00007 &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">class&#32;</emphasis>DataPrivacyButton&#32;:&#32;Button
00008 &#32;&#32;&#32;&#32;{
00009 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">bool</emphasis>&#32;urlOpened&#32;=&#32;<emphasis role="keyword">false</emphasis>;
00010 
00011 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;DataPrivacyButton()
00012 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00013 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;onClick.AddListener(OpenDataPrivacyUrl);
00014 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00015 
00016 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">void</emphasis>&#32;OnFailure(<emphasis role="keywordtype">string</emphasis>&#32;reason)
00017 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00018 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;interactable&#32;=&#32;<emphasis role="keyword">true</emphasis>;
00019 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Debug.LogWarning(String.Format(<emphasis role="stringliteral">&quot;Failed&#32;to&#32;get&#32;data&#32;privacy&#32;url:&#32;{0}&quot;</emphasis>,&#32;reason));
00020 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00021 
00022 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">void</emphasis>&#32;OpenUrl(<emphasis role="keywordtype">string</emphasis>&#32;url)
00023 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00024 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;interactable&#32;=&#32;<emphasis role="keyword">true</emphasis>;
00025 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;urlOpened&#32;=&#32;<emphasis role="keyword">true</emphasis>;
00026 
00027 <emphasis role="preprocessor">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;#if&#32;UNITY_WEBGL&#32;&amp;&amp;&#32;!UNITY_EDITOR</emphasis>
00028 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_namespace_valve_1_1_v_r_1aecd07a81fe79a9f96c6787513e2d98e4ae498749f3c42246d50b15c81c101d988">Application</link>.ExternalEval(<emphasis role="stringliteral">&quot;window.open(\&quot;&quot;</emphasis>&#32;+&#32;url&#32;+&#32;<emphasis role="stringliteral">&quot;\&quot;,\&quot;_blank\&quot;)&quot;</emphasis>);
00029 <emphasis role="preprocessor">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;#else</emphasis>
00030 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_namespace_valve_1_1_v_r_1aecd07a81fe79a9f96c6787513e2d98e4ae498749f3c42246d50b15c81c101d988">Application</link>.OpenURL(url);
00031 <emphasis role="preprocessor">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;#endif</emphasis>
00032 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00033 
00034 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">void</emphasis>&#32;OpenDataPrivacyUrl()
00035 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00036 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;interactable&#32;=&#32;<emphasis role="keyword">false</emphasis>;
00037 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;DataPrivacy.FetchPrivacyUrl(OpenUrl,&#32;OnFailure);
00038 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00039 
00040 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">void</emphasis>&#32;OnApplicationFocus(<emphasis role="keywordtype">bool</emphasis>&#32;hasFocus)
00041 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00042 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(hasFocus&#32;&amp;&amp;&#32;urlOpened)
00043 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00044 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;urlOpened&#32;=&#32;<emphasis role="keyword">false</emphasis>;
00045 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Immediately&#32;refresh&#32;the&#32;remote&#32;config&#32;so&#32;new&#32;privacy&#32;settings&#32;can&#32;be&#32;enabled</emphasis>
00046 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;as&#32;soon&#32;as&#32;possible&#32;if&#32;they&#32;have&#32;changed.</emphasis>
00047 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;RemoteSettings.ForceUpdate();
00048 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00049 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00050 &#32;&#32;&#32;&#32;}
00051 }
00052 <emphasis role="preprocessor">#endif&#32;//ENABLE_CLOUD_SERVICES_ANALYTICS</emphasis>
</programlisting></section>
