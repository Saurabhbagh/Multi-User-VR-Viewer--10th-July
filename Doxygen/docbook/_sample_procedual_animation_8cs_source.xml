<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="__sample_procedual_animation_8cs_source">
<title>SampleProcedualAnimation.cs</title>
<indexterm><primary>O:/GitHUBMINIPRoject/Assets/FastIK/Scripts/Sample/SampleProcedualAnimation.cs</primary></indexterm>
<programlisting>00001 <emphasis role="keyword">using</emphasis>&#32;System;
00002 <emphasis role="keyword">using</emphasis>&#32;System.Collections.Generic;
00003 <emphasis role="keyword">using</emphasis>&#32;System.Linq;
00004 <emphasis role="keyword">using</emphasis>&#32;System.Text;
00005 <emphasis role="keyword">using</emphasis>&#32;System.Threading;
00006 <emphasis role="keyword">using</emphasis>&#32;<link linkend="__balloon_8cs_1a7d67e097df9376eb709b6a23aa3c7d23">UnityEngine</link>;
00007 
00008 <emphasis role="keyword">namespace&#32;</emphasis><link linkend="_namespace_ditzel_games_1_1_fast_i_k">DitzelGames.FastIK</link>
00009 {
<anchor xml:id="__sample_procedual_animation_8cs_source_1l00010"/><link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation">00010</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">class&#32;</emphasis><link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation">SampleProcedualAnimation</link>&#32;:&#32;&#32;MonoBehaviour
00011 &#32;&#32;&#32;&#32;{
<anchor xml:id="__sample_procedual_animation_8cs_source_1l00012"/><link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1aa83fe353b8a5018c73b83017683bfa30">00012</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Transform[]&#32;<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1aa83fe353b8a5018c73b83017683bfa30">FootTarget</link>;
<anchor xml:id="__sample_procedual_animation_8cs_source_1l00013"/><link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1a769131f4c7aafd4ff7b4969fea0ba10f">00013</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Transform&#32;<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1a769131f4c7aafd4ff7b4969fea0ba10f">LookTarget</link>;
<anchor xml:id="__sample_procedual_animation_8cs_source_1l00014"/><link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1a27b8f569d2b291c9f865e2dfe27b99af">00014</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Transform&#32;<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1a27b8f569d2b291c9f865e2dfe27b99af">HandTarget</link>;
<anchor xml:id="__sample_procedual_animation_8cs_source_1l00015"/><link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1a221ae67515a91421ed818821cf66090d">00015</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Transform&#32;<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1a221ae67515a91421ed818821cf66090d">HandPole</link>;
<anchor xml:id="__sample_procedual_animation_8cs_source_1l00016"/><link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1a9f970cdab7b83239effe8eb63c3a375c">00016</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Transform&#32;<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1a9f970cdab7b83239effe8eb63c3a375c">Step</link>;
<anchor xml:id="__sample_procedual_animation_8cs_source_1l00017"/><link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1ab38691eef83f8493c90cf92fd6aafe77">00017</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Transform&#32;<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1ab38691eef83f8493c90cf92fd6aafe77">Attraction</link>;
00018 
<anchor xml:id="__sample_procedual_animation_8cs_source_1l00019"/><link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1a1e5f3d7f3462ce0a079a844d5091faf2">00019</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1a1e5f3d7f3462ce0a079a844d5091faf2">LateUpdate</link>()
00020 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00021 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//move&#32;step&#32;&amp;&#32;attraction</emphasis>
00022 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1a9f970cdab7b83239effe8eb63c3a375c">Step</link>.Translate(Vector3.forward&#32;*&#32;Time.deltaTime&#32;*&#32;0.7f);
00023 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1a9f970cdab7b83239effe8eb63c3a375c">Step</link>.position.z&#32;&gt;&#32;1f)
00024 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1a9f970cdab7b83239effe8eb63c3a375c">Step</link>.position&#32;=&#32;<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1a9f970cdab7b83239effe8eb63c3a375c">Step</link>.position&#32;+&#32;Vector3.forward&#32;*&#32;-2f;
00025 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1ab38691eef83f8493c90cf92fd6aafe77">Attraction</link>.Translate(Vector3.forward&#32;*&#32;Time.deltaTime&#32;*&#32;0.5f);
00026 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1ab38691eef83f8493c90cf92fd6aafe77">Attraction</link>.position.z&#32;&gt;&#32;1f)
00027 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1ab38691eef83f8493c90cf92fd6aafe77">Attraction</link>.position&#32;=&#32;<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1ab38691eef83f8493c90cf92fd6aafe77">Attraction</link>.position&#32;+&#32;Vector3.forward&#32;*&#32;-2f;
00028 
00029 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//footsteps</emphasis>
00030 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">foreach</emphasis>&#32;(var&#32;foot&#32;<emphasis role="keywordflow">in</emphasis>&#32;<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1aa83fe353b8a5018c73b83017683bfa30">FootTarget</link>)
00031 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00032 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;var&#32;ray&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;Ray(foot.transform.position&#32;+&#32;Vector3.up&#32;*&#32;0.5f,&#32;Vector3.down);
00033 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;var&#32;hitInfo&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;RaycastHit();
00034 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>(Physics.SphereCast(ray,&#32;0.05f,&#32;out&#32;hitInfo,&#32;0.50f))
00035 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;foot.position&#32;=&#32;hitInfo.point&#32;+&#32;Vector3.up&#32;*&#32;0.05f;
00036 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00037 
00038 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//hand&#32;and&#32;look</emphasis>
00039 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;var&#32;normDist&#32;=&#32;Mathf.Clamp((Vector3.Distance(<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1a769131f4c7aafd4ff7b4969fea0ba10f">LookTarget</link>.position,&#32;<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1ab38691eef83f8493c90cf92fd6aafe77">Attraction</link>.position)&#32;-&#32;0.3f)&#32;/&#32;1f,&#32;0,&#32;1);
00040 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1a27b8f569d2b291c9f865e2dfe27b99af">HandTarget</link>.rotation&#32;=&#32;Quaternion.Lerp(Quaternion.Euler(90,&#32;0,&#32;0),&#32;<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1a27b8f569d2b291c9f865e2dfe27b99af">HandTarget</link>.rotation,&#32;normDist);
00041 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1a27b8f569d2b291c9f865e2dfe27b99af">HandTarget</link>.position&#32;=&#32;Vector3.Lerp(<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1ab38691eef83f8493c90cf92fd6aafe77">Attraction</link>.position,&#32;<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1a27b8f569d2b291c9f865e2dfe27b99af">HandTarget</link>.position,&#32;normDist);
00042 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1a221ae67515a91421ed818821cf66090d">HandPole</link>.position&#32;=&#32;Vector3.Lerp(<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1a27b8f569d2b291c9f865e2dfe27b99af">HandTarget</link>.position&#32;+&#32;Vector3.down&#32;*&#32;2,&#32;<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1a27b8f569d2b291c9f865e2dfe27b99af">HandTarget</link>.position&#32;+&#32;Vector3.forward&#32;*&#32;2f,&#32;normDist);
00043 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1a769131f4c7aafd4ff7b4969fea0ba10f">LookTarget</link>.position&#32;=&#32;Vector3.Lerp(<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1ab38691eef83f8493c90cf92fd6aafe77">Attraction</link>.position,&#32;<link linkend="_class_ditzel_games_1_1_fast_i_k_1_1_sample_procedual_animation_1a769131f4c7aafd4ff7b4969fea0ba10f">LookTarget</link>.position,&#32;normDist);
00044 
00045 
00046 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00047 
00048 &#32;&#32;&#32;&#32;}
00049 }
</programlisting></section>
