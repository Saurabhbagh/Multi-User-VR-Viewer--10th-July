<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="__interaction_button_editor_8cs_source">
<title>InteractionButtonEditor.cs</title>
<indexterm><primary>O:/GitHUBMINIPRoject/Assets/LeapMotion/Modules/InteractionEngine/Scripts/UI/Editor/InteractionButtonEditor.cs</primary></indexterm>
<programlisting>00001 <emphasis role="comment">/******************************************************************************</emphasis>
00002 <emphasis role="comment">&#32;*&#32;Copyright&#32;(C)&#32;Leap&#32;Motion,&#32;Inc.&#32;2011-2018.&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;*</emphasis>
00003 <emphasis role="comment">&#32;*&#32;Leap&#32;Motion&#32;proprietary&#32;and&#32;confidential.&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;*</emphasis>
00004 <emphasis role="comment">&#32;*&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;*</emphasis>
00005 <emphasis role="comment">&#32;*&#32;Use&#32;subject&#32;to&#32;the&#32;terms&#32;of&#32;the&#32;Leap&#32;Motion&#32;SDK&#32;Agreement&#32;available&#32;at&#32;&#32;&#32;&#32;&#32;*</emphasis>
00006 <emphasis role="comment">&#32;*&#32;https://developer.leapmotion.com/sdk_agreement,&#32;or&#32;another&#32;agreement&#32;&#32;&#32;&#32;&#32;&#32;&#32;*</emphasis>
00007 <emphasis role="comment">&#32;*&#32;between&#32;Leap&#32;Motion&#32;and&#32;you,&#32;your&#32;company&#32;or&#32;other&#32;organization.&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;*</emphasis>
00008 <emphasis role="comment">&#32;******************************************************************************/</emphasis>
00009 
00010 <emphasis role="keyword">using</emphasis>&#32;<link linkend="_namespace_unity_editor">UnityEditor</link>;
00011 <emphasis role="keyword">using</emphasis>&#32;<link linkend="__balloon_8cs_1a7d67e097df9376eb709b6a23aa3c7d23">UnityEngine</link>;
00012 
00013 <emphasis role="keyword">namespace&#32;</emphasis><link linkend="_namespace_leap_1_1_unity_1_1_interaction">Leap.Unity.Interaction</link>&#32;{
00014 
00015 &#32;&#32;[CanEditMultipleObjects]
00016 &#32;&#32;[CustomEditor(typeof(InteractionButton),&#32;editorForChildClasses:&#32;<emphasis role="keyword">true</emphasis>)]
<anchor xml:id="__interaction_button_editor_8cs_source_1l00017"/><link linkend="_class_leap_1_1_unity_1_1_interaction_1_1_interaction_button_editor">00017</link> &#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">class&#32;</emphasis><link linkend="_class_leap_1_1_unity_1_1_interaction_1_1_interaction_button_editor">InteractionButtonEditor</link>&#32;:&#32;<link linkend="_class_leap_1_1_unity_1_1_interaction_1_1_interaction_behaviour_editor">InteractionBehaviourEditor</link>&#32;{
00018 
<anchor xml:id="__interaction_button_editor_8cs_source_1l00019"/><link linkend="_class_leap_1_1_unity_1_1_interaction_1_1_interaction_button_editor_1acabb30b7d288e4c778168cb3e9d712d7">00019</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">protected</emphasis>&#32;<emphasis role="keyword">override</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_leap_1_1_unity_1_1_interaction_1_1_interaction_button_editor_1acabb30b7d288e4c778168cb3e9d712d7">OnEnable</link>()&#32;{
00020 &#32;&#32;&#32;&#32;&#32;&#32;base.OnEnable();
00021 
00022 &#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_leap_1_1_unity_1_1_custom_editor_base_1a050b2c7054d16bc8e497877eed360664">specifyConditionalDrawing</link>(()&#32;=&gt;&#32;<emphasis role="keyword">false</emphasis>,&#32;<emphasis role="stringliteral">&quot;graspedMovementType&quot;</emphasis>);
00023 &#32;&#32;&#32;&#32;}
00024 
<anchor xml:id="__interaction_button_editor_8cs_source_1l00025"/><link linkend="_class_leap_1_1_unity_1_1_interaction_1_1_interaction_button_editor_1aef59612f9c7f92072dd7b5bc996ddcf6">00025</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">override</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_leap_1_1_unity_1_1_interaction_1_1_interaction_button_editor_1aef59612f9c7f92072dd7b5bc996ddcf6">OnInspectorGUI</link>()&#32;{
00026 &#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_leap_1_1_unity_1_1_interaction_1_1_interaction_button">InteractionButton</link>&#32;button&#32;=&#32;<link linkend="_class_leap_1_1_unity_1_1_custom_editor_base_1a20eea7e492831d5b4cde7eeaf0ce749e">target</link>&#32;as&#32;<link linkend="_class_leap_1_1_unity_1_1_interaction_1_1_interaction_button">InteractionButton</link>;
00027 
00028 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">bool</emphasis>&#32;nonzeroRotation&#32;=&#32;button.<link linkend="_interface_leap_1_1_unity_1_1_interaction_1_1_i_interaction_behaviour_1a2ff1423c8145ae05a1cc8506d6932136">transform</link>.localRotation&#32;!=&#32;Quaternion.identity;
00029 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">bool</emphasis>&#32;isRoot&#32;=&#32;button.<link linkend="_interface_leap_1_1_unity_1_1_interaction_1_1_i_interaction_behaviour_1a2ff1423c8145ae05a1cc8506d6932136">transform</link>&#32;==&#32;button.<link linkend="_interface_leap_1_1_unity_1_1_interaction_1_1_i_interaction_behaviour_1a2ff1423c8145ae05a1cc8506d6932136">transform</link>.root;
00030 &#32;&#32;&#32;&#32;&#32;&#32;PrefabType&#32;objectType&#32;=&#32;PrefabUtility.GetPrefabType(button.<link linkend="_interface_leap_1_1_unity_1_1_interaction_1_1_i_interaction_behaviour_1a5bf48f2a9cc26189140cff87dd3caffb">gameObject</link>);
00031 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">bool</emphasis>&#32;isNotAnUninstantiatedPrefab&#32;=&#32;
00032 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;objectType&#32;==&#32;PrefabType.None&#32;||&#32;
00033 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;objectType&#32;==&#32;PrefabType.PrefabInstance&#32;||&#32;
00034 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;objectType&#32;==&#32;PrefabType.MissingPrefabInstance&#32;||
00035 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;objectType&#32;==&#32;PrefabType.DisconnectedPrefabInstance;
00036 
00037 &#32;&#32;&#32;&#32;&#32;&#32;EditorGUILayout.BeginHorizontal();
00038 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;((nonzeroRotation&#32;||&#32;isRoot)&#32;&amp;&amp;&#32;isNotAnUninstantiatedPrefab)&#32;{
00039 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(isRoot)&#32;{
00040 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;EditorGUILayout.HelpBox(<emphasis role="stringliteral">&quot;This&#32;button&#32;has&#32;no&#32;parent!&#32;&#32;Buttons&#32;do&#32;not&#32;work&#32;without&#32;a&#32;parent&#32;transform.&quot;</emphasis>,&#32;MessageType.Warning);
00041 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}&#32;<emphasis role="keywordflow">else</emphasis>&#32;<emphasis role="keywordflow">if</emphasis>&#32;(nonzeroRotation)&#32;{
00042 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;EditorGUILayout.HelpBox(<emphasis role="stringliteral">&quot;It&#32;looks&#32;like&#32;this&#32;button&apos;s&#32;local&#32;rotation&#32;is&#32;non-zero;&#32;would&#32;you&#32;like&#32;to&#32;add&#32;a&#32;parent&#32;transform&#32;so&#32;it&#32;depresses&#32;along&#32;its&#32;z-axis?&quot;</emphasis>,&#32;MessageType.Warning);
00043 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00044 
00045 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(GUILayout.Button(<emphasis role="stringliteral">&quot;Add&#32;Button\nParent&#32;Transform&quot;</emphasis>))&#32;{
00046 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GameObject&#32;buttonBaseTransform&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;GameObject(button.<link linkend="_interface_leap_1_1_unity_1_1_interaction_1_1_i_interaction_behaviour_1a5bf48f2a9cc26189140cff87dd3caffb">gameObject</link>.name&#32;+&#32;<emphasis role="stringliteral">&quot;&#32;Base&quot;</emphasis>);
00047 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Undo.RegisterCreatedObjectUndo(buttonBaseTransform,&#32;<emphasis role="stringliteral">&quot;Created&#32;Button&#32;Base&#32;for&#32;&quot;</emphasis>+&#32;button.<link linkend="_interface_leap_1_1_unity_1_1_interaction_1_1_i_interaction_behaviour_1a5bf48f2a9cc26189140cff87dd3caffb">gameObject</link>.name);
00048 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Undo.SetTransformParent(buttonBaseTransform.transform,&#32;button.<link linkend="_interface_leap_1_1_unity_1_1_interaction_1_1_i_interaction_behaviour_1a2ff1423c8145ae05a1cc8506d6932136">transform</link>.parent,&#32;<emphasis role="stringliteral">&quot;Child&#32;&quot;</emphasis>+&#32;button.<link linkend="_interface_leap_1_1_unity_1_1_interaction_1_1_i_interaction_behaviour_1a5bf48f2a9cc26189140cff87dd3caffb">gameObject</link>.name+&#32;<emphasis role="stringliteral">&quot;&apos;s&#32;Base&#32;to&#32;&quot;</emphasis>&#32;+&#32;button.<link linkend="_interface_leap_1_1_unity_1_1_interaction_1_1_i_interaction_behaviour_1a5bf48f2a9cc26189140cff87dd3caffb">gameObject</link>.name&#32;+&#32;<emphasis role="stringliteral">&quot;&apos;s&#32;Parent&quot;</emphasis>);
00049 
00050 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Undo.RecordObject(buttonBaseTransform,&#32;<emphasis role="stringliteral">&quot;Set&#32;&quot;</emphasis>+<link linkend="_class_leap_1_1_unity_1_1_custom_editor_base_1a20eea7e492831d5b4cde7eeaf0ce749e">target</link>.gameObject.name+<emphasis role="stringliteral">&quot;&apos;s&#32;Base&apos;s&#32;Transform&apos;s&#32;Properties&quot;</emphasis>);
00051 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;buttonBaseTransform.transform.localPosition&#32;=&#32;button.<link linkend="_interface_leap_1_1_unity_1_1_interaction_1_1_i_interaction_behaviour_1a2ff1423c8145ae05a1cc8506d6932136">transform</link>.localPosition;
00052 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;buttonBaseTransform.transform.localRotation&#32;=&#32;button.<link linkend="_interface_leap_1_1_unity_1_1_interaction_1_1_i_interaction_behaviour_1a2ff1423c8145ae05a1cc8506d6932136">transform</link>.localRotation;
00053 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;buttonBaseTransform.transform.localScale&#32;=&#32;button.<link linkend="_interface_leap_1_1_unity_1_1_interaction_1_1_i_interaction_behaviour_1a2ff1423c8145ae05a1cc8506d6932136">transform</link>.localScale;
00054 
00055 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Undo.SetTransformParent(button.<link linkend="_interface_leap_1_1_unity_1_1_interaction_1_1_i_interaction_behaviour_1a2ff1423c8145ae05a1cc8506d6932136">transform</link>,&#32;buttonBaseTransform.transform,&#32;<emphasis role="stringliteral">&quot;Child&#32;&quot;</emphasis>&#32;+&#32;button.<link linkend="_interface_leap_1_1_unity_1_1_interaction_1_1_i_interaction_behaviour_1a5bf48f2a9cc26189140cff87dd3caffb">gameObject</link>.name&#32;+&#32;<emphasis role="stringliteral">&quot;&#32;to&#32;its&#32;Base&quot;</emphasis>);
00056 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00057 &#32;&#32;&#32;&#32;&#32;&#32;}
00058 
00059 &#32;&#32;&#32;&#32;&#32;&#32;EditorGUILayout.EndHorizontal();
00060 
00061 &#32;&#32;&#32;&#32;&#32;&#32;EditorGUILayout.BeginHorizontal();
00062 
00063 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(!isRoot)&#32;{
00064 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">bool</emphasis>&#32;isUniform&#32;=&#32;(button.<link linkend="_interface_leap_1_1_unity_1_1_interaction_1_1_i_interaction_behaviour_1a2ff1423c8145ae05a1cc8506d6932136">transform</link>.parent.lossyScale.x.NearlyEquals(button.<link linkend="_interface_leap_1_1_unity_1_1_interaction_1_1_i_interaction_behaviour_1a2ff1423c8145ae05a1cc8506d6932136">transform</link>.parent.lossyScale.y)&#32;&amp;&amp;
00065 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;button.<link linkend="_interface_leap_1_1_unity_1_1_interaction_1_1_i_interaction_behaviour_1a2ff1423c8145ae05a1cc8506d6932136">transform</link>.parent.lossyScale.y.NearlyEquals(button.<link linkend="_interface_leap_1_1_unity_1_1_interaction_1_1_i_interaction_behaviour_1a2ff1423c8145ae05a1cc8506d6932136">transform</link>.parent.lossyScale.z)&#32;&amp;&amp;
00066 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;button.<link linkend="_interface_leap_1_1_unity_1_1_interaction_1_1_i_interaction_behaviour_1a2ff1423c8145ae05a1cc8506d6932136">transform</link>.parent.lossyScale.x.NearlyEquals(button.<link linkend="_interface_leap_1_1_unity_1_1_interaction_1_1_i_interaction_behaviour_1a2ff1423c8145ae05a1cc8506d6932136">transform</link>.parent.lossyScale.z));
00067 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(!isUniform)&#32;{
00068 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;EditorGUILayout.HelpBox(<emphasis role="stringliteral">&quot;This&#32;button&#32;exists&#32;within&#32;a&#32;non-uniformly&#32;scaled&#32;space!&#32;&#32;Please&#32;check&#32;the&#32;parent&#32;transforms&#32;for&#32;non-uniform&#32;scale...&quot;</emphasis>,&#32;MessageType.Warning);
00069 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00070 &#32;&#32;&#32;&#32;&#32;&#32;}
00071 
00072 &#32;&#32;&#32;&#32;&#32;&#32;EditorGUILayout.EndHorizontal();
00073 
00074 &#32;&#32;&#32;&#32;&#32;&#32;Rigidbody&#32;currentBody&#32;=&#32;button.GetComponent&lt;Rigidbody&gt;();
00075 &#32;&#32;&#32;&#32;&#32;&#32;RigidbodyConstraints&#32;constraints&#32;=&#32;currentBody.constraints;
00076 
00077 &#32;&#32;&#32;&#32;&#32;&#32;EditorGUILayout.BeginHorizontal();
00078 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(constraints&#32;!=&#32;RigidbodyConstraints.FreezeRotation)&#32;{
00079 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;EditorGUILayout.HelpBox(<emphasis role="stringliteral">&quot;It&#32;looks&#32;like&#32;this&#32;button&#32;can&#32;freely&#32;rotate&#32;around&#32;one&#32;or&#32;more&#32;axes;&#32;would&#32;you&#32;like&#32;to&#32;constrain&#32;its&#32;rotation?&quot;</emphasis>,&#32;MessageType.Warning);
00080 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(GUILayout.Button(<emphasis role="stringliteral">&quot;Freeze\nRotation&quot;</emphasis>))&#32;{
00081 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Undo.RecordObject(currentBody,&#32;<emphasis role="stringliteral">&quot;Set&#32;&quot;</emphasis>&#32;+&#32;<link linkend="_class_leap_1_1_unity_1_1_custom_editor_base_1a20eea7e492831d5b4cde7eeaf0ce749e">target</link>.gameObject.name&#32;+&#32;<emphasis role="stringliteral">&quot;&apos;s&#32;Rigidbody&apos;s&#32;Rotation&#32;Constraints&#32;to&#32;be&#32;frozen&quot;</emphasis>);
00082 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;currentBody.constraints&#32;=&#32;RigidbodyConstraints.FreezeRotation;
00083 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00084 &#32;&#32;&#32;&#32;&#32;&#32;}
00085 &#32;&#32;&#32;&#32;&#32;&#32;EditorGUILayout.EndHorizontal();
00086 
00087 &#32;&#32;&#32;&#32;&#32;&#32;base.OnInspectorGUI();
00088 &#32;&#32;&#32;&#32;}
00089 &#32;&#32;}
00090 }
</programlisting></section>
