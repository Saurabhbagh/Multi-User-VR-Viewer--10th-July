<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="__progress_bar_8cs_source">
<title>ProgressBar.cs</title>
<indexterm><primary>O:/GitHUBMINIPRoject/Assets/LeapMotion/Core/Scripts/Utils/ProgressBar.cs</primary></indexterm>
<programlisting>00001 <emphasis role="comment">/******************************************************************************</emphasis>
00002 <emphasis role="comment">&#32;*&#32;Copyright&#32;(C)&#32;Leap&#32;Motion,&#32;Inc.&#32;2011-2018.&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;*</emphasis>
00003 <emphasis role="comment">&#32;*&#32;Leap&#32;Motion&#32;proprietary&#32;and&#32;confidential.&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;*</emphasis>
00004 <emphasis role="comment">&#32;*&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;*</emphasis>
00005 <emphasis role="comment">&#32;*&#32;Use&#32;subject&#32;to&#32;the&#32;terms&#32;of&#32;the&#32;Leap&#32;Motion&#32;SDK&#32;Agreement&#32;available&#32;at&#32;&#32;&#32;&#32;&#32;*</emphasis>
00006 <emphasis role="comment">&#32;*&#32;https://developer.leapmotion.com/sdk_agreement,&#32;or&#32;another&#32;agreement&#32;&#32;&#32;&#32;&#32;&#32;&#32;*</emphasis>
00007 <emphasis role="comment">&#32;*&#32;between&#32;Leap&#32;Motion&#32;and&#32;you,&#32;your&#32;company&#32;or&#32;other&#32;organization.&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;*</emphasis>
00008 <emphasis role="comment">&#32;******************************************************************************/</emphasis>
00009 
00010 <emphasis role="preprocessor">#if&#32;UNITY_EDITOR</emphasis>
00011 <emphasis role="keyword">using</emphasis>&#32;<link linkend="_namespace_unity_editor">UnityEditor</link>;
00012 <emphasis role="preprocessor">#endif</emphasis>
00013 <emphasis role="keyword">using</emphasis>&#32;System;
00014 <emphasis role="keyword">using</emphasis>&#32;System.Collections.Generic;
00015 <emphasis role="keyword">using</emphasis>&#32;System.Diagnostics;
00016 
00017 <emphasis role="keyword">namespace&#32;</emphasis><link linkend="_namespace_leap_1_1_unity">Leap.Unity</link>&#32;{
00018 
<anchor xml:id="__progress_bar_8cs_source_1l00022"/><link linkend="_interface_leap_1_1_unity_1_1_i_progress_view">00022</link> &#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">interface&#32;</emphasis><link linkend="_interface_leap_1_1_unity_1_1_i_progress_view">IProgressView</link>&#32;{
00023 
00028 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_interface_leap_1_1_unity_1_1_i_progress_view_1a46a2ab798cf5fcdec6cea7065ba1b384">Clear</link>();
00029 
00034 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_interface_leap_1_1_unity_1_1_i_progress_view_1aaa6759b57d4c327ffc05da272ec5fe57">DisplayProgress</link>(<emphasis role="keywordtype">string</emphasis>&#32;title,&#32;<emphasis role="keywordtype">string</emphasis>&#32;info,&#32;<emphasis role="keywordtype">float</emphasis>&#32;progress);
00035 &#32;&#32;}
00036 
00037 <emphasis role="preprocessor">#if&#32;UNITY_EDITOR</emphasis>
00038 &#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">class&#32;</emphasis>EditorProgressView&#32;:&#32;<link linkend="_interface_leap_1_1_unity_1_1_i_progress_view">IProgressView</link>&#32;{
00047 &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">static</emphasis>&#32;readonly&#32;EditorProgressView&#32;Single&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;EditorProgressView();
00048 
00049 &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;Clear()&#32;{
00050 &#32;&#32;&#32;&#32;&#32;&#32;EditorUtility.ClearProgressBar();
00051 &#32;&#32;&#32;&#32;}
00052 
00053 &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;DisplayProgress(<emphasis role="keywordtype">string</emphasis>&#32;title,&#32;<emphasis role="keywordtype">string</emphasis>&#32;info,&#32;<emphasis role="keywordtype">float</emphasis>&#32;progress)&#32;{
00054 &#32;&#32;&#32;&#32;&#32;&#32;EditorUtility.DisplayProgressBar(title,&#32;info,&#32;progress);
00055 &#32;&#32;&#32;&#32;}
00056 &#32;&#32;}
00057 <emphasis role="preprocessor">#endif</emphasis>
00058 
<anchor xml:id="__progress_bar_8cs_source_1l00067"/><link linkend="_class_leap_1_1_unity_1_1_progress_bar">00067</link> &#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">class&#32;</emphasis><link linkend="_class_leap_1_1_unity_1_1_progress_bar">ProgressBar</link>&#32;{
00068 &#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;List&lt;int&gt;&#32;chunks&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;List&lt;int&gt;();
00069 &#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;List&lt;int&gt;&#32;progress&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;List&lt;int&gt;();
00070 &#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;List&lt;string&gt;&#32;titleStrings&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;List&lt;string&gt;();
00071 &#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;List&lt;string&gt;&#32;infoStrings&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;List&lt;string&gt;();
00072 &#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;Stopwatch&#32;stopwatch&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;Stopwatch();
00073 
00074 &#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keywordtype">bool</emphasis>&#32;_forceUpdate;
00075 
00076 &#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<link linkend="_interface_leap_1_1_unity_1_1_i_progress_view">IProgressView</link>&#32;_view;
00077 
00078 <emphasis role="preprocessor">#if&#32;UNITY_EDITOR</emphasis>
00079 &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_class_leap_1_1_unity_1_1_progress_bar_1a3eae09f6ae1b8ac7ef13c2e5fbb18687">ProgressBar</link>()&#32;:&#32;<emphasis role="keyword">this</emphasis>(EditorProgressView.Single)&#32;{&#32;}
00086 <emphasis role="preprocessor">#endif</emphasis>
00087 
<anchor xml:id="__progress_bar_8cs_source_1l00093"/><link linkend="_class_leap_1_1_unity_1_1_progress_bar_1a3eae09f6ae1b8ac7ef13c2e5fbb18687">00093</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_class_leap_1_1_unity_1_1_progress_bar_1a3eae09f6ae1b8ac7ef13c2e5fbb18687">ProgressBar</link>(<link linkend="_interface_leap_1_1_unity_1_1_i_progress_view">IProgressView</link>&#32;view)&#32;{
00094 &#32;&#32;&#32;&#32;&#32;&#32;_view&#32;=&#32;view;
00095 &#32;&#32;&#32;&#32;}
00096 
<anchor xml:id="__progress_bar_8cs_source_1l00110"/><link linkend="_class_leap_1_1_unity_1_1_progress_bar_1a82ed530190bcad8fe2d51f1555c50743">00110</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_leap_1_1_unity_1_1_progress_bar_1a82ed530190bcad8fe2d51f1555c50743">Begin</link>(<emphasis role="keywordtype">int</emphasis>&#32;sections,&#32;<emphasis role="keywordtype">string</emphasis>&#32;title,&#32;<emphasis role="keywordtype">string</emphasis>&#32;info,&#32;Action&#32;action)&#32;{
00111 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(!stopwatch.IsRunning)&#32;{
00112 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;stopwatch.Reset();
00113 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;stopwatch.Start();
00114 &#32;&#32;&#32;&#32;&#32;&#32;}
00115 
00116 &#32;&#32;&#32;&#32;&#32;&#32;chunks.Add(sections);
00117 &#32;&#32;&#32;&#32;&#32;&#32;progress.Add(0);
00118 &#32;&#32;&#32;&#32;&#32;&#32;titleStrings.Add(title);
00119 &#32;&#32;&#32;&#32;&#32;&#32;infoStrings.Add(info);
00120 
00121 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">try</emphasis>&#32;{
00122 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;_forceUpdate&#32;=&#32;<emphasis role="keyword">true</emphasis>;
00123 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;action();
00124 &#32;&#32;&#32;&#32;&#32;&#32;}&#32;<emphasis role="keywordflow">finally</emphasis>&#32;{
00125 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;lastIndex&#32;=&#32;chunks.Count&#32;-&#32;1;
00126 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;chunks.RemoveAt(lastIndex);
00127 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;progress.RemoveAt(lastIndex);
00128 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;titleStrings.RemoveAt(lastIndex);
00129 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;infoStrings.RemoveAt(lastIndex);
00130 
00131 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;lastIndex--;
00132 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(lastIndex&#32;&gt;=&#32;0)&#32;{
00133 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;progress[lastIndex]++;
00134 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00135 
00136 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(chunks.Count&#32;==&#32;0)&#32;{
00137 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;_view.<link linkend="_interface_leap_1_1_unity_1_1_i_progress_view_1a46a2ab798cf5fcdec6cea7065ba1b384">Clear</link>();
00138 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;stopwatch.Stop();
00139 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00140 &#32;&#32;&#32;&#32;&#32;&#32;}
00141 &#32;&#32;&#32;&#32;}
00142 
<anchor xml:id="__progress_bar_8cs_source_1l00148"/><link linkend="_class_leap_1_1_unity_1_1_progress_bar_1aa59a69d7baf972994660394378c9e3a9">00148</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_leap_1_1_unity_1_1_progress_bar_1aa59a69d7baf972994660394378c9e3a9">Step</link>(<emphasis role="keywordtype">string</emphasis>&#32;infoString&#32;=&#32;<emphasis role="stringliteral">&quot;&quot;</emphasis>)&#32;{
00149 &#32;&#32;&#32;&#32;&#32;&#32;progress[progress.Count&#32;-&#32;1]++;
00150 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(stopwatch.ElapsedMilliseconds&#32;&gt;&#32;17&#32;||&#32;_forceUpdate)&#32;{
00151 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;displayBar(infoString);
00152 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;stopwatch.Reset();
00153 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;stopwatch.Start();
00154 &#32;&#32;&#32;&#32;&#32;&#32;}
00155 &#32;&#32;&#32;&#32;}
00156 
00157 &#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;displayBar(<emphasis role="keywordtype">string</emphasis>&#32;info&#32;=&#32;<emphasis role="stringliteral">&quot;&quot;</emphasis>)&#32;{
00158 &#32;&#32;&#32;&#32;&#32;&#32;_forceUpdate&#32;=&#32;<emphasis role="keyword">false</emphasis>;
00159 
00160 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;percent&#32;=&#32;0.0f;
00161 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;fraction&#32;=&#32;1.0f;
00162 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">string</emphasis>&#32;titleString&#32;=&#32;<emphasis role="stringliteral">&quot;&quot;</emphasis>;
00163 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">string</emphasis>&#32;infoString&#32;=&#32;<emphasis role="stringliteral">&quot;&quot;</emphasis>;
00164 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(<emphasis role="keywordtype">int</emphasis>&#32;i&#32;=&#32;0;&#32;i&#32;&lt;&#32;chunks.Count;&#32;i++)&#32;{
00165 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;chunkSize&#32;=&#32;chunks[i];
00166 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;chunkProgress&#32;=&#32;progress[i];
00167 
00168 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;percent&#32;+=&#32;fraction&#32;*&#32;(chunkProgress&#32;/&#32;chunkSize);
00169 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;fraction&#32;/=&#32;chunkSize;
00170 
00171 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;titleString&#32;+=&#32;titleStrings[i];
00172 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;infoString&#32;+=&#32;infoStrings[i];
00173 &#32;&#32;&#32;&#32;&#32;&#32;}
00174 
00175 &#32;&#32;&#32;&#32;&#32;&#32;infoString&#32;+=&#32;info;
00176 
00177 &#32;&#32;&#32;&#32;&#32;&#32;_view.<link linkend="_interface_leap_1_1_unity_1_1_i_progress_view_1aaa6759b57d4c327ffc05da272ec5fe57">DisplayProgress</link>(titleString,&#32;infoString,&#32;percent);
00178 &#32;&#32;&#32;&#32;}
00179 &#32;&#32;}
00180 }
</programlisting></section>
