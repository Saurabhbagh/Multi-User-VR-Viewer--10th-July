<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="__floppy_hand_8cs_source">
<title>FloppyHand.cs</title>
<indexterm><primary>O:/GitHUBMINIPRoject/Assets/SteamVR/InteractionSystem/Samples/Scripts/FloppyHand.cs</primary></indexterm>
<programlisting>00001 <emphasis role="comment">//=======&#32;Copyright&#32;(c)&#32;Valve&#32;Corporation,&#32;All&#32;rights&#32;reserved.&#32;===============</emphasis>
00002 
00003 <emphasis role="keyword">using</emphasis>&#32;<link linkend="__balloon_8cs_1a7d67e097df9376eb709b6a23aa3c7d23">UnityEngine</link>;
00004 <emphasis role="keyword">using</emphasis>&#32;System.Collections;
00005 
00006 <emphasis role="keyword">namespace&#32;</emphasis><link linkend="_namespace_valve_1_1_v_r_1_1_interaction_system_1_1_sample">Valve.VR.InteractionSystem.Sample</link>
00007 {
<anchor xml:id="__floppy_hand_8cs_source_1l00008"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand">00008</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">class&#32;</emphasis><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand">FloppyHand</link>&#32;:&#32;MonoBehaviour
00009 &#32;&#32;&#32;&#32;{
<anchor xml:id="__floppy_hand_8cs_source_1l00010"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1aec87f8520f5ef365c5a089f8c974e8b4">00010</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">protected</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1aec87f8520f5ef365c5a089f8c974e8b4">fingerFlexAngle</link>&#32;=&#32;140;
00011 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="__floppy_hand_8cs_source_1l00012"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1ab523fc013ed2eeaa22a1f8d4aa6882b0">00012</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___single">SteamVR_Action_Single</link>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1ab523fc013ed2eeaa22a1f8d4aa6882b0">squeezyAction</link>&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___input">SteamVR_Input</link>.GetAction&lt;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___single">SteamVR_Action_Single</link>&gt;(<emphasis role="stringliteral">&quot;Squeeze&quot;</emphasis>);
<anchor xml:id="__floppy_hand_8cs_source_1l00013"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1a72b3bab5c350ea43098ffb65d9b6db19">00013</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_namespace_valve_1_1_v_r_1a82e5bf501cc3aa155444ee3f0662853f">SteamVR_Input_Sources</link>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1a72b3bab5c350ea43098ffb65d9b6db19">inputSource</link>;
00014 
00015 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[System.Serializable]
<anchor xml:id="__floppy_hand_8cs_source_1l00016"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger">00016</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">class&#32;</emphasis><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger">Finger</link>
00017 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
<anchor xml:id="__floppy_hand_8cs_source_1l00018"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a502856d0674454805e8eaaa1fe0be25f">00018</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a502856d0674454805e8eaaa1fe0be25f">mass</link>;
00019 
00020 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[Range(0,&#32;1)]
<anchor xml:id="__floppy_hand_8cs_source_1l00021"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1abbd1ec5bec644d075e5c1c873f933cf3">00021</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1abbd1ec5bec644d075e5c1c873f933cf3">pos</link>;
00022 
<anchor xml:id="__floppy_hand_8cs_source_1l00023"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1aa892ac83a5c52d544b351626966db389">00023</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Vector3&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1aa892ac83a5c52d544b351626966db389">forwardAxis</link>;
00024 
<anchor xml:id="__floppy_hand_8cs_source_1l00025"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1aa17900f1725a656f59c4860f9cdc9f02">00025</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;SkinnedMeshRenderer&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1aa17900f1725a656f59c4860f9cdc9f02">renderer</link>;
00026 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[HideInInspector]
<anchor xml:id="__floppy_hand_8cs_source_1l00027"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a62ee9ab8729a763df7f2c3d904cb66d7">00027</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___single">SteamVR_Action_Single</link>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a62ee9ab8729a763df7f2c3d904cb66d7">squeezyAction</link>;
<anchor xml:id="__floppy_hand_8cs_source_1l00028"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a1aa6147709a85f101f079f5ec79c2401">00028</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_namespace_valve_1_1_v_r_1a82e5bf501cc3aa155444ee3f0662853f">SteamVR_Input_Sources</link>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a1aa6147709a85f101f079f5ec79c2401">inputSource</link>;
00029 
<anchor xml:id="__floppy_hand_8cs_source_1l00030"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a642253f31fc17304621931c87cb1feb7">00030</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Transform[]&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a642253f31fc17304621931c87cb1feb7">bones</link>;
<anchor xml:id="__floppy_hand_8cs_source_1l00031"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a930b396460d6fc8f666ce9e2be42f61e">00031</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Transform&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a930b396460d6fc8f666ce9e2be42f61e">referenceBone</link>;
<anchor xml:id="__floppy_hand_8cs_source_1l00032"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a462044c1d5078065ae06832807d979fc">00032</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Vector2&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a462044c1d5078065ae06832807d979fc">referenceAngles</link>;
00033 
<anchor xml:id="__floppy_hand_8cs_source_1l00034"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1ab6442b559d46bdb7c1a046dcba1fa76d">00034</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">enum</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1ab6442b559d46bdb7c1a046dcba1fa76d">eulerAxis</link>
00035 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00036 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;X,&#32;Y,&#32;Z
00037 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="__floppy_hand_8cs_source_1l00038"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1ac9272e21d2e98009390759e68a902e85">00038</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1ab6442b559d46bdb7c1a046dcba1fa76d">eulerAxis</link>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1ac9272e21d2e98009390759e68a902e85">referenceAxis</link>;
00039 
00040 
00041 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[HideInInspector]
<anchor xml:id="__floppy_hand_8cs_source_1l00042"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1ac58ae50473700384959c4270e519c4a1">00042</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1ac58ae50473700384959c4270e519c4a1">flexAngle</link>;
00043 
00044 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;Vector3[]&#32;rotation;
00045 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;Vector3[]&#32;velocity;
00046 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;Transform[]&#32;boneTips;
00047 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;Vector3[]&#32;oldTipPosition;
00048 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;Vector3[]&#32;oldTipDelta;
00049 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;Vector3[,]&#32;inertiaSmoothing;
00050 
00051 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;squeezySmooth;
00052 
00053 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keywordtype">int</emphasis>&#32;inertiaSteps&#32;=&#32;10;
00054 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;k&#32;=&#32;400;
00055 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;damping&#32;=&#32;8;
00056 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;Quaternion[]&#32;startRot;
00057 
<anchor xml:id="__floppy_hand_8cs_source_1l00058"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1adcb12cad50c49ec8e3945f8ecce74d27">00058</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1adcb12cad50c49ec8e3945f8ecce74d27">ApplyForce</link>(Vector3&#32;worldForce)
00059 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00060 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(<emphasis role="keywordtype">int</emphasis>&#32;i&#32;=&#32;0;&#32;i&#32;&lt;&#32;startRot.Length;&#32;i++)
00061 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00062 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;velocity[i]&#32;+=&#32;worldForce&#32;/&#32;50;
00063 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00064 
00065 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00066 
00067 
<anchor xml:id="__floppy_hand_8cs_source_1l00068"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1af5800fb862c4a3bdb9ee479a063c4517">00068</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1af5800fb862c4a3bdb9ee479a063c4517">Init</link>()
00069 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00070 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;startRot&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;Quaternion[<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a642253f31fc17304621931c87cb1feb7">bones</link>.Length];
00071 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;rotation&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;Vector3[<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a642253f31fc17304621931c87cb1feb7">bones</link>.Length];
00072 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;velocity&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;Vector3[<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a642253f31fc17304621931c87cb1feb7">bones</link>.Length];
00073 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;oldTipPosition&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;Vector3[<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a642253f31fc17304621931c87cb1feb7">bones</link>.Length];
00074 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;oldTipDelta&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;Vector3[<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a642253f31fc17304621931c87cb1feb7">bones</link>.Length];
00075 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;boneTips&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;Transform[<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a642253f31fc17304621931c87cb1feb7">bones</link>.Length];
00076 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;inertiaSmoothing&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;Vector3[<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a642253f31fc17304621931c87cb1feb7">bones</link>.Length,&#32;inertiaSteps];
00077 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(<emphasis role="keywordtype">int</emphasis>&#32;i&#32;=&#32;0;&#32;i&#32;&lt;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a642253f31fc17304621931c87cb1feb7">bones</link>.Length;&#32;i++)
00078 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00079 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;startRot[i]&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a642253f31fc17304621931c87cb1feb7">bones</link>[i].localRotation;
00080 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(i&#32;&lt;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a642253f31fc17304621931c87cb1feb7">bones</link>.Length&#32;-&#32;1)
00081 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00082 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;boneTips[i]&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a642253f31fc17304621931c87cb1feb7">bones</link>[i&#32;+&#32;1];
00083 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00084 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00085 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00086 
<anchor xml:id="__floppy_hand_8cs_source_1l00087"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a2d9bc5d7e464efe9b7b25571fd5156ec">00087</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a2d9bc5d7e464efe9b7b25571fd5156ec">UpdateFinger</link>(<emphasis role="keywordtype">float</emphasis>&#32;deltaTime)
00088 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00089 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(deltaTime&#32;==&#32;0)
00090 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>;
00091 
00092 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;squeezeValue&#32;=&#32;0;
00093 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a62ee9ab8729a763df7f2c3d904cb66d7">squeezyAction</link>&#32;!=&#32;<emphasis role="keyword">null</emphasis>&#32;&amp;&amp;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a62ee9ab8729a763df7f2c3d904cb66d7">squeezyAction</link>.GetActive(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a1aa6147709a85f101f079f5ec79c2401">inputSource</link>))
00094 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;squeezeValue&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a62ee9ab8729a763df7f2c3d904cb66d7">squeezyAction</link>.<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___single_1a3b78812c9a7bea43b8d64440d5f4b339">GetAxis</link>(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a1aa6147709a85f101f079f5ec79c2401">inputSource</link>);
00095 
00096 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;squeezySmooth&#32;=&#32;Mathf.Lerp(squeezySmooth,&#32;Mathf.Sqrt(squeezeValue),&#32;deltaTime&#32;*&#32;10);
00097 
00098 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1aa17900f1725a656f59c4860f9cdc9f02">renderer</link>.sharedMesh.blendShapeCount&#32;&gt;&#32;0)
00099 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00100 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1aa17900f1725a656f59c4860f9cdc9f02">renderer</link>.SetBlendShapeWeight(0,&#32;squeezySmooth&#32;*&#32;100);
00101 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00102 
00103 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;boneRot&#32;=&#32;0;
00104 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1ac9272e21d2e98009390759e68a902e85">referenceAxis</link>&#32;==&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1ab6442b559d46bdb7c1a046dcba1fa76d">eulerAxis</link>.X)
00105 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;boneRot&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a930b396460d6fc8f666ce9e2be42f61e">referenceBone</link>.localEulerAngles.x;
00106 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1ac9272e21d2e98009390759e68a902e85">referenceAxis</link>&#32;==&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1ab6442b559d46bdb7c1a046dcba1fa76d">eulerAxis</link>.Y)
00107 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;boneRot&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a930b396460d6fc8f666ce9e2be42f61e">referenceBone</link>.localEulerAngles.y;
00108 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1ac9272e21d2e98009390759e68a902e85">referenceAxis</link>&#32;==&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1ab6442b559d46bdb7c1a046dcba1fa76d">eulerAxis</link>.Z)
00109 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;boneRot&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a930b396460d6fc8f666ce9e2be42f61e">referenceBone</link>.localEulerAngles.z;
00110 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;boneRot&#32;=&#32;FixAngle(boneRot);
00111 
00112 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1abbd1ec5bec644d075e5c1c873f933cf3">pos</link>&#32;=&#32;Mathf.InverseLerp(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a462044c1d5078065ae06832807d979fc">referenceAngles</link>.x,&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a462044c1d5078065ae06832807d979fc">referenceAngles</link>.y,&#32;boneRot);
00113 
00114 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a502856d0674454805e8eaaa1fe0be25f">mass</link>&#32;&gt;&#32;0)
00115 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00116 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(<emphasis role="keywordtype">int</emphasis>&#32;boneIndex&#32;=&#32;0;&#32;boneIndex&#32;&lt;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a642253f31fc17304621931c87cb1feb7">bones</link>.Length;&#32;boneIndex++)
00117 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00118 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">bool</emphasis>&#32;useOffset&#32;=&#32;boneTips[boneIndex]&#32;!=&#32;<emphasis role="keyword">null</emphasis>;
00119 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(useOffset)&#32;<emphasis role="comment">//&#32;inertia&#32;sim</emphasis>
00120 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00121 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;offset&#32;=&#32;(boneTips[boneIndex].localPosition&#32;-&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a642253f31fc17304621931c87cb1feb7">bones</link>[boneIndex].InverseTransformPoint(oldTipPosition[boneIndex]))&#32;/&#32;deltaTime;
00122 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;inertia&#32;=&#32;(offset&#32;-&#32;oldTipDelta[boneIndex])&#32;/&#32;deltaTime;
00123 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;oldTipDelta[boneIndex]&#32;=&#32;offset;
00124 
00125 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;drag&#32;=&#32;offset&#32;*&#32;-2;
00126 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;inertia&#32;*=&#32;-2f;
00127 
00128 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(<emphasis role="keywordtype">int</emphasis>&#32;offsetIndex&#32;=&#32;inertiaSteps&#32;-&#32;1;&#32;offsetIndex&#32;&gt;&#32;0;&#32;offsetIndex--)&#32;<emphasis role="comment">//&#32;offset&#32;inertia&#32;steps</emphasis>
00129 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00130 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;inertiaSmoothing[boneIndex,&#32;offsetIndex]&#32;=&#32;inertiaSmoothing[boneIndex,&#32;offsetIndex&#32;-&#32;1];
00131 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00132 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;inertiaSmoothing[boneIndex,&#32;0]&#32;=&#32;inertia;
00133 
00134 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;smoothedInertia&#32;=&#32;Vector3.zero;
00135 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(<emphasis role="keywordtype">int</emphasis>&#32;offsetIndex&#32;=&#32;0;&#32;offsetIndex&#32;&lt;&#32;inertiaSteps;&#32;offsetIndex++)&#32;<emphasis role="comment">//&#32;offset&#32;inertia&#32;steps</emphasis>
00136 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00137 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;smoothedInertia&#32;+=&#32;inertiaSmoothing[boneIndex,&#32;offsetIndex];
00138 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00139 
00140 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;smoothedInertia&#32;=&#32;smoothedInertia&#32;/&#32;inertiaSteps;
00141 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//if&#32;(boneIndex&#32;==&#32;0&#32;&amp;&amp;&#32;Input.GetKey(KeyCode.Space))</emphasis>
00142 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;&#32;&#32;&#32;Debug.Log(smoothedInertia);</emphasis>
00143 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;smoothedInertia&#32;=&#32;PowVector(smoothedInertia&#32;/&#32;20,&#32;3)&#32;*&#32;20;
00144 
00145 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;forward&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1aa892ac83a5c52d544b351626966db389">forwardAxis</link>;
00146 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;forwardDrag&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1aa892ac83a5c52d544b351626966db389">forwardAxis</link>&#32;+&#32;drag;
00147 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;forwardInertia&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1aa892ac83a5c52d544b351626966db389">forwardAxis</link>&#32;+&#32;smoothedInertia;
00148 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Quaternion&#32;dragQuaternion&#32;=&#32;Quaternion.FromToRotation(forward,&#32;forwardDrag);
00149 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Quaternion&#32;inertiaQuaternion&#32;=&#32;Quaternion.FromToRotation(forward,&#32;forwardInertia);
00150 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;velocity[boneIndex]&#32;+=&#32;FixVector(dragQuaternion.eulerAngles)&#32;*&#32;2&#32;*&#32;deltaTime;
00151 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;velocity[boneIndex]&#32;+=&#32;FixVector(inertiaQuaternion.eulerAngles)&#32;*&#32;50&#32;*&#32;deltaTime;
00152 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;velocity[boneIndex]&#32;=&#32;Vector3.ClampMagnitude(velocity[boneIndex],&#32;1000);
00153 
00154 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00155 
00156 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;targetPos&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1abbd1ec5bec644d075e5c1c873f933cf3">pos</link>&#32;*&#32;Vector3.right&#32;*&#32;(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1ac58ae50473700384959c4270e519c4a1">flexAngle</link>&#32;/&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a642253f31fc17304621931c87cb1feb7">bones</link>.Length);
00157 
00158 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;springForce&#32;=&#32;-k&#32;*&#32;(rotation[boneIndex]&#32;-&#32;targetPos);
00159 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;var&#32;dampingForce&#32;=&#32;damping&#32;*&#32;velocity[boneIndex];
00160 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;var&#32;force&#32;=&#32;springForce&#32;-&#32;dampingForce;
00161 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;var&#32;acceleration&#32;=&#32;force&#32;/&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a502856d0674454805e8eaaa1fe0be25f">mass</link>;
00162 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;velocity[boneIndex]&#32;+=&#32;acceleration&#32;*&#32;deltaTime;
00163 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;rotation[boneIndex]&#32;+=&#32;velocity[boneIndex]&#32;*&#32;Time.deltaTime;
00164 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;rotation[boneIndex]&#32;=&#32;Vector3.ClampMagnitude(rotation[boneIndex],&#32;180);
00165 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(useOffset)
00166 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00167 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;oldTipPosition[boneIndex]&#32;=&#32;boneTips[boneIndex].position;
00168 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00169 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00170 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00171 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>
00172 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00173 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Debug.LogError(<emphasis role="stringliteral">&quot;&lt;b&gt;[SteamVR&#32;Interaction]&lt;/b&gt;&#32;finger&#32;mass&#32;is&#32;zero&quot;</emphasis>);
00174 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00175 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00176 
<anchor xml:id="__floppy_hand_8cs_source_1l00177"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1aa1305770f2889e238ec71ad61932beee">00177</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1aa1305770f2889e238ec71ad61932beee">ApplyTransforms</link>()
00178 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00179 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(<emphasis role="keywordtype">int</emphasis>&#32;i&#32;=&#32;0;&#32;i&#32;&lt;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a642253f31fc17304621931c87cb1feb7">bones</link>.Length;&#32;i++)
00180 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00181 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a642253f31fc17304621931c87cb1feb7">bones</link>[i].localRotation&#32;=&#32;startRot[i];
00182 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a642253f31fc17304621931c87cb1feb7">bones</link>[i].Rotate(rotation[i],&#32;Space.Self);
00183 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00184 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00185 
00186 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;Vector3&#32;FixVector(Vector3&#32;ang)
00187 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00188 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">new</emphasis>&#32;Vector3(FixAngle(ang.x),&#32;FixAngle(ang.y),&#32;FixAngle(ang.z));
00189 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00190 
00191 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;FixAngle(<emphasis role="keywordtype">float</emphasis>&#32;ang)
00192 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00193 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(ang&#32;&gt;&#32;180)
00194 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ang&#32;=&#32;-360&#32;+&#32;ang;
00195 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;ang;
00196 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00197 
00198 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;Vector3&#32;PowVector(Vector3&#32;vector,&#32;<emphasis role="keywordtype">float</emphasis>&#32;power)
00199 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00200 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;sign&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;Vector3(Mathf.Sign(vector.x),&#32;Mathf.Sign(vector.y),&#32;Mathf.Sign(vector.z));
00201 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;vector.x&#32;=&#32;Mathf.Pow(Mathf.Abs(vector.x),&#32;power)&#32;*&#32;sign.x;
00202 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;vector.y&#32;=&#32;Mathf.Pow(Mathf.Abs(vector.y),&#32;power)&#32;*&#32;sign.y;
00203 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;vector.z&#32;=&#32;Mathf.Pow(Mathf.Abs(vector.z),&#32;power)&#32;*&#32;sign.z;
00204 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;vector;
00205 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00206 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00207 
<anchor xml:id="__floppy_hand_8cs_source_1l00208"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1a3e38eee6e202a4553aa52e660ed43dc5">00208</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger">Finger</link>[]&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1a3e38eee6e202a4553aa52e660ed43dc5">fingers</link>;
00209 
<anchor xml:id="__floppy_hand_8cs_source_1l00210"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1a61bd769a974ee3eeaea5d2c6c179328c">00210</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Vector3&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1a61bd769a974ee3eeaea5d2c6c179328c">constforce</link>;
00211 
00212 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;Start()
00213 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00214 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(<emphasis role="keywordtype">int</emphasis>&#32;fingerIndex&#32;=&#32;0;&#32;fingerIndex&#32;&lt;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1a3e38eee6e202a4553aa52e660ed43dc5">fingers</link>.Length;&#32;fingerIndex++)
00215 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00216 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1a3e38eee6e202a4553aa52e660ed43dc5">fingers</link>[fingerIndex].<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1af5800fb862c4a3bdb9ee479a063c4517">Init</link>();
00217 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1a3e38eee6e202a4553aa52e660ed43dc5">fingers</link>[fingerIndex].<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1ac58ae50473700384959c4270e519c4a1">flexAngle</link>&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1aec87f8520f5ef365c5a089f8c974e8b4">fingerFlexAngle</link>;
00218 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1a3e38eee6e202a4553aa52e660ed43dc5">fingers</link>[fingerIndex].<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a62ee9ab8729a763df7f2c3d904cb66d7">squeezyAction</link>&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1ab523fc013ed2eeaa22a1f8d4aa6882b0">squeezyAction</link>;
00219 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1a3e38eee6e202a4553aa52e660ed43dc5">fingers</link>[fingerIndex].<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a1aa6147709a85f101f079f5ec79c2401">inputSource</link>&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1a72b3bab5c350ea43098ffb65d9b6db19">inputSource</link>;
00220 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00221 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00222 
00223 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;Update()
00224 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00225 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(<emphasis role="keywordtype">int</emphasis>&#32;fingerIndex&#32;=&#32;0;&#32;fingerIndex&#32;&lt;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1a3e38eee6e202a4553aa52e660ed43dc5">fingers</link>.Length;&#32;fingerIndex++)
00226 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00227 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1a3e38eee6e202a4553aa52e660ed43dc5">fingers</link>[fingerIndex].<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1adcb12cad50c49ec8e3945f8ecce74d27">ApplyForce</link>(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1a61bd769a974ee3eeaea5d2c6c179328c">constforce</link>);
00228 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1a3e38eee6e202a4553aa52e660ed43dc5">fingers</link>[fingerIndex].<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1a2d9bc5d7e464efe9b7b25571fd5156ec">UpdateFinger</link>(Time.deltaTime);
00229 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1a3e38eee6e202a4553aa52e660ed43dc5">fingers</link>[fingerIndex].<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_floppy_hand_1_1_finger_1aa1305770f2889e238ec71ad61932beee">ApplyTransforms</link>();
00230 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00231 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00232 &#32;&#32;&#32;&#32;}
00233 }
</programlisting></section>
