<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="__finger_model_8cs_source">
<title>FingerModel.cs</title>
<indexterm><primary>O:/GitHUBMINIPRoject/Assets/LeapMotion/Core/Scripts/Hands/FingerModel.cs</primary></indexterm>
<programlisting>00001 <emphasis role="comment">/******************************************************************************</emphasis>
00002 <emphasis role="comment">&#32;*&#32;Copyright&#32;(C)&#32;Leap&#32;Motion,&#32;Inc.&#32;2011-2018.&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;*</emphasis>
00003 <emphasis role="comment">&#32;*&#32;Leap&#32;Motion&#32;proprietary&#32;and&#32;confidential.&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;*</emphasis>
00004 <emphasis role="comment">&#32;*&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;*</emphasis>
00005 <emphasis role="comment">&#32;*&#32;Use&#32;subject&#32;to&#32;the&#32;terms&#32;of&#32;the&#32;Leap&#32;Motion&#32;SDK&#32;Agreement&#32;available&#32;at&#32;&#32;&#32;&#32;&#32;*</emphasis>
00006 <emphasis role="comment">&#32;*&#32;https://developer.leapmotion.com/sdk_agreement,&#32;or&#32;another&#32;agreement&#32;&#32;&#32;&#32;&#32;&#32;&#32;*</emphasis>
00007 <emphasis role="comment">&#32;*&#32;between&#32;Leap&#32;Motion&#32;and&#32;you,&#32;your&#32;company&#32;or&#32;other&#32;organization.&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;*</emphasis>
00008 <emphasis role="comment">&#32;******************************************************************************/</emphasis>
00009 
00010 <emphasis role="keyword">using</emphasis>&#32;<link linkend="__balloon_8cs_1a7d67e097df9376eb709b6a23aa3c7d23">UnityEngine</link>;
00011 <emphasis role="keyword">using</emphasis>&#32;System.Collections;
00012 <emphasis role="keyword">using</emphasis>&#32;<link linkend="_namespace_leap">Leap</link>;
00013 <emphasis role="keyword">using</emphasis>&#32;<link linkend="_namespace_leap">Leap</link>.<link linkend="_namespace_leap_1_1_unity">Unity</link>;
00014 
00015 <emphasis role="keyword">namespace&#32;</emphasis><link linkend="_namespace_leap_1_1_unity">Leap.Unity</link>{
<anchor xml:id="__finger_model_8cs_source_1l00027"/><link linkend="_class_leap_1_1_unity_1_1_finger_model">00027</link> &#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">abstract</emphasis>&#32;<emphasis role="keyword">class&#32;</emphasis><link linkend="_class_leap_1_1_unity_1_1_finger_model">FingerModel</link>&#32;:&#32;MonoBehaviour&#32;{
00028 
<anchor xml:id="__finger_model_8cs_source_1l00030"/><link linkend="_class_leap_1_1_unity_1_1_finger_model_1a35043ac951361f61a591a5a69083ab8c">00030</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keywordtype">int</emphasis>&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a35043ac951361f61a591a5a69083ab8c">NUM_BONES</link>&#32;=&#32;4;
00031 
<anchor xml:id="__finger_model_8cs_source_1l00033"/><link linkend="_class_leap_1_1_unity_1_1_finger_model_1a7c3698c9580cdab983d5273b88c6d288">00033</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keywordtype">int</emphasis>&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a7c3698c9580cdab983d5273b88c6d288">NUM_JOINTS</link>&#32;=&#32;3;
00034 
<anchor xml:id="__finger_model_8cs_source_1l00035"/><link linkend="_class_leap_1_1_unity_1_1_finger_model_1a21c5f56f4dd6fba09212d1738811eecb">00035</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_class_leap_1_1_finger">Finger</link>.<link linkend="_class_leap_1_1_finger_1ae75e8d46a01aff0bd5c6d6fb99e2f2ba">FingerType</link>&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a21c5f56f4dd6fba09212d1738811eecb">fingerType</link>&#32;=&#32;<link linkend="_class_leap_1_1_finger">Finger</link>.<link linkend="_class_leap_1_1_finger_1ae75e8d46a01aff0bd5c6d6fb99e2f2ba">FingerType</link>.TYPE_INDEX;
00036 
00037 &#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Unity&#32;references</emphasis>
<anchor xml:id="__finger_model_8cs_source_1l00039"/><link linkend="_class_leap_1_1_unity_1_1_finger_model_1a9dc2230af982027edd82f9952a1267a6">00039</link> <emphasis role="comment"></emphasis>&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Transform[]&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a9dc2230af982027edd82f9952a1267a6">bones</link>&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;Transform[<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a35043ac951361f61a591a5a69083ab8c">NUM_BONES</link>];
<anchor xml:id="__finger_model_8cs_source_1l00041"/><link linkend="_class_leap_1_1_unity_1_1_finger_model_1ac4bafebe19d4651bf35e95a52288aa24">00041</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Transform[]&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1ac4bafebe19d4651bf35e95a52288aa24">joints</link>&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;Transform[<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a35043ac951361f61a591a5a69083ab8c">NUM_BONES</link>&#32;-&#32;1];
00042 
00043 &#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Leap&#32;references</emphasis>
<anchor xml:id="__finger_model_8cs_source_1l00045"/><link linkend="_class_leap_1_1_unity_1_1_finger_model_1a2157942a6279b6457c632ce5024e8f27">00045</link> <emphasis role="comment"></emphasis>&#32;&#32;&#32;&#32;<emphasis role="keyword">protected</emphasis>&#32;<link linkend="_class_leap_1_1_hand">Hand</link>&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a2157942a6279b6457c632ce5024e8f27">hand_</link>;
<anchor xml:id="__finger_model_8cs_source_1l00047"/><link linkend="_class_leap_1_1_unity_1_1_finger_model_1a8b4b5c124b754ee09e0b032618f7e666">00047</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">protected</emphasis>&#32;<link linkend="_class_leap_1_1_finger">Finger</link>&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a8b4b5c124b754ee09e0b032618f7e666">finger_</link>;
00048 
<anchor xml:id="__finger_model_8cs_source_1l00054"/><link linkend="_class_leap_1_1_unity_1_1_finger_model_1a5f8a0bc34c12092d53249cbdb2e19b75">00054</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a5f8a0bc34c12092d53249cbdb2e19b75">SetLeapHand</link>(<link linkend="_class_leap_1_1_hand">Hand</link>&#32;hand)&#32;{
00055 &#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a2157942a6279b6457c632ce5024e8f27">hand_</link>&#32;=&#32;hand;
00056 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a2157942a6279b6457c632ce5024e8f27">hand_</link>&#32;!=&#32;<emphasis role="keyword">null</emphasis>)&#32;{
00057 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a8b4b5c124b754ee09e0b032618f7e666">finger_</link>&#32;=&#32;hand.<link linkend="_class_leap_1_1_hand_1ac9f68349507bfa13e3ac24738382bea6">Fingers</link>[(int)<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a21c5f56f4dd6fba09212d1738811eecb">fingerType</link>];
00058 &#32;&#32;&#32;&#32;&#32;&#32;}
00059 &#32;&#32;&#32;&#32;}
00060 
<anchor xml:id="__finger_model_8cs_source_1l00062"/><link linkend="_class_leap_1_1_unity_1_1_finger_model_1a4247dfc727b2b1d05c16a81c440ed22d">00062</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_class_leap_1_1_hand">Hand</link>&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a4247dfc727b2b1d05c16a81c440ed22d">GetLeapHand</link>()&#32;{&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a2157942a6279b6457c632ce5024e8f27">hand_</link>;&#32;}
<anchor xml:id="__finger_model_8cs_source_1l00064"/><link linkend="_class_leap_1_1_unity_1_1_finger_model_1a053d0477db4bbb6c3353350b769089b3">00064</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_class_leap_1_1_finger">Finger</link>&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a053d0477db4bbb6c3353350b769089b3">GetLeapFinger</link>()&#32;{&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a8b4b5c124b754ee09e0b032618f7e666">finger_</link>;&#32;}
00065 
<anchor xml:id="__finger_model_8cs_source_1l00070"/><link linkend="_class_leap_1_1_unity_1_1_finger_model_1a27b24f96e9e709625779cc24bd5d72f3">00070</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">virtual</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a27b24f96e9e709625779cc24bd5d72f3">InitFinger</link>()&#32;{
00071 &#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a9103f063172a8f99a9aa083407ada2a2">UpdateFinger</link>();
00072 &#32;&#32;&#32;&#32;}
00073 
00081 &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">abstract</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a9103f063172a8f99a9aa083407ada2a2">UpdateFinger</link>();
00082 
<anchor xml:id="__finger_model_8cs_source_1l00084"/><link linkend="_class_leap_1_1_unity_1_1_finger_model_1a16b8b56d0d1d8f2876fede7df4914143">00084</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Vector3&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a16b8b56d0d1d8f2876fede7df4914143">GetTipPosition</link>()&#32;{
00085 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a8b4b5c124b754ee09e0b032618f7e666">finger_</link>&#32;!=&#32;<emphasis role="keyword">null</emphasis>)&#32;{
00086 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;local_tip&#32;=&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a8b4b5c124b754ee09e0b032618f7e666">finger_</link>.<link linkend="_class_leap_1_1_finger_1a5ae2d74471ca480d76820478067bda64">Bone</link>&#32;((<link linkend="_class_leap_1_1_bone">Bone</link>.<link linkend="_class_leap_1_1_bone_1a21054e31cefa7b75f25a026006fdbb1b">BoneType</link>.TYPE_DISTAL)).<link linkend="_class_leap_1_1_bone_1ac0923c0228d11208289b81ff8ed208b7">NextJoint</link>.ToVector3();
00087 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;local_tip;
00088 &#32;&#32;&#32;&#32;&#32;&#32;}
00089 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a9dc2230af982027edd82f9952a1267a6">bones</link>&#32;[<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a35043ac951361f61a591a5a69083ab8c">NUM_BONES</link>&#32;-&#32;1]&#32;&amp;&amp;&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1ac4bafebe19d4651bf35e95a52288aa24">joints</link>&#32;[<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a7c3698c9580cdab983d5273b88c6d288">NUM_JOINTS</link>&#32;-&#32;2])&#32;{
00090 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;2f*<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a9dc2230af982027edd82f9952a1267a6">bones</link>&#32;[<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a35043ac951361f61a591a5a69083ab8c">NUM_BONES</link>&#32;-&#32;1].position&#32;-&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1ac4bafebe19d4651bf35e95a52288aa24">joints</link>&#32;[<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a7c3698c9580cdab983d5273b88c6d288">NUM_JOINTS</link>&#32;-&#32;2].position;
00091 &#32;&#32;&#32;&#32;&#32;&#32;}
00092 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;Vector3.zero;
00093 &#32;&#32;&#32;&#32;}
00094 
<anchor xml:id="__finger_model_8cs_source_1l00096"/><link linkend="_class_leap_1_1_unity_1_1_finger_model_1acc14a2149a5a1c8d7277f64db41af544">00096</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Vector3&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1acc14a2149a5a1c8d7277f64db41af544">GetJointPosition</link>(<emphasis role="keywordtype">int</emphasis>&#32;joint)&#32;{
00097 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(joint&#32;&gt;=&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a35043ac951361f61a591a5a69083ab8c">NUM_BONES</link>)&#32;{
00098 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a16b8b56d0d1d8f2876fede7df4914143">GetTipPosition</link>&#32;();
00099 &#32;&#32;&#32;&#32;&#32;&#32;}
00100 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a8b4b5c124b754ee09e0b032618f7e666">finger_</link>&#32;!=&#32;<emphasis role="keyword">null</emphasis>)&#32;{
00101 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;local_position&#32;=&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a8b4b5c124b754ee09e0b032618f7e666">finger_</link>.<link linkend="_class_leap_1_1_finger_1a5ae2d74471ca480d76820478067bda64">Bone</link>((<link linkend="_class_leap_1_1_bone">Bone</link>.<link linkend="_class_leap_1_1_bone_1a21054e31cefa7b75f25a026006fdbb1b">BoneType</link>)(joint)).<link linkend="_class_leap_1_1_bone_1a9bf9d79aa10edd70baa3d27e8bac0730">PrevJoint</link>.ToVector3();
00102 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;local_position;
00103 &#32;&#32;&#32;&#32;&#32;&#32;}
00104 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_leap_1_1_unity_1_1_finger_model_1ac4bafebe19d4651bf35e95a52288aa24">joints</link>&#32;[joint])&#32;{
00105 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1ac4bafebe19d4651bf35e95a52288aa24">joints</link>[joint].position;
00106 &#32;&#32;&#32;&#32;&#32;&#32;}
00107 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;Vector3.zero;
00108 &#32;&#32;&#32;&#32;}
00109 
<anchor xml:id="__finger_model_8cs_source_1l00111"/><link linkend="_class_leap_1_1_unity_1_1_finger_model_1a88e07c014c2ac4cfa7403760bc1d2dd7">00111</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Ray&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a88e07c014c2ac4cfa7403760bc1d2dd7">GetRay</link>()&#32;{
00112 &#32;&#32;&#32;&#32;&#32;&#32;Ray&#32;ray&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;Ray(<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a16b8b56d0d1d8f2876fede7df4914143">GetTipPosition</link>(),&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a66f77c83bb90b02c1b46692d5f824ae3">GetBoneDirection</link>(<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a35043ac951361f61a591a5a69083ab8c">NUM_BONES</link>&#32;-&#32;1));
00113 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;ray;
00114 &#32;&#32;&#32;&#32;}
00115 
<anchor xml:id="__finger_model_8cs_source_1l00117"/><link linkend="_class_leap_1_1_unity_1_1_finger_model_1a660b8448f1f9f6ea0b5ffe773b110925">00117</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Vector3&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a660b8448f1f9f6ea0b5ffe773b110925">GetBoneCenter</link>(<emphasis role="keywordtype">int</emphasis>&#32;bone_type)&#32;{
00118 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a8b4b5c124b754ee09e0b032618f7e666">finger_</link>&#32;!=&#32;<emphasis role="keyword">null</emphasis>)&#32;{
00119 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_leap_1_1_bone">Bone</link>&#32;bone&#32;=&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a8b4b5c124b754ee09e0b032618f7e666">finger_</link>.<link linkend="_class_leap_1_1_finger_1a5ae2d74471ca480d76820478067bda64">Bone</link>&#32;((<link linkend="_class_leap_1_1_bone">Bone</link>.<link linkend="_class_leap_1_1_bone_1a21054e31cefa7b75f25a026006fdbb1b">BoneType</link>)(bone_type));
00120 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;bone.<link linkend="_class_leap_1_1_bone_1a820e1a7a9975c41ca14aec7c806b9c65">Center</link>.ToVector3();
00121 &#32;&#32;&#32;&#32;&#32;&#32;}
00122 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a9dc2230af982027edd82f9952a1267a6">bones</link>&#32;[bone_type])&#32;{
00123 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a9dc2230af982027edd82f9952a1267a6">bones</link>[bone_type].position;
00124 &#32;&#32;&#32;&#32;&#32;&#32;}
00125 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;Vector3.zero;
00126 &#32;&#32;&#32;&#32;}
00127 
<anchor xml:id="__finger_model_8cs_source_1l00129"/><link linkend="_class_leap_1_1_unity_1_1_finger_model_1a66f77c83bb90b02c1b46692d5f824ae3">00129</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Vector3&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a66f77c83bb90b02c1b46692d5f824ae3">GetBoneDirection</link>(<emphasis role="keywordtype">int</emphasis>&#32;bone_type)&#32;{
00130 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a8b4b5c124b754ee09e0b032618f7e666">finger_</link>&#32;!=&#32;<emphasis role="keyword">null</emphasis>)&#32;{
00131 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;direction&#32;=&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1acc14a2149a5a1c8d7277f64db41af544">GetJointPosition</link>&#32;(bone_type&#32;+&#32;1)&#32;-&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1acc14a2149a5a1c8d7277f64db41af544">GetJointPosition</link>&#32;(bone_type);
00132 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;direction.normalized;
00133 &#32;&#32;&#32;&#32;&#32;&#32;}
00134 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a9dc2230af982027edd82f9952a1267a6">bones</link>[bone_type])&#32;{
00135 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a9dc2230af982027edd82f9952a1267a6">bones</link>[bone_type].forward;
00136 &#32;&#32;&#32;&#32;&#32;&#32;}
00137 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;Vector3.forward;
00138 &#32;&#32;&#32;&#32;}
00139 
<anchor xml:id="__finger_model_8cs_source_1l00141"/><link linkend="_class_leap_1_1_unity_1_1_finger_model_1a1d84c11cb9e8a1096225718bcd759ceb">00141</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Quaternion&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a1d84c11cb9e8a1096225718bcd759ceb">GetBoneRotation</link>(<emphasis role="keywordtype">int</emphasis>&#32;bone_type)&#32;{
00142 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a8b4b5c124b754ee09e0b032618f7e666">finger_</link>&#32;!=&#32;<emphasis role="keyword">null</emphasis>)&#32;{
00143 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Quaternion&#32;local_rotation&#32;=&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a8b4b5c124b754ee09e0b032618f7e666">finger_</link>.<link linkend="_class_leap_1_1_finger_1a5ae2d74471ca480d76820478067bda64">Bone</link>&#32;((<link linkend="_class_leap_1_1_bone">Bone</link>.<link linkend="_class_leap_1_1_bone_1a21054e31cefa7b75f25a026006fdbb1b">BoneType</link>)(bone_type)).<link linkend="_class_leap_1_1_bone_1a1531c2eecaace7d4532e78f903f3b59a">Rotation</link>.ToQuaternion();
00144 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;local_rotation;
00145 &#32;&#32;&#32;&#32;&#32;&#32;}
00146 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a9dc2230af982027edd82f9952a1267a6">bones</link>[bone_type])&#32;{
00147 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a9dc2230af982027edd82f9952a1267a6">bones</link>[bone_type].rotation;
00148 &#32;&#32;&#32;&#32;&#32;&#32;}
00149 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;Quaternion.identity;
00150 &#32;&#32;&#32;&#32;}
00151 
<anchor xml:id="__finger_model_8cs_source_1l00153"/><link linkend="_class_leap_1_1_unity_1_1_finger_model_1acd58685c52b4bf4dc85e19597dc4de56">00153</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1acd58685c52b4bf4dc85e19597dc4de56">GetBoneLength</link>(<emphasis role="keywordtype">int</emphasis>&#32;bone_type)&#32;{
00154 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a8b4b5c124b754ee09e0b032618f7e666">finger_</link>.<link linkend="_class_leap_1_1_finger_1a5ae2d74471ca480d76820478067bda64">Bone</link>((<link linkend="_class_leap_1_1_bone">Bone</link>.<link linkend="_class_leap_1_1_bone_1a21054e31cefa7b75f25a026006fdbb1b">BoneType</link>)(bone_type)).<link linkend="_class_leap_1_1_bone_1ab10b9823a94b21069ded7fe9cbf92dc8">Length</link>;
00155 &#32;&#32;&#32;&#32;}
00156 
<anchor xml:id="__finger_model_8cs_source_1l00158"/><link linkend="_class_leap_1_1_unity_1_1_finger_model_1ae6f5843758fb9c6e1f08affba6b4be72">00158</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1ae6f5843758fb9c6e1f08affba6b4be72">GetBoneWidth</link>(<emphasis role="keywordtype">int</emphasis>&#32;bone_type)&#32;{
00159 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a8b4b5c124b754ee09e0b032618f7e666">finger_</link>.<link linkend="_class_leap_1_1_finger_1a5ae2d74471ca480d76820478067bda64">Bone</link>((<link linkend="_class_leap_1_1_bone">Bone</link>.<link linkend="_class_leap_1_1_bone_1a21054e31cefa7b75f25a026006fdbb1b">BoneType</link>)(bone_type)).<link linkend="_class_leap_1_1_bone_1a1bea3ae48af0c138e0423276191ed8ab">Width</link>;
00160 &#32;&#32;&#32;&#32;}
00161 
<anchor xml:id="__finger_model_8cs_source_1l00167"/><link linkend="_class_leap_1_1_unity_1_1_finger_model_1a054cf50d19d911d50ddae0b0dcc40026">00167</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a054cf50d19d911d50ddae0b0dcc40026">GetFingerJointStretchMecanim</link>(<emphasis role="keywordtype">int</emphasis>&#32;joint_type)&#32;{
00168 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;The&#32;successive&#32;actions&#32;of&#32;local&#32;rotations&#32;on&#32;a&#32;vector&#32;yield&#32;the&#32;global&#32;rotation,</emphasis>
00169 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;so&#32;the&#32;inverse&#32;of&#32;the&#32;parent&#32;rotation&#32;appears&#32;on&#32;the&#32;left.</emphasis>
00170 &#32;&#32;&#32;&#32;&#32;&#32;Quaternion&#32;jointRotation&#32;=&#32;Quaternion.identity;
00171 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a8b4b5c124b754ee09e0b032618f7e666">finger_</link>&#32;!=&#32;<emphasis role="keyword">null</emphasis>)&#32;{
00172 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;jointRotation&#32;=&#32;Quaternion.Inverse(<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a8b4b5c124b754ee09e0b032618f7e666">finger_</link>.<link linkend="_class_leap_1_1_finger_1a5ae2d74471ca480d76820478067bda64">Bone</link>((<link linkend="_class_leap_1_1_bone">Bone</link>.<link linkend="_class_leap_1_1_bone_1a21054e31cefa7b75f25a026006fdbb1b">BoneType</link>)(joint_type)).<link linkend="_class_leap_1_1_bone_1a1531c2eecaace7d4532e78f903f3b59a">Rotation</link>.ToQuaternion())
00173 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;*&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a8b4b5c124b754ee09e0b032618f7e666">finger_</link>.<link linkend="_class_leap_1_1_finger_1a5ae2d74471ca480d76820478067bda64">Bone</link>&#32;((<link linkend="_class_leap_1_1_bone">Bone</link>.<link linkend="_class_leap_1_1_bone_1a21054e31cefa7b75f25a026006fdbb1b">BoneType</link>)(joint_type&#32;+&#32;1)).<link linkend="_class_leap_1_1_bone_1a1531c2eecaace7d4532e78f903f3b59a">Rotation</link>.ToQuaternion();
00174 &#32;&#32;&#32;&#32;&#32;&#32;}&#32;<emphasis role="keywordflow">else</emphasis>&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a9dc2230af982027edd82f9952a1267a6">bones</link>&#32;[joint_type]&#32;&amp;&amp;&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a9dc2230af982027edd82f9952a1267a6">bones</link>&#32;[joint_type&#32;+&#32;1])&#32;{
00175 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;jointRotation&#32;=&#32;Quaternion.Inverse&#32;(<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a1d84c11cb9e8a1096225718bcd759ceb">GetBoneRotation</link>&#32;(joint_type))&#32;*&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a1d84c11cb9e8a1096225718bcd759ceb">GetBoneRotation</link>&#32;(joint_type&#32;+&#32;1);
00176 &#32;&#32;&#32;&#32;&#32;&#32;}
00177 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Stretch&#32;is&#32;a&#32;rotation&#32;around&#32;the&#32;X&#32;axis&#32;of&#32;the&#32;base&#32;bone</emphasis>
00178 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Positive&#32;stretch&#32;opens&#32;joints</emphasis>
00179 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;stretchAngle&#32;=&#32;-jointRotation.eulerAngles.x;
00180 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(stretchAngle&#32;&lt;=&#32;-180f)&#32;{
00181 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;stretchAngle&#32;+=&#32;360f;
00182 &#32;&#32;&#32;&#32;&#32;&#32;}
00183 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;NOTE:&#32;eulerAngles&#32;range&#32;is&#32;[0,&#32;360)&#32;so&#32;stretchAngle&#32;&gt;&#32;+180f&#32;will&#32;not&#32;occur.</emphasis>
00184 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;stretchAngle;
00185 &#32;&#32;&#32;&#32;}
00186 
<anchor xml:id="__finger_model_8cs_source_1l00193"/><link linkend="_class_leap_1_1_unity_1_1_finger_model_1a6abf370a3ddeb4675801eeec6378a375">00193</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a6abf370a3ddeb4675801eeec6378a375">GetFingerJointSpreadMecanim</link>()&#32;{
00194 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;The&#32;successive&#32;actions&#32;of&#32;local&#32;rotations&#32;on&#32;a&#32;vector&#32;yield&#32;the&#32;global&#32;rotation,</emphasis>
00195 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;so&#32;the&#32;inverse&#32;of&#32;the&#32;parent&#32;rotation&#32;appears&#32;on&#32;the&#32;left.</emphasis>
00196 &#32;&#32;&#32;&#32;&#32;&#32;Quaternion&#32;jointRotation&#32;=&#32;Quaternion.identity;
00197 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a8b4b5c124b754ee09e0b032618f7e666">finger_</link>&#32;!=&#32;<emphasis role="keyword">null</emphasis>)&#32;{
00198 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;jointRotation&#32;=&#32;Quaternion.Inverse&#32;(<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a8b4b5c124b754ee09e0b032618f7e666">finger_</link>.<link linkend="_class_leap_1_1_finger_1a5ae2d74471ca480d76820478067bda64">Bone</link>&#32;((<link linkend="_class_leap_1_1_bone">Bone</link>.<link linkend="_class_leap_1_1_bone_1a21054e31cefa7b75f25a026006fdbb1b">BoneType</link>)(0)).<link linkend="_class_leap_1_1_bone_1a1531c2eecaace7d4532e78f903f3b59a">Rotation</link>.ToQuaternion())
00199 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;*&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a8b4b5c124b754ee09e0b032618f7e666">finger_</link>.<link linkend="_class_leap_1_1_finger_1a5ae2d74471ca480d76820478067bda64">Bone</link>&#32;((<link linkend="_class_leap_1_1_bone">Bone</link>.<link linkend="_class_leap_1_1_bone_1a21054e31cefa7b75f25a026006fdbb1b">BoneType</link>)(1)).<link linkend="_class_leap_1_1_bone_1a1531c2eecaace7d4532e78f903f3b59a">Rotation</link>.ToQuaternion();
00200 &#32;&#32;&#32;&#32;&#32;&#32;}&#32;<emphasis role="keywordflow">else</emphasis>&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a9dc2230af982027edd82f9952a1267a6">bones</link>&#32;[0]&#32;&amp;&amp;&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a9dc2230af982027edd82f9952a1267a6">bones</link>&#32;[1])&#32;{
00201 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;jointRotation&#32;=&#32;Quaternion.Inverse&#32;(<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a1d84c11cb9e8a1096225718bcd759ceb">GetBoneRotation</link>&#32;(0))&#32;*&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a1d84c11cb9e8a1096225718bcd759ceb">GetBoneRotation</link>&#32;(1);
00202 &#32;&#32;&#32;&#32;&#32;&#32;}
00203 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Spread&#32;is&#32;a&#32;rotation&#32;around&#32;the&#32;Y&#32;axis&#32;of&#32;the&#32;base&#32;bone&#32;when&#32;joint_type&#32;=&#32;0</emphasis>
00204 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;spreadAngle&#32;=&#32;0f;
00205 &#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_leap_1_1_finger">Finger</link>.<link linkend="_class_leap_1_1_finger_1ae75e8d46a01aff0bd5c6d6fb99e2f2ba">FingerType</link>&#32;fType&#32;=&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a21c5f56f4dd6fba09212d1738811eecb">fingerType</link>;
00206 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a8b4b5c124b754ee09e0b032618f7e666">finger_</link>&#32;!=&#32;<emphasis role="keyword">null</emphasis>)&#32;{
00207 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a21c5f56f4dd6fba09212d1738811eecb">fingerType</link>&#32;=&#32;<link linkend="_class_leap_1_1_unity_1_1_finger_model_1a8b4b5c124b754ee09e0b032618f7e666">finger_</link>.<link linkend="_class_leap_1_1_finger_1a86fc4ed5138e26ac07ec0885f3627126">Type</link>;
00208 &#32;&#32;&#32;&#32;&#32;&#32;}
00209 
00210 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(fType&#32;==&#32;<link linkend="_class_leap_1_1_finger">Finger</link>.<link linkend="_class_leap_1_1_finger_1ae75e8d46a01aff0bd5c6d6fb99e2f2ba">FingerType</link>.TYPE_INDEX&#32;||
00211 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;fType&#32;==&#32;<link linkend="_class_leap_1_1_finger">Finger</link>.<link linkend="_class_leap_1_1_finger_1ae75e8d46a01aff0bd5c6d6fb99e2f2ba">FingerType</link>.TYPE_MIDDLE)&#32;{
00212 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;spreadAngle&#32;=&#32;jointRotation.eulerAngles.y;
00213 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(spreadAngle&#32;&gt;&#32;180f)&#32;{
00214 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;spreadAngle&#32;-=&#32;360f;
00215 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00216 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;NOTE:&#32;eulerAngles&#32;range&#32;is&#32;[0,&#32;360)&#32;so&#32;spreadAngle&#32;&lt;=&#32;-180f&#32;will&#32;not&#32;occur.</emphasis>
00217 &#32;&#32;&#32;&#32;&#32;&#32;}
00218 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(fType&#32;==&#32;<link linkend="_class_leap_1_1_finger">Finger</link>.<link linkend="_class_leap_1_1_finger_1ae75e8d46a01aff0bd5c6d6fb99e2f2ba">FingerType</link>.TYPE_THUMB&#32;||
00219 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;fType&#32;==&#32;<link linkend="_class_leap_1_1_finger">Finger</link>.<link linkend="_class_leap_1_1_finger_1ae75e8d46a01aff0bd5c6d6fb99e2f2ba">FingerType</link>.TYPE_RING&#32;||
00220 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;fType&#32;==&#32;<link linkend="_class_leap_1_1_finger">Finger</link>.<link linkend="_class_leap_1_1_finger_1ae75e8d46a01aff0bd5c6d6fb99e2f2ba">FingerType</link>.TYPE_PINKY)&#32;{
00221 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;spreadAngle&#32;=&#32;-jointRotation.eulerAngles.y;
00222 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(spreadAngle&#32;&lt;=&#32;-180f)&#32;{
00223 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;spreadAngle&#32;+=&#32;360f;
00224 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00225 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;NOTE:&#32;eulerAngles&#32;range&#32;is&#32;[0,&#32;360)&#32;so&#32;spreadAngle&#32;&gt;&#32;+180f&#32;will&#32;not&#32;occur.</emphasis>
00226 &#32;&#32;&#32;&#32;&#32;&#32;}
00227 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;spreadAngle;
00228 &#32;&#32;&#32;&#32;}
00229 &#32;&#32;}
00230 }
</programlisting></section>
