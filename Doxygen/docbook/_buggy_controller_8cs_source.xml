<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="__buggy_controller_8cs_source">
<title>BuggyController.cs</title>
<indexterm><primary>O:/GitHUBMINIPRoject/Assets/SteamVR/InteractionSystem/Samples/BuggyBuddy/BuggyController.cs</primary></indexterm>
<programlisting>00001 <emphasis role="keyword">using</emphasis>&#32;System.Collections;
00002 <emphasis role="keyword">using</emphasis>&#32;System.Collections.Generic;
00003 <emphasis role="keyword">using</emphasis>&#32;<link linkend="__balloon_8cs_1a7d67e097df9376eb709b6a23aa3c7d23">UnityEngine</link>;
00004 <emphasis role="keyword">using</emphasis>&#32;<link linkend="_namespace_unity_engine">UnityEngine</link>.UI;
00005 <emphasis role="keyword">using</emphasis>&#32;<link linkend="_namespace_valve">Valve</link>.<link linkend="_namespace_valve_1_1_v_r">VR</link>;
00006 <emphasis role="keyword">using</emphasis>&#32;<link linkend="_namespace_valve">Valve</link>.<link linkend="_namespace_valve_1_1_v_r">VR</link>.<link linkend="_namespace_valve_1_1_v_r_1_1_interaction_system">InteractionSystem</link>;
00007 
00008 <emphasis role="keyword">namespace&#32;</emphasis><link linkend="_namespace_valve_1_1_v_r_1_1_interaction_system_1_1_sample">Valve.VR.InteractionSystem.Sample</link>
00009 {
<anchor xml:id="__buggy_controller_8cs_source_1l00010"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller">00010</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">class&#32;</emphasis><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller">BuggyController</link>&#32;:&#32;MonoBehaviour
00011 &#32;&#32;&#32;&#32;{
<anchor xml:id="__buggy_controller_8cs_source_1l00012"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1af1ec6a0276022a6cf4664020c19127b9">00012</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Transform&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1af1ec6a0276022a6cf4664020c19127b9">modelJoystick</link>;
<anchor xml:id="__buggy_controller_8cs_source_1l00013"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a7728269522c6f5d03ea1b21d4be7b318">00013</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a7728269522c6f5d03ea1b21d4be7b318">joystickRot</link>&#32;=&#32;20;
00014 
<anchor xml:id="__buggy_controller_8cs_source_1l00015"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1aceafae1371b75cb2ff9c0f586c9937bf">00015</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Transform&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1aceafae1371b75cb2ff9c0f586c9937bf">modelTrigger</link>;
<anchor xml:id="__buggy_controller_8cs_source_1l00016"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1af8b002620d24897981219ec124e1e53c">00016</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1af8b002620d24897981219ec124e1e53c">triggerRot</link>&#32;=&#32;20;
00017 
<anchor xml:id="__buggy_controller_8cs_source_1l00018"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a5a7afebe152731fd373fb88e71cc0cb0">00018</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy">BuggyBuddy</link>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a5a7afebe152731fd373fb88e71cc0cb0">buggy</link>;
00019 
<anchor xml:id="__buggy_controller_8cs_source_1l00020"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a02a9888e9e560a0a66080faab3352104">00020</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Transform&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a02a9888e9e560a0a66080faab3352104">buttonBrake</link>;
<anchor xml:id="__buggy_controller_8cs_source_1l00021"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a10919ba84e3335fcdf8c8264e1643f59">00021</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Transform&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a10919ba84e3335fcdf8c8264e1643f59">buttonReset</link>;
00022 
00023 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//ui&#32;stuff</emphasis>
00024 
<anchor xml:id="__buggy_controller_8cs_source_1l00025"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a569fac04c78b3bb0fe565ebae17df839">00025</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Canvas&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a569fac04c78b3bb0fe565ebae17df839">ui_Canvas</link>;
<anchor xml:id="__buggy_controller_8cs_source_1l00026"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a3239004a0df226282b67a808833d84f9">00026</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Image&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a3239004a0df226282b67a808833d84f9">ui_rpm</link>;
<anchor xml:id="__buggy_controller_8cs_source_1l00027"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1acf02ca7de5d35470a99f80eeeab7fefc">00027</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Image&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1acf02ca7de5d35470a99f80eeeab7fefc">ui_speed</link>;
<anchor xml:id="__buggy_controller_8cs_source_1l00028"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1af06d437a6e1c108b0bd4663e2d45e502">00028</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;RectTransform&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1af06d437a6e1c108b0bd4663e2d45e502">ui_steer</link>;
00029 
<anchor xml:id="__buggy_controller_8cs_source_1l00030"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a22b2114d1694109100336d54904d69bd">00030</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a22b2114d1694109100336d54904d69bd">ui_steerangle</link>;
00031 
<anchor xml:id="__buggy_controller_8cs_source_1l00032"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1ac83307b2aeb34b48c578c3a1f2069bde">00032</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Vector2&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1ac83307b2aeb34b48c578c3a1f2069bde">ui_fillAngles</link>;
00033 
<anchor xml:id="__buggy_controller_8cs_source_1l00034"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a4cfaa5bf43f79a5d77e29f1fa7b66bda">00034</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Transform&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a4cfaa5bf43f79a5d77e29f1fa7b66bda">resetToPoint</link>;
00035 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="__buggy_controller_8cs_source_1l00036"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a14732cd93ca09edee2bf7528eadcd576">00036</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___vector2">SteamVR_Action_Vector2</link>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a14732cd93ca09edee2bf7528eadcd576">actionSteering</link>&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___input">SteamVR_Input</link>.GetAction&lt;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___vector2">SteamVR_Action_Vector2</link>&gt;(<emphasis role="stringliteral">&quot;buggy&quot;</emphasis>,&#32;<emphasis role="stringliteral">&quot;Steering&quot;</emphasis>);
00037 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="__buggy_controller_8cs_source_1l00038"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1aafc93db769ee5b46c15239da08b2a505">00038</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___single">SteamVR_Action_Single</link>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1aafc93db769ee5b46c15239da08b2a505">actionThrottle</link>&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___input">SteamVR_Input</link>.GetAction&lt;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___single">SteamVR_Action_Single</link>&gt;(<emphasis role="stringliteral">&quot;buggy&quot;</emphasis>,&#32;<emphasis role="stringliteral">&quot;Throttle&quot;</emphasis>);
00039 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="__buggy_controller_8cs_source_1l00040"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a539e89906869180eb98c7e048f9886db">00040</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___boolean">SteamVR_Action_Boolean</link>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a539e89906869180eb98c7e048f9886db">actionBrake</link>&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___input">SteamVR_Input</link>.GetAction&lt;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___boolean">SteamVR_Action_Boolean</link>&gt;(<emphasis role="stringliteral">&quot;buggy&quot;</emphasis>,&#32;<emphasis role="stringliteral">&quot;Brake&quot;</emphasis>);
00041 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="__buggy_controller_8cs_source_1l00042"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1ac62dfc63df769ac36dca75d2b1b032c8">00042</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___boolean">SteamVR_Action_Boolean</link>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1ac62dfc63df769ac36dca75d2b1b032c8">actionReset</link>&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___input">SteamVR_Input</link>.GetAction&lt;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___boolean">SteamVR_Action_Boolean</link>&gt;(<emphasis role="stringliteral">&quot;buggy&quot;</emphasis>,&#32;<emphasis role="stringliteral">&quot;Reset&quot;</emphasis>);
00043 
00044 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;usteer;
00045 
00046 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_interactable">Interactable</link>&#32;interactable;
00047 
00048 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;Quaternion&#32;trigSRot;
00049 
00050 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;Quaternion&#32;joySRot;
00051 
00052 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;Coroutine&#32;resettingRoutine;
00053 
00054 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;Vector3&#32;initialScale;
00055 
00056 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;Start()
00057 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00058 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;joySRot&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1af1ec6a0276022a6cf4664020c19127b9">modelJoystick</link>.localRotation;
00059 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;trigSRot&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1aceafae1371b75cb2ff9c0f586c9937bf">modelTrigger</link>.localRotation;
00060 
00061 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;interactable&#32;=&#32;GetComponent&lt;Interactable&gt;();
00062 
00063 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;StartCoroutine(DoBuzz());
00064 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a5a7afebe152731fd373fb88e71cc0cb0">buggy</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1af2a926d91b091dc8ea3fc82265759508">controllerReference</link>&#32;=&#32;transform;
00065 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;initialScale&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a5a7afebe152731fd373fb88e71cc0cb0">buggy</link>.transform.localScale;
00066 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00067 
00068 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;Update()
00069 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00070 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector2&#32;steer&#32;=&#32;Vector2.zero;
00071 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;throttle&#32;=&#32;0;
00072 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;brake&#32;=&#32;0;
00073 
00074 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">bool</emphasis>&#32;reset&#32;=&#32;<emphasis role="keyword">false</emphasis>;
00075 
00076 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">bool</emphasis>&#32;b_brake&#32;=&#32;<emphasis role="keyword">false</emphasis>;
00077 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">bool</emphasis>&#32;b_reset&#32;=&#32;<emphasis role="keyword">false</emphasis>;
00078 
00079 
00080 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(interactable.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_interactable_1a1980377b09ca72c574f045e7d6aac17f">attachedToHand</link>)
00081 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00082 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_namespace_valve_1_1_v_r_1a82e5bf501cc3aa155444ee3f0662853f">SteamVR_Input_Sources</link>&#32;hand&#32;=&#32;interactable.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_interactable_1a1980377b09ca72c574f045e7d6aac17f">attachedToHand</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_hand_1a05520135148fd74ca10b8549d5c7354d">handType</link>;
00083 
00084 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;steer&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a14732cd93ca09edee2bf7528eadcd576">actionSteering</link>.<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___vector2_1a9313e35bdbdfc18a161484bdd0c8239b">GetAxis</link>(hand);
00085 
00086 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;throttle&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1aafc93db769ee5b46c15239da08b2a505">actionThrottle</link>.<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___single_1a3b78812c9a7bea43b8d64440d5f4b339">GetAxis</link>(hand);
00087 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;b_brake&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a539e89906869180eb98c7e048f9886db">actionBrake</link>.<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___boolean_1a189859c4e3670a461d15e63e9fca059b">GetState</link>(hand);
00088 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;b_reset&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1ac62dfc63df769ac36dca75d2b1b032c8">actionReset</link>.<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___boolean_1a189859c4e3670a461d15e63e9fca059b">GetState</link>(hand);
00089 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;brake&#32;=&#32;b_brake&#32;?&#32;1&#32;:&#32;0;
00090 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;reset&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1ac62dfc63df769ac36dca75d2b1b032c8">actionReset</link>.<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___boolean_1aa0a7eb5f7e02e35fd6922dd30b087f77">GetStateDown</link>(hand);
00091 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00092 
00093 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(reset&#32;&amp;&amp;&#32;resettingRoutine&#32;==&#32;<emphasis role="keyword">null</emphasis>)
00094 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00095 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;resettingRoutine&#32;=&#32;StartCoroutine(DoReset());
00096 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00097 
00098 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a569fac04c78b3bb0fe565ebae17df839">ui_Canvas</link>&#32;!=&#32;<emphasis role="keyword">null</emphasis>)
00099 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00100 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a569fac04c78b3bb0fe565ebae17df839">ui_Canvas</link>.gameObject.SetActive(interactable.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_interactable_1a1980377b09ca72c574f045e7d6aac17f">attachedToHand</link>);
00101 
00102 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;usteer&#32;=&#32;Mathf.Lerp(usteer,&#32;steer.x,&#32;Time.deltaTime&#32;*&#32;9);
00103 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1af06d437a6e1c108b0bd4663e2d45e502">ui_steer</link>.localEulerAngles&#32;=&#32;Vector3.forward&#32;*&#32;usteer&#32;*&#32;-<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a22b2114d1694109100336d54904d69bd">ui_steerangle</link>;
00104 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a3239004a0df226282b67a808833d84f9">ui_rpm</link>.fillAmount&#32;=&#32;Mathf.Lerp(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a3239004a0df226282b67a808833d84f9">ui_rpm</link>.fillAmount,&#32;Mathf.Lerp(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1ac83307b2aeb34b48c578c3a1f2069bde">ui_fillAngles</link>.x,&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1ac83307b2aeb34b48c578c3a1f2069bde">ui_fillAngles</link>.y,&#32;throttle),&#32;Time.deltaTime&#32;*&#32;4);
00105 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;speedLim&#32;=&#32;40;
00106 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1acf02ca7de5d35470a99f80eeeab7fefc">ui_speed</link>.fillAmount&#32;=&#32;Mathf.Lerp(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1ac83307b2aeb34b48c578c3a1f2069bde">ui_fillAngles</link>.x,&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1ac83307b2aeb34b48c578c3a1f2069bde">ui_fillAngles</link>.y,&#32;1&#32;-&#32;(Mathf.Exp(-<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a5a7afebe152731fd373fb88e71cc0cb0">buggy</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a1c596116b13719bdc07db566a001215c">speed</link>&#32;/&#32;speedLim)));
00107 
00108 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00109 
00110 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1af1ec6a0276022a6cf4664020c19127b9">modelJoystick</link>.localRotation&#32;=&#32;joySRot;
00111 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">/*if&#32;(input.AttachedHand&#32;!=&#32;null&#32;&amp;&amp;&#32;input.AttachedHand.IsLeft)</emphasis>
00112 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{</emphasis>
00113 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Joystick.Rotate(steer.y&#32;*&#32;-joystickRot,&#32;steer.x&#32;*&#32;-joystickRot,&#32;0,&#32;Space.Self);</emphasis>
00114 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}</emphasis>
00115 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;else&#32;if&#32;(input.AttachedHand&#32;!=&#32;null&#32;&amp;&amp;&#32;input.AttachedHand.IsRight)</emphasis>
00116 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{</emphasis>
00117 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Joystick.Rotate(steer.y&#32;*&#32;-joystickRot,&#32;steer.x&#32;*&#32;joystickRot,&#32;0,&#32;Space.Self);</emphasis>
00118 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}</emphasis>
00119 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;else*/</emphasis>
00120 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//{</emphasis>
00121 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1af1ec6a0276022a6cf4664020c19127b9">modelJoystick</link>.Rotate(steer.y&#32;*&#32;-<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a7728269522c6f5d03ea1b21d4be7b318">joystickRot</link>,&#32;steer.x&#32;*&#32;-<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a7728269522c6f5d03ea1b21d4be7b318">joystickRot</link>,&#32;0,&#32;Space.Self);
00122 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//}</emphasis>
00123 
00124 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1aceafae1371b75cb2ff9c0f586c9937bf">modelTrigger</link>.localRotation&#32;=&#32;trigSRot;
00125 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1aceafae1371b75cb2ff9c0f586c9937bf">modelTrigger</link>.Rotate(throttle&#32;*&#32;-<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1af8b002620d24897981219ec124e1e53c">triggerRot</link>,&#32;0,&#32;0,&#32;Space.Self);
00126 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a02a9888e9e560a0a66080faab3352104">buttonBrake</link>.localScale&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;Vector3(1,&#32;1,&#32;b_brake&#32;?&#32;0.4f&#32;:&#32;1.0f);
00127 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a10919ba84e3335fcdf8c8264e1643f59">buttonReset</link>.localScale&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;Vector3(1,&#32;1,&#32;b_reset&#32;?&#32;0.4f&#32;:&#32;1.0f);
00128 
00129 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a5a7afebe152731fd373fb88e71cc0cb0">buggy</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1acb6eb75ef41b673e8471dfad4c12118c">steer</link>&#32;=&#32;steer;
00130 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a5a7afebe152731fd373fb88e71cc0cb0">buggy</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1af99c456400cf91319b7df00fc0d6c471">throttle</link>&#32;=&#32;throttle;
00131 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a5a7afebe152731fd373fb88e71cc0cb0">buggy</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1a08472779ed4ea518ea22bfe0f3db9f86">handBrake</link>&#32;=&#32;brake;
00132 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a5a7afebe152731fd373fb88e71cc0cb0">buggy</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1af2a926d91b091dc8ea3fc82265759508">controllerReference</link>&#32;=&#32;transform;
00133 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00134 
00135 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;IEnumerator&#32;DoReset()
00136 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00137 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;startTime&#32;=&#32;Time.time;
00138 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;overTime&#32;=&#32;1f;
00139 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;endTime&#32;=&#32;startTime&#32;+&#32;overTime;
00140 
00141 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a5a7afebe152731fd373fb88e71cc0cb0">buggy</link>.transform.position&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a4cfaa5bf43f79a5d77e29f1fa7b66bda">resetToPoint</link>.transform.position;
00142 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a5a7afebe152731fd373fb88e71cc0cb0">buggy</link>.transform.rotation&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a4cfaa5bf43f79a5d77e29f1fa7b66bda">resetToPoint</link>.transform.rotation;
00143 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a5a7afebe152731fd373fb88e71cc0cb0">buggy</link>.transform.localScale&#32;=&#32;initialScale&#32;*&#32;0.1f;
00144 
00145 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">while</emphasis>&#32;(Time.time&#32;&lt;&#32;endTime)
00146 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00147 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a5a7afebe152731fd373fb88e71cc0cb0">buggy</link>.transform.localScale&#32;=&#32;Vector3.Lerp(<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a5a7afebe152731fd373fb88e71cc0cb0">buggy</link>.transform.localScale,&#32;initialScale,&#32;Time.deltaTime&#32;*&#32;5f);
00148 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;yield&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">null</emphasis>;
00149 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00150 
00151 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a5a7afebe152731fd373fb88e71cc0cb0">buggy</link>.transform.localScale&#32;=&#32;initialScale;
00152 
00153 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;resettingRoutine&#32;=&#32;<emphasis role="keyword">null</emphasis>;
00154 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00155 
00156 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;buzztimer;
00157 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;IEnumerator&#32;DoBuzz()
00158 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00159 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">while</emphasis>&#32;(<emphasis role="keyword">true</emphasis>)
00160 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00161 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">while</emphasis>&#32;(buzztimer&#32;&lt;&#32;1)
00162 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00163 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;buzztimer&#32;+=&#32;Time.deltaTime&#32;*&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a5a7afebe152731fd373fb88e71cc0cb0">buggy</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1afc749672df5295276319d0fd8b798ab8">mvol</link>&#32;*&#32;70;
00164 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;yield&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">null</emphasis>;
00165 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00166 
00167 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;buzztimer&#32;=&#32;0;
00168 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(interactable.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_interactable_1a1980377b09ca72c574f045e7d6aac17f">attachedToHand</link>)
00169 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00170 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;interactable.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_interactable_1a1980377b09ca72c574f045e7d6aac17f">attachedToHand</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_hand_1ab9e8c722bbad5cb37f0268f4c1745118">TriggerHapticPulse</link>((ushort)Mathf.RoundToInt(300&#32;*&#32;Mathf.Lerp(1.0f,&#32;0.6f,&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_controller_1a5a7afebe152731fd373fb88e71cc0cb0">buggy</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_buggy_buddy_1afc749672df5295276319d0fd8b798ab8">mvol</link>)));
00171 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00172 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00173 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00174 &#32;&#32;&#32;&#32;}
00175 }
</programlisting></section>
