<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="__joe_jeff_controller_8cs_source">
<title>JoeJeffController.cs</title>
<indexterm><primary>O:/GitHUBMINIPRoject/Assets/SteamVR/InteractionSystem/Samples/JoeJeff/JoeJeffController.cs</primary></indexterm>
<programlisting>00001 <emphasis role="keyword">using</emphasis>&#32;<link linkend="__balloon_8cs_1a7d67e097df9376eb709b6a23aa3c7d23">UnityEngine</link>;
00002 <emphasis role="keyword">using</emphasis>&#32;System.Collections;
00003 <emphasis role="keyword">using</emphasis>&#32;<link linkend="_namespace_valve">Valve</link>.<link linkend="_namespace_valve_1_1_v_r">VR</link>;
00004 <emphasis role="keyword">using</emphasis>&#32;<link linkend="_namespace_valve">Valve</link>.<link linkend="_namespace_valve_1_1_v_r">VR</link>.<link linkend="_namespace_valve_1_1_v_r_1_1_interaction_system">InteractionSystem</link>;
00005 
00006 <emphasis role="keyword">namespace&#32;</emphasis><link linkend="_namespace_valve_1_1_v_r_1_1_interaction_system_1_1_sample">Valve.VR.InteractionSystem.Sample</link>
00007 {
<anchor xml:id="__joe_jeff_controller_8cs_source_1l00008"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_joe_jeff_controller">00008</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">class&#32;</emphasis><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_joe_jeff_controller">JoeJeffController</link>&#32;:&#32;MonoBehaviour
00009 &#32;&#32;&#32;&#32;{
<anchor xml:id="__joe_jeff_controller_8cs_source_1l00010"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_joe_jeff_controller_1a911845c3c18b29b6260d495a5ad7dedd">00010</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Transform&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_joe_jeff_controller_1a911845c3c18b29b6260d495a5ad7dedd">Joystick</link>;
<anchor xml:id="__joe_jeff_controller_8cs_source_1l00011"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_joe_jeff_controller_1a12dab2d9932d42ad0983aceda2f77715">00011</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_joe_jeff_controller_1a12dab2d9932d42ad0983aceda2f77715">joyMove</link>&#32;=&#32;0.1f;
00012 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="__joe_jeff_controller_8cs_source_1l00013"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_joe_jeff_controller_1a34bb846e7157ea3e272f8b5bd46fc106">00013</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___vector2">SteamVR_Action_Vector2</link>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_joe_jeff_controller_1a34bb846e7157ea3e272f8b5bd46fc106">moveAction</link>&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___input">SteamVR_Input</link>.GetAction&lt;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___vector2">SteamVR_Action_Vector2</link>&gt;(<emphasis role="stringliteral">&quot;platformer&quot;</emphasis>,&#32;<emphasis role="stringliteral">&quot;Move&quot;</emphasis>);
<anchor xml:id="__joe_jeff_controller_8cs_source_1l00014"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_joe_jeff_controller_1a0491fc5948c9f9a3d86f664b532feee7">00014</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___boolean">SteamVR_Action_Boolean</link>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_joe_jeff_controller_1a0491fc5948c9f9a3d86f664b532feee7">jumpAction</link>&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___input">SteamVR_Input</link>.GetAction&lt;<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___boolean">SteamVR_Action_Boolean</link>&gt;(<emphasis role="stringliteral">&quot;platformer&quot;</emphasis>,&#32;<emphasis role="stringliteral">&quot;Jump&quot;</emphasis>);
00015 
<anchor xml:id="__joe_jeff_controller_8cs_source_1l00016"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_joe_jeff_controller_1a8ace4b4cb2beaeb48648896964a01423">00016</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_joe_jeff">JoeJeff</link>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_joe_jeff_controller_1a8ace4b4cb2beaeb48648896964a01423">character</link>;
00017 
<anchor xml:id="__joe_jeff_controller_8cs_source_1l00018"/><link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_joe_jeff_controller_1ac03beab98ee7c1e3e1522f2f696e4c34">00018</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;Renderer&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_joe_jeff_controller_1ac03beab98ee7c1e3e1522f2f696e4c34">jumpHighlight</link>;
00019 
00020 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;Vector3&#32;movement;
00021 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keywordtype">bool</emphasis>&#32;jump;
00022 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keywordtype">float</emphasis>&#32;glow;
00023 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<link linkend="_namespace_valve_1_1_v_r_1a82e5bf501cc3aa155444ee3f0662853f">SteamVR_Input_Sources</link>&#32;hand;
00024 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_interactable">Interactable</link>&#32;interactable;
00025 
00026 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;Start()
00027 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00028 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;interactable&#32;=&#32;GetComponent&lt;Interactable&gt;();
00029 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00030 
00031 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;Update()
00032 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00033 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(interactable.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_interactable_1a1980377b09ca72c574f045e7d6aac17f">attachedToHand</link>)
00034 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00035 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;hand&#32;=&#32;interactable.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_interactable_1a1980377b09ca72c574f045e7d6aac17f">attachedToHand</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_hand_1a05520135148fd74ca10b8549d5c7354d">handType</link>;
00036 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector2&#32;m&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_joe_jeff_controller_1a34bb846e7157ea3e272f8b5bd46fc106">moveAction</link>[hand].<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___vector2_1afd401d7d248459f2e074dc2b04f4bdc9">axis</link>;
00037 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;movement&#32;=&#32;<emphasis role="keyword">new</emphasis>&#32;Vector3(m.x,&#32;0,&#32;m.y);
00038 
00039 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;jump&#32;=&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_joe_jeff_controller_1a0491fc5948c9f9a3d86f664b532feee7">jumpAction</link>[hand].<link linkend="_class_valve_1_1_v_r_1_1_steam_v_r___action___boolean_1ac7b9134271850b1ff2225d93763d7b55">stateDown</link>;
00040 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;glow&#32;=&#32;Mathf.Lerp(glow,&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_joe_jeff_controller_1a0491fc5948c9f9a3d86f664b532feee7">jumpAction</link>[hand].state&#32;?&#32;1.5f&#32;:&#32;1.0f,&#32;Time.deltaTime&#32;*&#32;20);
00041 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00042 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>
00043 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
00044 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;movement&#32;=&#32;Vector2.zero;
00045 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;jump&#32;=&#32;<emphasis role="keyword">false</emphasis>;
00046 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;glow&#32;=&#32;0;
00047 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00048 
00049 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_joe_jeff_controller_1a911845c3c18b29b6260d495a5ad7dedd">Joystick</link>.localPosition&#32;=&#32;movement&#32;*&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_joe_jeff_controller_1a12dab2d9932d42ad0983aceda2f77715">joyMove</link>;
00050 
00051 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;rot&#32;=&#32;transform.eulerAngles.y;
00052 
00053 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;movement&#32;=&#32;Quaternion.AngleAxis(rot,&#32;Vector3.up)&#32;*&#32;movement;
00054 
00055 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_joe_jeff_controller_1ac03beab98ee7c1e3e1522f2f696e4c34">jumpHighlight</link>.sharedMaterial.SetColor(<emphasis role="stringliteral">&quot;_EmissionColor&quot;</emphasis>,&#32;Color.white&#32;*&#32;glow);
00056 
00057 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_joe_jeff_controller_1a8ace4b4cb2beaeb48648896964a01423">character</link>.<link linkend="_class_valve_1_1_v_r_1_1_interaction_system_1_1_sample_1_1_joe_jeff_1aa4082021140313e24d77e4070f8fd3ad">Move</link>(movement&#32;*&#32;2,&#32;jump);
00058 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
00059 &#32;&#32;&#32;&#32;}
00060 }
</programlisting></section>
