<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="__transform_translation_handle_8cs_source">
<title>TransformTranslationHandle.cs</title>
<indexterm><primary>O:/GitHUBMINIPRoject/Assets/LeapMotion/Modules/InteractionEngine/Examples/3. Interaction Callbacks/Scripts/TransformTranslationHandle.cs</primary></indexterm>
<programlisting>00001 <emphasis role="comment">/******************************************************************************</emphasis>
00002 <emphasis role="comment">&#32;*&#32;Copyright&#32;(C)&#32;Leap&#32;Motion,&#32;Inc.&#32;2011-2018.&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;*</emphasis>
00003 <emphasis role="comment">&#32;*&#32;Leap&#32;Motion&#32;proprietary&#32;and&#32;confidential.&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;*</emphasis>
00004 <emphasis role="comment">&#32;*&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;*</emphasis>
00005 <emphasis role="comment">&#32;*&#32;Use&#32;subject&#32;to&#32;the&#32;terms&#32;of&#32;the&#32;Leap&#32;Motion&#32;SDK&#32;Agreement&#32;available&#32;at&#32;&#32;&#32;&#32;&#32;*</emphasis>
00006 <emphasis role="comment">&#32;*&#32;https://developer.leapmotion.com/sdk_agreement,&#32;or&#32;another&#32;agreement&#32;&#32;&#32;&#32;&#32;&#32;&#32;*</emphasis>
00007 <emphasis role="comment">&#32;*&#32;between&#32;Leap&#32;Motion&#32;and&#32;you,&#32;your&#32;company&#32;or&#32;other&#32;organization.&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;*</emphasis>
00008 <emphasis role="comment">&#32;******************************************************************************/</emphasis>
00009 
00010 <emphasis role="keyword">using</emphasis>&#32;<link linkend="_namespace_leap">Leap</link>.<link linkend="_namespace_leap_1_1_unity">Unity</link>.<link linkend="_namespace_leap_1_1_unity_1_1_interaction">Interaction</link>;
00011 <emphasis role="keyword">using</emphasis>&#32;System.Collections;
00012 <emphasis role="keyword">using</emphasis>&#32;System.Collections.Generic;
00013 <emphasis role="keyword">using</emphasis>&#32;<link linkend="__balloon_8cs_1a7d67e097df9376eb709b6a23aa3c7d23">UnityEngine</link>;
00014 
00015 <emphasis role="keyword">namespace&#32;</emphasis><link linkend="_namespace_leap_1_1_unity_1_1_examples">Leap.Unity.Examples</link>&#32;{
00016 
<anchor xml:id="__transform_translation_handle_8cs_source_1l00017"/><link linkend="_namespace_leap_1_1_unity_1_1_examples_1a76ed01cc0aaa8ede4fc75e38919a60a5">00017</link> &#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">enum</emphasis>&#32;<link linkend="_namespace_leap_1_1_unity_1_1_examples_1a76ed01cc0aaa8ede4fc75e38919a60a5">TranslationAxis</link>&#32;{&#32;<link linkend="_namespace_leap_1_1_unity_1_1_examples_1a76ed01cc0aaa8ede4fc75e38919a60a5a02129bb861061d1a052c592e2dc6b383">X</link>,&#32;<link linkend="_namespace_leap_1_1_unity_1_1_examples_1a76ed01cc0aaa8ede4fc75e38919a60a5a57cec4137b614c87cb4e24a3d003a3e0">Y</link>,&#32;<link linkend="_namespace_leap_1_1_unity_1_1_examples_1a76ed01cc0aaa8ede4fc75e38919a60a5a21c2e59531c8710156d34a3c30ac81d5">Z</link>&#32;}
00018 
00019 &#32;&#32;[AddComponentMenu(<emphasis role="stringliteral">&quot;&quot;</emphasis>)]
<anchor xml:id="__transform_translation_handle_8cs_source_1l00020"/><link linkend="_class_leap_1_1_unity_1_1_examples_1_1_transform_translation_handle">00020</link> &#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<emphasis role="keyword">class&#32;</emphasis><link linkend="_class_leap_1_1_unity_1_1_examples_1_1_transform_translation_handle">TransformTranslationHandle</link>&#32;:&#32;<link linkend="_class_leap_1_1_unity_1_1_examples_1_1_transform_handle">TransformHandle</link>&#32;{
00021 
<anchor xml:id="__transform_translation_handle_8cs_source_1l00022"/><link linkend="_class_leap_1_1_unity_1_1_examples_1_1_transform_translation_handle_1a12667312bb2935f407f0267fcea4384e">00022</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_namespace_leap_1_1_unity_1_1_examples_1a76ed01cc0aaa8ede4fc75e38919a60a5">TranslationAxis</link>&#32;<link linkend="_class_leap_1_1_unity_1_1_examples_1_1_transform_translation_handle_1a12667312bb2935f407f0267fcea4384e">axis</link>;
00023 
<anchor xml:id="__transform_translation_handle_8cs_source_1l00024"/><link linkend="_class_leap_1_1_unity_1_1_examples_1_1_transform_translation_handle_1af127ad72e9df2429fab712a75b16e115">00024</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">protected</emphasis>&#32;<emphasis role="keyword">override</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_leap_1_1_unity_1_1_examples_1_1_transform_translation_handle_1af127ad72e9df2429fab712a75b16e115">Start</link>()&#32;{
00025 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Populates&#32;_intObj&#32;with&#32;the&#32;InteractionBehaviour,&#32;and&#32;_tool&#32;with&#32;the</emphasis>
00026 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;TransformTool.</emphasis>
00027 &#32;&#32;&#32;&#32;&#32;&#32;base.Start();
00028 
00029 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Subscribe&#32;to&#32;OnGraspedMovement;&#32;all&#32;of&#32;the&#32;logic&#32;will&#32;happen&#32;when&#32;the&#32;handle&#32;is</emphasis>
00030 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;moved&#32;via&#32;grasping.</emphasis>
00031 &#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_leap_1_1_unity_1_1_examples_1_1_transform_handle_1a4d4e476a89c1c3382524ef991fac85e7">_intObj</link>.<link linkend="_class_leap_1_1_unity_1_1_interaction_1_1_interaction_behaviour_1aac5b0f2f21a26369d70314363e18af3f">OnGraspedMovement</link>&#32;+=&#32;onGraspedMovement;
00032 &#32;&#32;&#32;&#32;}
00033 
00034 &#32;&#32;&#32;&#32;<emphasis role="keyword">private</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;onGraspedMovement(Vector3&#32;presolvePos,&#32;Quaternion&#32;presolveRot,
00035 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;solvedPos,&#32;Quaternion&#32;solvedRot,
00036 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;List&lt;InteractionController&gt;&#32;controllers)&#32;{
00037 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">/*&#32;</emphasis>
00038 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;*&#32;OnGraspedMovement&#32;provides&#32;the&#32;position&#32;and&#32;rotation&#32;of&#32;the&#32;Interaction&#32;object</emphasis>
00039 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;*&#32;before&#32;and&#32;after&#32;it&#32;was&#32;moved&#32;by&#32;its&#32;grasping&#32;hand.&#32;This&#32;callback&#32;only&#32;occurs</emphasis>
00040 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;*&#32;when&#32;one&#32;or&#32;more&#32;hands&#32;is&#32;grasping&#32;the&#32;Interaction&#32;object.&#32;In&#32;this&#32;case,&#32;we</emphasis>
00041 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;*&#32;don&apos;t&#32;care&#32;about&#32;how&#32;many&#32;or&#32;which&#32;hands&#32;are&#32;grasping&#32;the&#32;object,&#32;only&#32;where</emphasis>
00042 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;*&#32;the&#32;object&#32;is&#32;moved.</emphasis>
00043 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;*&#32;</emphasis>
00044 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;*&#32;The&#32;Translation&#32;Handle&#32;uses&#32;the&#32;pre-&#32;and&#32;post-solve&#32;movement&#32;information&#32;to</emphasis>
00045 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;*&#32;calculate&#32;how&#32;the&#32;user&#32;is&#32;trying&#32;to&#32;move&#32;the&#32;object&#32;along&#32;this&#32;handle&apos;s&#32;forward</emphasis>
00046 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;*&#32;direction.&#32;Then&#32;the&#32;Translation&#32;Handle&#32;will&#32;simply&#32;override&#32;the&#32;movement&#32;caused</emphasis>
00047 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;*&#32;by&#32;the&#32;grasping&#32;hand&#32;and&#32;reset&#32;itself&#32;back&#32;to&#32;its&#32;original&#32;position.</emphasis>
00048 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;*&#32;</emphasis>
00049 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;*&#32;The&#32;movement&#32;calculated&#32;by&#32;the&#32;Handle&#32;in&#32;this&#32;method&#32;is&#32;reported&#32;to&#32;the&#32;Transform</emphasis>
00050 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;*&#32;Tool,&#32;which&#32;accumulates&#32;movement&#32;caused&#32;by&#32;all&#32;Handles&#32;over&#32;the&#32;course&#32;of&#32;a&#32;frame</emphasis>
00051 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;*&#32;and&#32;then&#32;moves&#32;the&#32;target&#32;object&#32;and&#32;all&#32;of&#32;its&#32;child&#32;Handles&#32;appropriately&#32;at</emphasis>
00052 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;*&#32;the&#32;end&#32;of&#32;the&#32;frame.</emphasis>
00053 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;*/</emphasis>
00054 
00055 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Calculate&#32;the&#32;constrained&#32;movement&#32;of&#32;the&#32;handle&#32;along&#32;its&#32;forward&#32;axis&#32;only.</emphasis>
00056 &#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;deltaPos&#32;=&#32;solvedPos&#32;-&#32;presolvePos;
00057 &#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;handleForwardDirection&#32;=&#32;presolveRot&#32;*&#32;Vector3.forward;
00058 &#32;&#32;&#32;&#32;&#32;&#32;Vector3&#32;deltaAxisPos&#32;=&#32;handleForwardDirection&#32;*&#32;Vector3.Dot(handleForwardDirection,&#32;&#32;deltaPos);
00059 
00060 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Notify&#32;the&#32;tool&#32;about&#32;the&#32;calculated&#32;movement.</emphasis>
00061 &#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_leap_1_1_unity_1_1_examples_1_1_transform_handle_1abe8b50e9b861797f1347cbf9e4f0aa4b">_tool</link>.<link linkend="_class_leap_1_1_unity_1_1_examples_1_1_transform_tool_1a96a30f1c6f857af4f841608a41e5488d">NotifyHandleMovement</link>(deltaAxisPos);
00062 
00063 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;In&#32;this&#32;case,&#32;the&#32;tool&#32;itself&#32;will&#32;accumulate&#32;delta&#32;positions&#32;and&#32;delta&#32;rotations</emphasis>
00064 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;from&#32;all&#32;handles,&#32;and&#32;will&#32;then&#32;synchronize&#32;handles&#32;to&#32;the&#32;appropriate&#32;positions&#32;and</emphasis>
00065 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;rotations&#32;at&#32;the&#32;end&#32;of&#32;the&#32;frame.</emphasis>
00066 
00067 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Because&#32;the&#32;Tool&#32;will&#32;be&#32;the&#32;one&#32;to&#32;actually&#32;move&#32;this&#32;Handle,&#32;all&#32;we&#32;have&#32;left&#32;to&#32;do</emphasis>
00068 &#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;is&#32;to&#32;undo&#32;all&#32;of&#32;the&#32;motion&#32;caused&#32;by&#32;the&#32;grasping&#32;hand.</emphasis>
00069 &#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_leap_1_1_unity_1_1_examples_1_1_transform_handle_1a4d4e476a89c1c3382524ef991fac85e7">_intObj</link>.<link linkend="_class_leap_1_1_unity_1_1_interaction_1_1_interaction_behaviour_1a4f54f1794944882d8cf51bd641a5341c">rigidbody</link>.position&#32;=&#32;presolvePos;
00070 &#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_leap_1_1_unity_1_1_examples_1_1_transform_handle_1a4d4e476a89c1c3382524ef991fac85e7">_intObj</link>.<link linkend="_class_leap_1_1_unity_1_1_interaction_1_1_interaction_behaviour_1a4f54f1794944882d8cf51bd641a5341c">rigidbody</link>.rotation&#32;=&#32;presolveRot;
00071 &#32;&#32;&#32;&#32;}
00072 
00073 &#32;&#32;}
00074 
00075 }
</programlisting></section>
