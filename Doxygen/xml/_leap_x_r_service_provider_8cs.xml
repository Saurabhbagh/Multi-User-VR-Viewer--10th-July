<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.15">
  <compounddef id="_leap_x_r_service_provider_8cs" kind="file" language="C#">
    <compoundname>LeapXRServiceProvider.cs</compoundname>
    <innerclass refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider" prot="public">Leap::Unity::LeapXRServiceProvider</innerclass>
    <innernamespace refid="namespace_leap">Leap</innernamespace>
    <innernamespace refid="namespace_leap_1_1_unity">Leap::Unity</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/******************************************************************************</highlight></codeline>
<codeline lineno="2"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(C)<sp/>Leap<sp/>Motion,<sp/>Inc.<sp/>2011-2018.<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/>*<sp/>Leap<sp/>Motion<sp/>proprietary<sp/>and<sp/>confidential.<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*</highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*</highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/>*<sp/>Use<sp/>subject<sp/>to<sp/>the<sp/>terms<sp/>of<sp/>the<sp/>Leap<sp/>Motion<sp/>SDK<sp/>Agreement<sp/>available<sp/>at<sp/><sp/><sp/><sp/><sp/>*</highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/>*<sp/>https://developer.leapmotion.com/sdk_agreement,<sp/>or<sp/>another<sp/>agreement<sp/><sp/><sp/><sp/><sp/><sp/><sp/>*</highlight></codeline>
<codeline lineno="7"><highlight class="comment"><sp/>*<sp/>between<sp/>Leap<sp/>Motion<sp/>and<sp/>you,<sp/>your<sp/>company<sp/>or<sp/>other<sp/>organization.<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*</highlight></codeline>
<codeline lineno="8"><highlight class="comment"><sp/>******************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/><ref refid="_balloon_8cs_1a7d67e097df9376eb709b6a23aa3c7d23" kindref="member">UnityEngine</ref>;</highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>System;</highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/><ref refid="namespace_leap" kindref="compound">Leap</ref>.<ref refid="namespace_leap_1_1_unity" kindref="compound">Unity</ref>.<ref refid="namespace_leap_1_1_unity_1_1_attributes" kindref="compound">Attributes</ref>;</highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight><highlight class="keyword">namespace<sp/></highlight><highlight class="normal"><ref refid="namespace_leap_1_1_unity" kindref="compound">Leap.Unity</ref><sp/>{</highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight></codeline>
<codeline lineno="22" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider" refkind="compound"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider" kindref="compound">LeapXRServiceProvider</ref><sp/>:<sp/><ref refid="class_leap_1_1_unity_1_1_leap_service_provider" kindref="compound">LeapServiceProvider</ref><sp/>{</highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#region<sp/>Inspector</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Manual<sp/>Device<sp/>Offset</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>DEFAULT_DEVICE_OFFSET_Y_AXIS<sp/>=<sp/>0f;</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>DEFAULT_DEVICE_OFFSET_Z_AXIS<sp/>=<sp/>0.12f;</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>DEFAULT_DEVICE_TILT_X_AXIS<sp/>=<sp/>5f;</highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight></codeline>
<codeline lineno="32" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1afb41f717d7d9f36bbc119f06440b83f6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1afb41f717d7d9f36bbc119f06440b83f6" kindref="member">DeviceOffsetMode</ref><sp/>{</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Default,</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ManualHeadOffset,</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Transform</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/>[Header(</highlight><highlight class="stringliteral">&quot;Advanced&quot;</highlight><highlight class="normal">)]</highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/>[Tooltip(</highlight><highlight class="stringliteral">&quot;Allow<sp/>manual<sp/>adjustment<sp/>of<sp/>the<sp/>Leap<sp/>device&apos;s<sp/>virtual<sp/>offset<sp/>and<sp/>tilt.<sp/>These<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/></highlight><highlight class="stringliteral">&quot;settings<sp/>can<sp/>be<sp/>used<sp/>to<sp/>match<sp/>the<sp/>physical<sp/>position<sp/>and<sp/>orientation<sp/>of<sp/>the<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/></highlight><highlight class="stringliteral">&quot;Leap<sp/>Motion<sp/>sensor<sp/>on<sp/>a<sp/>tracked<sp/>device<sp/>it<sp/>is<sp/>mounted<sp/>on<sp/>(such<sp/>as<sp/>a<sp/>VR<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/></highlight><highlight class="stringliteral">&quot;headset).<sp/><sp/>Temporal<sp/>Warping<sp/>not<sp/>supported<sp/>in<sp/>Transform<sp/>Mode.&quot;</highlight><highlight class="normal">)]</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/>[SerializeField,<sp/>OnEditorChange(</highlight><highlight class="stringliteral">&quot;deviceOffsetMode&quot;</highlight><highlight class="normal">)]</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1afb41f717d7d9f36bbc119f06440b83f6" kindref="member">DeviceOffsetMode</ref><sp/>_deviceOffsetMode;</highlight></codeline>
<codeline lineno="46" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a059badc9c65f387e3bce56259d02c384" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1afb41f717d7d9f36bbc119f06440b83f6" kindref="member">DeviceOffsetMode</ref><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a059badc9c65f387e3bce56259d02c384" kindref="member">deviceOffsetMode</ref><sp/>{</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">get</highlight><highlight class="normal"><sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_deviceOffsetMode;<sp/>}</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">set</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_deviceOffsetMode<sp/>=<sp/>value;</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(_deviceOffsetMode<sp/>==<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1afb41f717d7d9f36bbc119f06440b83f6" kindref="member">DeviceOffsetMode</ref>.Default<sp/>||</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_deviceOffsetMode<sp/>==<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1afb41f717d7d9f36bbc119f06440b83f6" kindref="member">DeviceOffsetMode</ref>.Transform)<sp/>{</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a6c906e4ec5e7775596344ec87fda4681" kindref="member">deviceOffsetYAxis</ref><sp/>=<sp/>DEFAULT_DEVICE_OFFSET_Y_AXIS;</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ab78d04f47fd47ce45f7e5da319e29cee" kindref="member">deviceOffsetZAxis</ref><sp/>=<sp/>DEFAULT_DEVICE_OFFSET_Z_AXIS;</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aabddae01cbb798a7cf340a2e1676e8ed" kindref="member">deviceTiltXAxis</ref><sp/>=<sp/>DEFAULT_DEVICE_TILT_X_AXIS;</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(_deviceOffsetMode<sp/>==<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1afb41f717d7d9f36bbc119f06440b83f6" kindref="member">DeviceOffsetMode</ref>.Transform<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_temporalWarpingMode<sp/>!=<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aa0f64056dec7a8f478070ab21de3247f" kindref="member">TemporalWarpingMode</ref>.Off)<sp/>{</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_temporalWarpingMode<sp/>=<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aa0f64056dec7a8f478070ab21de3247f" kindref="member">TemporalWarpingMode</ref>.Off;</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/>[Tooltip(</highlight><highlight class="stringliteral">&quot;Adjusts<sp/>the<sp/>Leap<sp/>Motion<sp/>device&apos;s<sp/>virtual<sp/>height<sp/>offset<sp/>from<sp/>the<sp/>tracked<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/></highlight><highlight class="stringliteral">&quot;headset<sp/>position.<sp/>This<sp/>should<sp/>match<sp/>the<sp/>vertical<sp/>offset<sp/>of<sp/>the<sp/>physical<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/></highlight><highlight class="stringliteral">&quot;device<sp/>with<sp/>respect<sp/>to<sp/>the<sp/>headset<sp/>in<sp/>meters.&quot;</highlight><highlight class="normal">)]</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/>[SerializeField]</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/>[Range(-0.50F,<sp/>0.50F)]</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>_deviceOffsetYAxis<sp/>=<sp/>DEFAULT_DEVICE_OFFSET_Y_AXIS;</highlight></codeline>
<codeline lineno="69" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a6c906e4ec5e7775596344ec87fda4681" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a6c906e4ec5e7775596344ec87fda4681" kindref="member">deviceOffsetYAxis</ref><sp/>{</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">get</highlight><highlight class="normal"><sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_deviceOffsetYAxis;<sp/>}</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">set</highlight><highlight class="normal"><sp/>{<sp/>_deviceOffsetYAxis<sp/>=<sp/>value;<sp/>}</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="73"><highlight class="normal"></highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/>[Tooltip(</highlight><highlight class="stringliteral">&quot;Adjusts<sp/>the<sp/>Leap<sp/>Motion<sp/>device&apos;s<sp/>virtual<sp/>depth<sp/>offset<sp/>from<sp/>the<sp/>tracked<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/></highlight><highlight class="stringliteral">&quot;headset<sp/>position.<sp/>This<sp/>should<sp/>match<sp/>the<sp/>forward<sp/>offset<sp/>of<sp/>the<sp/>physical<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/></highlight><highlight class="stringliteral">&quot;device<sp/>with<sp/>respect<sp/>to<sp/>the<sp/>headset<sp/>in<sp/>meters.&quot;</highlight><highlight class="normal">)]</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/>[SerializeField]</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/>[Range(-0.50F,<sp/>0.50F)]</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>_deviceOffsetZAxis<sp/>=<sp/>DEFAULT_DEVICE_OFFSET_Z_AXIS;</highlight></codeline>
<codeline lineno="80" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ab78d04f47fd47ce45f7e5da319e29cee" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ab78d04f47fd47ce45f7e5da319e29cee" kindref="member">deviceOffsetZAxis</ref><sp/>{</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">get</highlight><highlight class="normal"><sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_deviceOffsetZAxis;<sp/>}</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">set</highlight><highlight class="normal"><sp/>{<sp/><sp/>_deviceOffsetZAxis<sp/>=<sp/>value;<sp/>}</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="84"><highlight class="normal"></highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/>[Tooltip(</highlight><highlight class="stringliteral">&quot;Adjusts<sp/>the<sp/>Leap<sp/>Motion<sp/>device&apos;s<sp/>virtual<sp/>X<sp/>axis<sp/>tilt.<sp/>This<sp/>should<sp/>match<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/></highlight><highlight class="stringliteral">&quot;the<sp/>tilt<sp/>of<sp/>the<sp/>physical<sp/>device<sp/>with<sp/>respect<sp/>to<sp/>the<sp/>headset<sp/>in<sp/>degrees.&quot;</highlight><highlight class="normal">)]</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/>[SerializeField]</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/>[Range(-90.0F,<sp/>90.0F)]</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>_deviceTiltXAxis<sp/>=<sp/>DEFAULT_DEVICE_TILT_X_AXIS;</highlight></codeline>
<codeline lineno="90" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aabddae01cbb798a7cf340a2e1676e8ed" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aabddae01cbb798a7cf340a2e1676e8ed" kindref="member">deviceTiltXAxis</ref><sp/>{</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">get</highlight><highlight class="normal"><sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_deviceTiltXAxis;<sp/>}</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">set</highlight><highlight class="normal"><sp/>{<sp/>_deviceTiltXAxis<sp/>=<sp/>value;<sp/>}</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="94"><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/>[Tooltip(</highlight><highlight class="stringliteral">&quot;Allows<sp/>for<sp/>the<sp/>manual<sp/>placement<sp/>of<sp/>the<sp/>Leap<sp/>Tracking<sp/>Device.&quot;</highlight><highlight class="normal"><sp/>+</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;This<sp/>device<sp/>offset<sp/>mode<sp/>is<sp/>incompatible<sp/>with<sp/>Temporal<sp/>Warping.&quot;</highlight><highlight class="normal">)]</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/>[SerializeField]</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>Transform<sp/>_deviceOrigin;</highlight></codeline>
<codeline lineno="99" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a5f4a006ae4fbb332ab62796eb060af1e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>Transform<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a5f4a006ae4fbb332ab62796eb060af1e" kindref="member">deviceOrigin</ref><sp/>{</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">get</highlight><highlight class="normal"><sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_deviceOrigin;<sp/>}</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">set</highlight><highlight class="normal"><sp/>{_deviceOrigin<sp/>=<sp/>value;<sp/>}</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="103"><highlight class="normal"></highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Temporal<sp/>Warping</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>UNITY_STANDALONE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>DEFAULT_WARP_ADJUSTMENT<sp/>=<sp/>17;</highlight></codeline>
<codeline lineno="108"><highlight class="normal"></highlight><highlight class="preprocessor">#elif<sp/>UNITY_ANDROID</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>DEFAULT_WARP_ADJUSTMENT<sp/>=<sp/>45;</highlight></codeline>
<codeline lineno="110"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>DEFAULT_WARP_ADJUSTMENT<sp/>=<sp/>17;</highlight></codeline>
<codeline lineno="112"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"></highlight></codeline>
<codeline lineno="114" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aa0f64056dec7a8f478070ab21de3247f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aa0f64056dec7a8f478070ab21de3247f" kindref="member">TemporalWarpingMode</ref><sp/>{</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Auto,</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Manual,</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Images,</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Off</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/>[Tooltip(</highlight><highlight class="stringliteral">&quot;Temporal<sp/>warping<sp/>prevents<sp/>the<sp/>hand<sp/>coordinate<sp/>system<sp/>from<sp/>&apos;swimming&apos;<sp/>or<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/></highlight><highlight class="stringliteral">&quot;&apos;bouncing&apos;<sp/>when<sp/>the<sp/>headset<sp/>moves<sp/>and<sp/>the<sp/>user&apos;s<sp/>hands<sp/>stay<sp/>still.<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/></highlight><highlight class="stringliteral">&quot;This<sp/>phenomenon<sp/>is<sp/>caused<sp/>by<sp/>the<sp/>differing<sp/>amounts<sp/>of<sp/>latencies<sp/>inherent<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/></highlight><highlight class="stringliteral">&quot;in<sp/>the<sp/>two<sp/>systems.<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/></highlight><highlight class="stringliteral">&quot;For<sp/>PC<sp/>VR<sp/>and<sp/>Android<sp/>VR,<sp/>temporal<sp/>warping<sp/>should<sp/>set<sp/>to<sp/>&apos;Auto&apos;,<sp/>as<sp/>the<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/></highlight><highlight class="stringliteral">&quot;correct<sp/>value<sp/>can<sp/>be<sp/>chosen<sp/>automatically<sp/>for<sp/>these<sp/>platforms.<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/></highlight><highlight class="stringliteral">&quot;Some<sp/>non-standard<sp/>platforms<sp/>may<sp/>use<sp/>&apos;Manual&apos;<sp/>mode<sp/>to<sp/>adjust<sp/>their<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/></highlight><highlight class="stringliteral">&quot;latency<sp/>compensation<sp/>amount<sp/>for<sp/>temporal<sp/>warping.<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/></highlight><highlight class="stringliteral">&quot;Use<sp/>&apos;Images&apos;<sp/>for<sp/>scenarios<sp/>that<sp/>overlay<sp/>Leap<sp/>device<sp/>images<sp/>on<sp/>tracked<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/></highlight><highlight class="stringliteral">&quot;hand<sp/>data.&quot;</highlight><highlight class="normal">)]</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/>[SerializeField]</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aa0f64056dec7a8f478070ab21de3247f" kindref="member">TemporalWarpingMode</ref><sp/>_temporalWarpingMode<sp/>=<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aa0f64056dec7a8f478070ab21de3247f" kindref="member">TemporalWarpingMode</ref>.Auto;</highlight></codeline>
<codeline lineno="132"><highlight class="normal"></highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/>[Tooltip(</highlight><highlight class="stringliteral">&quot;The<sp/>time<sp/>in<sp/>milliseconds<sp/>between<sp/>the<sp/>current<sp/>frame&apos;s<sp/>headset<sp/>position<sp/>and<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/></highlight><highlight class="stringliteral">&quot;the<sp/>time<sp/>at<sp/>which<sp/>the<sp/>Leap<sp/>frame<sp/>was<sp/>captured.&quot;</highlight><highlight class="normal">)]</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/>[SerializeField]</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>_customWarpAdjustment<sp/>=<sp/>DEFAULT_WARP_ADJUSTMENT;</highlight></codeline>
<codeline lineno="141" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a668f8752cd2db6f77abbd44e89980b79" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a668f8752cd2db6f77abbd44e89980b79" kindref="member">warpingAdjustment</ref><sp/>{</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">get</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(_temporalWarpingMode<sp/>==<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aa0f64056dec7a8f478070ab21de3247f" kindref="member">TemporalWarpingMode</ref>.Manual)<sp/>{</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_customWarpAdjustment;</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>DEFAULT_WARP_ADJUSTMENT;</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="150"><highlight class="normal"></highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Pre-cull<sp/>Latching</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/>[Tooltip(</highlight><highlight class="stringliteral">&quot;Pass<sp/>updated<sp/>transform<sp/>matrices<sp/>to<sp/>hands<sp/>with<sp/>materials<sp/>that<sp/>utilize<sp/>the<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/></highlight><highlight class="stringliteral">&quot;VertexOffsetShader.<sp/>Won&apos;t<sp/>have<sp/>any<sp/>effect<sp/>on<sp/>hands<sp/>that<sp/>don&apos;t<sp/>take<sp/>into<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/></highlight><highlight class="stringliteral">&quot;account<sp/>shader-global<sp/>vertex<sp/>offsets<sp/>in<sp/>their<sp/>material<sp/>shaders.&quot;</highlight><highlight class="normal">)]</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/>[SerializeField]</highlight></codeline>
<codeline lineno="157" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a5467eed05493c0cf4cc732568596f6eb" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a5467eed05493c0cf4cc732568596f6eb" kindref="member">_updateHandInPrecull</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="158" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ae9458c66f5008c4592c6f94453b0b043" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ae9458c66f5008c4592c6f94453b0b043" kindref="member">updateHandInPrecull</ref><sp/>{</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">get</highlight><highlight class="normal"><sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a5467eed05493c0cf4cc732568596f6eb" kindref="member">_updateHandInPrecull</ref>;<sp/>}</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">set</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a9155994dde86e3946890433bfc536b9a" kindref="member">resetShaderTransforms</ref>();</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a5467eed05493c0cf4cc732568596f6eb" kindref="member">_updateHandInPrecull</ref><sp/>=<sp/>value;</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="165"><highlight class="normal"></highlight></codeline>
<codeline lineno="166"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#endregion</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="167"><highlight class="normal"></highlight></codeline>
<codeline lineno="168"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#region<sp/>Internal<sp/>Memory</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="169"><highlight class="normal"></highlight></codeline>
<codeline lineno="170" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ad28d54cc0444a3ead31ecc3214e58b32" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_transform_history" kindref="compound">TransformHistory</ref><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ad28d54cc0444a3ead31ecc3214e58b32" kindref="member">transformHistory</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_transform_history" kindref="compound">TransformHistory</ref>();</highlight></codeline>
<codeline lineno="171" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ad00d8ff3e04135ec3f23c90bd0a3b4ff" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ad00d8ff3e04135ec3f23c90bd0a3b4ff" kindref="member">manualUpdateHasBeenCalledSinceUpdate</ref>;</highlight></codeline>
<codeline lineno="172" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aa4be13a6f05121d88aded72a447efd8f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/>Vector3<sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aa4be13a6f05121d88aded72a447efd8f" kindref="member">warpedPosition</ref><sp/>=<sp/>Vector3.zero;</highlight></codeline>
<codeline lineno="173" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a2b4417c08a92b9ad2ef8f5dd76248915" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/>Quaternion<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a2b4417c08a92b9ad2ef8f5dd76248915" kindref="member">warpedRotation</ref><sp/>=<sp/>Quaternion.identity;</highlight></codeline>
<codeline lineno="174" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a5b9871acb331833b7f15215adb0d3015" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/>Matrix4x4[]<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a5b9871acb331833b7f15215adb0d3015" kindref="member">_transformArray</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Matrix4x4[2];</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/><ref refid="struct_leap_1_1_unity_1_1_pose" kindref="compound">Pose</ref>?<sp/>_trackingBaseDeltaPose<sp/>=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="176"><highlight class="normal"></highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>Camera<sp/>_cachedCamera;</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>Camera<sp/>cachedCamera<sp/>{</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">get</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(_cachedCamera<sp/>==<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_cachedCamera<sp/>=<sp/>GetComponent&lt;Camera&gt;();</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_cachedCamera;</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="186"><highlight class="normal"></highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/>[NonSerialized]</highlight></codeline>
<codeline lineno="188" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a9b2a2eca314859615f53181b46e09c76" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a9b2a2eca314859615f53181b46e09c76" kindref="member">imageTimeStamp</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="189"><highlight class="normal"></highlight></codeline>
<codeline lineno="190"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#endregion</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="191"><highlight class="normal"></highlight></codeline>
<codeline lineno="192"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#region<sp/>Unity<sp/>Events</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="193"><highlight class="normal"></highlight></codeline>
<codeline lineno="194" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1abe79fe929f415f66f157d108b3f27aa5" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">override</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1abe79fe929f415f66f157d108b3f27aa5" kindref="member">Reset</ref>()<sp/>{</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>base.Reset();</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_provider_1a80150ace9cb1c6681fb2d41792ede8f3" kindref="member">editTimePose</ref><sp/>=<sp/>TestHandFactory.TestHandPose.HeadMountedB;</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="198"><highlight class="normal"></highlight></codeline>
<codeline lineno="199" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a40e506f8ae3cf42b5fb32676049e596e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">virtual</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a40e506f8ae3cf42b5fb32676049e596e" kindref="member">OnValidate</ref>()<sp/>{</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(_deviceOffsetMode<sp/>==<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1afb41f717d7d9f36bbc119f06440b83f6" kindref="member">DeviceOffsetMode</ref>.Transform<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_temporalWarpingMode<sp/>!=<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aa0f64056dec7a8f478070ab21de3247f" kindref="member">TemporalWarpingMode</ref>.Off)<sp/>{</highlight></codeline>
<codeline lineno="202"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>UNITY_EDITOR</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace_unity_editor" kindref="compound">UnityEditor</ref>.Undo.RecordObject(</highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;Disabled<sp/>Temporal<sp/>Warping&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Debug.LogWarning(</highlight><highlight class="stringliteral">&quot;Temporal<sp/>warping<sp/>disabled.<sp/>Temporal<sp/>warping<sp/>cannot<sp/>be<sp/>used<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/></highlight><highlight class="stringliteral">&quot;with<sp/>the<sp/>Transform<sp/>device<sp/>offset<sp/>mode.&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="206"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_temporalWarpingMode<sp/>=<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aa0f64056dec7a8f478070ab21de3247f" kindref="member">TemporalWarpingMode</ref>.Off;</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="210"><highlight class="normal"></highlight></codeline>
<codeline lineno="211" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ad970b245aba38c3c13b9358b91443808" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">virtual</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ad970b245aba38c3c13b9358b91443808" kindref="member">OnEnable</ref>()<sp/>{</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a9155994dde86e3946890433bfc536b9a" kindref="member">resetShaderTransforms</ref>();</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="214"><highlight class="normal"></highlight></codeline>
<codeline lineno="215" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ad9014e823bfcbb99666f23028dd7ff49" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">virtual</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ad9014e823bfcbb99666f23028dd7ff49" kindref="member">OnDisable</ref>()<sp/>{</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a9155994dde86e3946890433bfc536b9a" kindref="member">resetShaderTransforms</ref>();</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="218"><highlight class="normal"></highlight></codeline>
<codeline lineno="219" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a0ff2b5db35ce36adb3ede2f63722a34e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">override</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a0ff2b5db35ce36adb3ede2f63722a34e" kindref="member">Start</ref>()<sp/>{</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>base.Start();</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_cachedCamera<sp/>=<sp/>GetComponent&lt;Camera&gt;();</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(_deviceOffsetMode<sp/>==<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1afb41f717d7d9f36bbc119f06440b83f6" kindref="member">DeviceOffsetMode</ref>.Transform<sp/>&amp;&amp;<sp/>_deviceOrigin<sp/>==<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Debug.LogError(</highlight><highlight class="stringliteral">&quot;Cannot<sp/>use<sp/>the<sp/>Transform<sp/>device<sp/>offset<sp/>mode<sp/>without<sp/>&quot;</highlight><highlight class="normal"><sp/>+</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;specifying<sp/>a<sp/>Transform<sp/>to<sp/>use<sp/>as<sp/>the<sp/>device<sp/>origin.&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_deviceOffsetMode<sp/>=<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1afb41f717d7d9f36bbc119f06440b83f6" kindref="member">DeviceOffsetMode</ref>.Default;</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="228"><highlight class="normal"></highlight></codeline>
<codeline lineno="229" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a17b936b12ed7aabdf54af577a4de7f29" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">override</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a17b936b12ed7aabdf54af577a4de7f29" kindref="member">Update</ref>()<sp/>{</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ad00d8ff3e04135ec3f23c90bd0a3b4ff" kindref="member">manualUpdateHasBeenCalledSinceUpdate</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>base.Update();</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a9b2a2eca314859615f53181b46e09c76" kindref="member">imageTimeStamp</ref><sp/>=<sp/><ref refid="class_leap_1_1_unity_1_1_leap_service_provider_1a81109a7f1bd8d6fb195fb31e5c85fad3" kindref="member">_leapController</ref>.<ref refid="class_leap_1_1_controller_1a3babd82558546e8bc5de90fb80d201ec" kindref="member">FrameTimestamp</ref>();</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="234"><highlight class="normal"></highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>LateUpdate()<sp/>{</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>projectionMatrix<sp/>=<sp/>_cachedCamera.projectionMatrix;</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(SystemInfo.graphicsDeviceType)<sp/>{</highlight></codeline>
<codeline lineno="238"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#if<sp/>!UNITY_2017_2_OR_NEWER</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="namespace_unity_engine" kindref="compound">UnityEngine</ref>.Rendering.GraphicsDeviceType.Direct3D9:</highlight></codeline>
<codeline lineno="240"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="namespace_unity_engine" kindref="compound">UnityEngine</ref>.Rendering.GraphicsDeviceType.Direct3D11:</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="namespace_unity_engine" kindref="compound">UnityEngine</ref>.Rendering.GraphicsDeviceType.Direct3D12:</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>4;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>projectionMatrix[1,<sp/>i]<sp/>=<sp/>-projectionMatrix[1,<sp/>i];</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Scale<sp/>and<sp/>bias<sp/>from<sp/>OpenGL<sp/>-&gt;<sp/>D3D<sp/>depth<sp/>range</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>4;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>projectionMatrix[2,<sp/>i]<sp/>=<sp/>projectionMatrix[2,<sp/>i]<sp/>*<sp/>0.5f</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/>projectionMatrix[3,<sp/>i]<sp/>*<sp/>0.5f;</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="253"><highlight class="normal"></highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Update<sp/>Image<sp/>Warping</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Vector3<sp/>pastPosition;<sp/>Quaternion<sp/>pastRotation;</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ad28d54cc0444a3ead31ecc3214e58b32" kindref="member">transformHistory</ref>.<ref refid="class_leap_1_1_unity_1_1_transform_history_1a027228e6fa5c86fb1c42c0afbc465b04" kindref="member">SampleTransform</ref>(<ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a9b2a2eca314859615f53181b46e09c76" kindref="member">imageTimeStamp</ref></highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>(</highlight><highlight class="keywordtype">long</highlight><highlight class="normal">)(<ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a668f8752cd2db6f77abbd44e89980b79" kindref="member">warpingAdjustment</ref><sp/>*<sp/>1000f),</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out<sp/>pastPosition,<sp/>out<sp/>pastRotation);</highlight></codeline>
<codeline lineno="259"><highlight class="normal"></highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Use<sp/>_tweenImageWarping</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>currCenterRotation<sp/>=<sp/>XRSupportUtil.GetXRNodeCenterEyeLocalRotation();</highlight></codeline>
<codeline lineno="262"><highlight class="normal"></highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>imageReferenceRotation<sp/>=<sp/>_temporalWarpingMode<sp/>!=<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aa0f64056dec7a8f478070ab21de3247f" kindref="member">TemporalWarpingMode</ref>.Off<sp/></highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>?<sp/>pastRotation</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:<sp/>currCenterRotation;</highlight></codeline>
<codeline lineno="266"><highlight class="normal"></highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Quaternion<sp/>imageQuatWarp<sp/>=<sp/>Quaternion.Inverse(currCenterRotation)</highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>imageReferenceRotation;</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>imageQuatWarp<sp/>=<sp/>Quaternion.Euler(imageQuatWarp.eulerAngles.x,</highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>imageQuatWarp.eulerAngles.y,</highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-imageQuatWarp.eulerAngles.z);</highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Matrix4x4<sp/>imageMatWarp<sp/>=<sp/>projectionMatrix</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>Matrix4x4.TRS(Vector3.zero,<sp/>imageQuatWarp,<sp/>Vector3.one)</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>projectionMatrix.inverse;</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Shader.SetGlobalMatrix(</highlight><highlight class="stringliteral">&quot;_LeapGlobalWarpedOffset&quot;</highlight><highlight class="normal">,<sp/>imageMatWarp);</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="277"><highlight class="normal"></highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>OnPreCull()<sp/>{</highlight></codeline>
<codeline lineno="279"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#if<sp/>UNITY_EDITOR</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="namespace_valve_1_1_v_r_1aecd07a81fe79a9f96c6787513e2d98e4ae498749f3c42246d50b15c81c101d988" kindref="member">Application</ref>.isPlaying)<sp/>{</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="283"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="284"><highlight class="normal"></highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>most<sp/>recent<sp/>tracked<sp/>pose.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Pose<sp/>trackedPose<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Pose(XRSupportUtil.GetXRNodeCenterEyeLocalPosition(),</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>XRSupportUtil.GetXRNodeCenterEyeLocalRotation());</highlight></codeline>
<codeline lineno="288"><highlight class="normal"></highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>we<sp/>don&apos;t<sp/>know<sp/>of<sp/>any<sp/>pose<sp/>offset<sp/>yet,<sp/>account<sp/>for<sp/>it<sp/>by<sp/>finding<sp/>the<sp/>pose</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>delta<sp/>from<sp/>the<sp/>&quot;local&quot;<sp/>tracked<sp/>pose<sp/>to<sp/>the<sp/>actual<sp/>camera<sp/>pose.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!_trackingBaseDeltaPose.HasValue)<sp/>{</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_trackingBaseDeltaPose<sp/>=<sp/>_cachedCamera.transform.ToLocalPose()</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>trackedPose.<ref refid="struct_leap_1_1_unity_1_1_pose_1a223dfc83da978c0ac8f02683acbdc070" kindref="member">inverse</ref>;</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>way,<sp/>we<sp/>always<sp/>track<sp/>a<sp/>scene-space<sp/>tracked<sp/>pose.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Pose<sp/>effTransformPose<sp/>=<sp/>_trackingBaseDeltaPose.Value<sp/>*<sp/>trackedPose;</highlight></codeline>
<codeline lineno="298"><highlight class="normal"></highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ad28d54cc0444a3ead31ecc3214e58b32" kindref="member">transformHistory</ref>.<ref refid="class_leap_1_1_unity_1_1_transform_history_1a831ac5fe8ef56cd29bb8bce038cac019" kindref="member">UpdateDelay</ref>(effTransformPose,<sp/><ref refid="class_leap_1_1_unity_1_1_leap_service_provider_1a81109a7f1bd8d6fb195fb31e5c85fad3" kindref="member">_leapController</ref>.<ref refid="class_leap_1_1_controller_1a57650944fa868adcfe4cea8608af5a03" kindref="member">Now</ref>());</highlight></codeline>
<codeline lineno="300"><highlight class="normal"></highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a87c7baea1161c7819c2215f9483e6df6" kindref="member">OnPreCullHandTransforms</ref>(_cachedCamera);</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="303"><highlight class="normal"></highlight></codeline>
<codeline lineno="304"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#endregion</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="305"><highlight class="normal"></highlight></codeline>
<codeline lineno="306"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#region<sp/>LeapServiceProvider<sp/>Overrides</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="307"><highlight class="normal"></highlight></codeline>
<codeline lineno="308" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aafadeb0206fa3309e894ca7241535e81" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">override</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aafadeb0206fa3309e894ca7241535e81" kindref="member">CalculateInterpolationTime</ref>(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>endOfFrame<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="309"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#if<sp/>UNITY_ANDROID</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_service_provider_1a81109a7f1bd8d6fb195fb31e5c85fad3" kindref="member">_leapController</ref>.<ref refid="class_leap_1_1_controller_1a57650944fa868adcfe4cea8608af5a03" kindref="member">Now</ref>()<sp/>-<sp/>16000;</highlight></codeline>
<codeline lineno="311"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_leap_1_1_unity_1_1_leap_service_provider_1a81109a7f1bd8d6fb195fb31e5c85fad3" kindref="member">_leapController</ref><sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_service_provider_1a81109a7f1bd8d6fb195fb31e5c85fad3" kindref="member">_leapController</ref>.<ref refid="class_leap_1_1_controller_1a57650944fa868adcfe4cea8608af5a03" kindref="member">Now</ref>()</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>(long)<ref refid="class_leap_1_1_unity_1_1_leap_service_provider_1a03a08f2d279d9884cb6d754ce4412ac2" kindref="member">_smoothedTrackingLatency</ref>.<ref refid="class_leap_1_1_unity_1_1_smoothed_float_1a1fdf3ee4ae067a5ccb975320829a4327" kindref="member">value</ref></highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/>((<ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ae9458c66f5008c4592c6f94453b0b043" kindref="member">updateHandInPrecull</ref><sp/>&amp;&amp;<sp/>!endOfFrame)?</highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(long)(Time.smoothDeltaTime<sp/>*<sp/><ref refid="class_leap_1_1_unity_1_1_leap_service_provider_1a0baaa02c5e7d4a148ec737876b7b388b" kindref="member">S_TO_NS</ref><sp/>/<sp/>Time.timeScale)</highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:<sp/>0);</highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="321"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="323"><highlight class="normal"></highlight></codeline>
<codeline lineno="328" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ae0e6b7d1c684d872acf237357ace286c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">override</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ae0e6b7d1c684d872acf237357ace286c" kindref="member">initializeFlags</ref>()<sp/>{</highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_leap_1_1_unity_1_1_leap_service_provider_1a81109a7f1bd8d6fb195fb31e5c85fad3" kindref="member">_leapController</ref><sp/>==<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="332"><highlight class="normal"></highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Optimize<sp/>for<sp/>head-mounted<sp/>tracking<sp/>if<sp/>on<sp/>head-mounted<sp/>display.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_service_provider_1a81109a7f1bd8d6fb195fb31e5c85fad3" kindref="member">_leapController</ref>.<ref refid="class_leap_1_1_controller_1a7e862547a7ea735203220e43c0e04a85" kindref="member">SetPolicy</ref>(<ref refid="class_leap_1_1_controller" kindref="compound">Controller</ref>.<ref refid="class_leap_1_1_controller_1a0bdb49fa94aa2da8b098c1ac296528d6" kindref="member">PolicyFlag</ref>.POLICY_OPTIMIZE_HMD);</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="336"><highlight class="normal"></highlight></codeline>
<codeline lineno="337" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a1bac02ff68b78b4e584567c6e4bf42ac" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">override</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a1bac02ff68b78b4e584567c6e4bf42ac" kindref="member">transformFrame</ref>(<ref refid="class_leap_1_1_frame" kindref="compound">Frame</ref><sp/>source,<sp/><ref refid="class_leap_1_1_frame" kindref="compound">Frame</ref><sp/>dest)<sp/>{</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_leap_1_1_leap_transform" kindref="compound">LeapTransform</ref><sp/>leapTransform<sp/>=<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a5a7dd26c6fcf64f5bd085be124fd69ed" kindref="member">GetWarpedMatrix</ref>(source.<ref refid="class_leap_1_1_frame_1a1e1b235fcb1f454ee20aa82c5342c987" kindref="member">Timestamp</ref>);</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>dest.CopyFrom(source).Transform(leapTransform);</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="341"><highlight class="normal"></highlight></codeline>
<codeline lineno="342"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#endregion</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="343"><highlight class="normal"></highlight></codeline>
<codeline lineno="344"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#region<sp/>Internal<sp/>Methods</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="345"><highlight class="normal"></highlight></codeline>
<codeline lineno="349" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a9155994dde86e3946890433bfc536b9a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a9155994dde86e3946890433bfc536b9a" kindref="member">resetShaderTransforms</ref>()<sp/>{</highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a5b9871acb331833b7f15215adb0d3015" kindref="member">_transformArray</ref>[0]<sp/>=<sp/>Matrix4x4.identity;</highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a5b9871acb331833b7f15215adb0d3015" kindref="member">_transformArray</ref>[1]<sp/>=<sp/>Matrix4x4.identity;</highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Shader.SetGlobalMatrixArray(<ref refid="class_leap_1_1_unity_1_1_leap_service_provider_1ad8198649c99ee41eaba597cae378815b" kindref="member">HAND_ARRAY_GLOBAL_NAME</ref>,<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a5b9871acb331833b7f15215adb0d3015" kindref="member">_transformArray</ref>);</highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="354"><highlight class="normal"></highlight></codeline>
<codeline lineno="355" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a5a7dd26c6fcf64f5bd085be124fd69ed" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">virtual</highlight><highlight class="normal"><sp/><ref refid="struct_leap_1_1_leap_transform" kindref="compound">LeapTransform</ref><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a5a7dd26c6fcf64f5bd085be124fd69ed" kindref="member">GetWarpedMatrix</ref>(</highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>timestamp,</highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>updateTemporalCompensation<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_leap_1_1_leap_transform" kindref="compound">LeapTransform</ref><sp/>leapTransform;</highlight></codeline>
<codeline lineno="358"><highlight class="normal"></highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Calculate<sp/>a<sp/>Temporally<sp/>Warped<sp/>Pose</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(Application.isPlaying</highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;<sp/>updateTemporalCompensation</highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ad28d54cc0444a3ead31ecc3214e58b32" kindref="member">transformHistory</ref>.<ref refid="class_leap_1_1_unity_1_1_transform_history_1a5d822021ea5550a45bd559d7567ae2ed" kindref="member">history</ref>.IsFull</highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;<sp/>_temporalWarpingMode<sp/>!=<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aa0f64056dec7a8f478070ab21de3247f" kindref="member">TemporalWarpingMode</ref>.Off)<sp/>{</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ad28d54cc0444a3ead31ecc3214e58b32" kindref="member">transformHistory</ref>.<ref refid="class_leap_1_1_unity_1_1_transform_history_1a027228e6fa5c86fb1c42c0afbc465b04" kindref="member">SampleTransform</ref>(timestamp</highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>(</highlight><highlight class="keywordtype">long</highlight><highlight class="normal">)(<ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a668f8752cd2db6f77abbd44e89980b79" kindref="member">warpingAdjustment</ref><sp/>*<sp/>1000f)</highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>(_temporalWarpingMode<sp/>==</highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aa0f64056dec7a8f478070ab21de3247f" kindref="member">TemporalWarpingMode</ref>.Images<sp/>?<sp/>-20000<sp/>:<sp/>0),</highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aa4be13a6f05121d88aded72a447efd8f" kindref="member">warpedPosition</ref>,<sp/>out<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a2b4417c08a92b9ad2ef8f5dd76248915" kindref="member">warpedRotation</ref>);</highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="370"><highlight class="normal"></highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Calculate<sp/>the<sp/>Current<sp/>Pose</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_leap_1_1_unity_1_1_pose" kindref="compound">Pose</ref><sp/>currentPose<sp/>=<sp/><ref refid="struct_leap_1_1_unity_1_1_pose" kindref="compound">Pose</ref>.<ref refid="struct_leap_1_1_unity_1_1_pose_1ac98b12ebae014198abed5894475be71b" kindref="member">identity</ref>;</highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(_deviceOffsetMode<sp/>==<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1afb41f717d7d9f36bbc119f06440b83f6" kindref="member">DeviceOffsetMode</ref>.Transform<sp/>&amp;&amp;<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a5f4a006ae4fbb332ab62796eb060af1e" kindref="member">deviceOrigin</ref><sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>currentPose.<ref refid="struct_leap_1_1_unity_1_1_pose_1ad90ba514c97484e10d747d9bdf9b81a9" kindref="member">position</ref><sp/>=<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a5f4a006ae4fbb332ab62796eb060af1e" kindref="member">deviceOrigin</ref>.position;</highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>currentPose.<ref refid="struct_leap_1_1_unity_1_1_pose_1a59e70598d0ebe38d79a55b88b51734ad" kindref="member">rotation</ref><sp/>=<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a5f4a006ae4fbb332ab62796eb060af1e" kindref="member">deviceOrigin</ref>.rotation;</highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!Application.isPlaying)<sp/>{</highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>currentPose.<ref refid="struct_leap_1_1_unity_1_1_pose_1ad90ba514c97484e10d747d9bdf9b81a9" kindref="member">position</ref><sp/>=<sp/>currentPose.<ref refid="struct_leap_1_1_unity_1_1_pose_1a59e70598d0ebe38d79a55b88b51734ad" kindref="member">rotation</ref><sp/>*<sp/>Vector3.up<sp/>*<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a6c906e4ec5e7775596344ec87fda4681" kindref="member">deviceOffsetYAxis</ref></highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/>currentPose.<ref refid="struct_leap_1_1_unity_1_1_pose_1a59e70598d0ebe38d79a55b88b51734ad" kindref="member">rotation</ref><sp/>*<sp/>Vector3.forward<sp/>*<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ab78d04f47fd47ce45f7e5da319e29cee" kindref="member">deviceOffsetZAxis</ref>;</highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>currentPose.<ref refid="struct_leap_1_1_unity_1_1_pose_1a59e70598d0ebe38d79a55b88b51734ad" kindref="member">rotation</ref><sp/>=<sp/>Quaternion.Euler(<ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aabddae01cbb798a7cf340a2e1676e8ed" kindref="member">deviceTiltXAxis</ref>,<sp/>0f,<sp/>0f);</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>currentPose<sp/>=<sp/>transform.ToLocalPose().Then(currentPose);</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ad28d54cc0444a3ead31ecc3214e58b32" kindref="member">transformHistory</ref>.<ref refid="class_leap_1_1_unity_1_1_transform_history_1a027228e6fa5c86fb1c42c0afbc465b04" kindref="member">SampleTransform</ref>(timestamp,<sp/>out<sp/>currentPose.<ref refid="struct_leap_1_1_unity_1_1_pose_1ad90ba514c97484e10d747d9bdf9b81a9" kindref="member">position</ref>,</highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out<sp/>currentPose.<ref refid="struct_leap_1_1_unity_1_1_pose_1a59e70598d0ebe38d79a55b88b51734ad" kindref="member">rotation</ref>);</highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="385"><highlight class="normal"></highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Choose<sp/>between<sp/>Warped<sp/>and<sp/>Current<sp/>Pose</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>useCurrentPosition<sp/>=<sp/>(_temporalWarpingMode<sp/>==<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aa0f64056dec7a8f478070ab21de3247f" kindref="member">TemporalWarpingMode</ref>.Off)<sp/>||<sp/>!Application.isPlaying;</highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aa4be13a6f05121d88aded72a447efd8f" kindref="member">warpedPosition</ref><sp/>=<sp/>useCurrentPosition<sp/>?<sp/>currentPose.<ref refid="struct_leap_1_1_unity_1_1_pose_1ad90ba514c97484e10d747d9bdf9b81a9" kindref="member">position</ref><sp/>:<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aa4be13a6f05121d88aded72a447efd8f" kindref="member">warpedPosition</ref>;</highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a2b4417c08a92b9ad2ef8f5dd76248915" kindref="member">warpedRotation</ref><sp/>=<sp/>useCurrentPosition<sp/>?<sp/>currentPose.<ref refid="struct_leap_1_1_unity_1_1_pose_1a59e70598d0ebe38d79a55b88b51734ad" kindref="member">rotation</ref><sp/>:<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a2b4417c08a92b9ad2ef8f5dd76248915" kindref="member">warpedRotation</ref>;</highlight></codeline>
<codeline lineno="390"><highlight class="normal"></highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Apply<sp/>offsets<sp/>(when<sp/>applicable)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>(Application.isPlaying)<sp/>{</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(_deviceOffsetMode<sp/>!=<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1afb41f717d7d9f36bbc119f06440b83f6" kindref="member">DeviceOffsetMode</ref>.Transform)<sp/>{</highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aa4be13a6f05121d88aded72a447efd8f" kindref="member">warpedPosition</ref><sp/>+=<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a2b4417c08a92b9ad2ef8f5dd76248915" kindref="member">warpedRotation</ref><sp/>*<sp/>Vector3.up<sp/>*<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a6c906e4ec5e7775596344ec87fda4681" kindref="member">deviceOffsetYAxis</ref></highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a2b4417c08a92b9ad2ef8f5dd76248915" kindref="member">warpedRotation</ref><sp/>*<sp/>Vector3.forward<sp/>*<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ab78d04f47fd47ce45f7e5da319e29cee" kindref="member">deviceOffsetZAxis</ref>;</highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a2b4417c08a92b9ad2ef8f5dd76248915" kindref="member">warpedRotation</ref><sp/>*=<sp/>Quaternion.Euler(<ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aabddae01cbb798a7cf340a2e1676e8ed" kindref="member">deviceTiltXAxis</ref>,<sp/>0f,<sp/>0f);</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="398"><highlight class="normal"></highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a2b4417c08a92b9ad2ef8f5dd76248915" kindref="member">warpedRotation</ref><sp/>*=<sp/>Quaternion.Euler(-90f,<sp/>180f,<sp/>0f);</highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="401"><highlight class="normal"></highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(transform.parent<sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal"><sp/>&amp;&amp;<sp/>_deviceOffsetMode<sp/>!=<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1afb41f717d7d9f36bbc119f06440b83f6" kindref="member">DeviceOffsetMode</ref>.Transform)<sp/>{</highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>leapTransform<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="struct_leap_1_1_leap_transform" kindref="compound">LeapTransform</ref>(</highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>transform.parent.TransformPoint(<ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aa4be13a6f05121d88aded72a447efd8f" kindref="member">warpedPosition</ref>).ToVector(),</highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(transform.parent.rotation<sp/>*<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a2b4417c08a92b9ad2ef8f5dd76248915" kindref="member">warpedRotation</ref>).ToLeapQuaternion(),</highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>transform.lossyScale.ToVector()<sp/>*<sp/>1e-3f);</highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>leapTransform<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="struct_leap_1_1_leap_transform" kindref="compound">LeapTransform</ref>(<ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aa4be13a6f05121d88aded72a447efd8f" kindref="member">warpedPosition</ref>.ToVector(),</highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a2b4417c08a92b9ad2ef8f5dd76248915" kindref="member">warpedRotation</ref>.ToLeapQuaternion(),</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>transform.lossyScale.ToVector()<sp/>*<sp/>1e-3f);</highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="412"><highlight class="normal"></highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>leapTransform.<ref refid="struct_leap_1_1_leap_transform_1a699bd459e338da85f1ee7c2de9e466de" kindref="member">MirrorZ</ref>();</highlight></codeline>
<codeline lineno="414"><highlight class="normal"></highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>leapTransform;</highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="417"><highlight class="normal"></highlight></codeline>
<codeline lineno="418" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ad85fd202780306f400ee2609b37d3293" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ad85fd202780306f400ee2609b37d3293" kindref="member">transformHands</ref>(ref<sp/><ref refid="struct_leap_1_1_leap_transform" kindref="compound">LeapTransform</ref><sp/>LeftHand,<sp/>ref<sp/><ref refid="struct_leap_1_1_leap_transform" kindref="compound">LeapTransform</ref><sp/>RightHand)<sp/>{</highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_leap_1_1_leap_transform" kindref="compound">LeapTransform</ref><sp/>leapTransform<sp/>=<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a5a7dd26c6fcf64f5bd085be124fd69ed" kindref="member">GetWarpedMatrix</ref>(0,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>LeftHand<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="struct_leap_1_1_leap_transform" kindref="compound">LeapTransform</ref>(leapTransform.<ref refid="struct_leap_1_1_leap_transform_1a069ce8e414f0def9697b7816dcc4a799" kindref="member">TransformPoint</ref>(LeftHand.translation),</highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>leapTransform.<ref refid="struct_leap_1_1_leap_transform_1ad9658850a91beef88214dcaac6f6e6af" kindref="member">TransformQuaternion</ref>(LeftHand.rotation));</highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>RightHand<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="struct_leap_1_1_leap_transform" kindref="compound">LeapTransform</ref>(leapTransform.<ref refid="struct_leap_1_1_leap_transform_1a069ce8e414f0def9697b7816dcc4a799" kindref="member">TransformPoint</ref>(RightHand.translation),</highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>leapTransform.<ref refid="struct_leap_1_1_leap_transform_1ad9658850a91beef88214dcaac6f6e6af" kindref="member">TransformQuaternion</ref>(RightHand.rotation));</highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="425"><highlight class="normal"></highlight></codeline>
<codeline lineno="426" refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a87c7baea1161c7819c2215f9483e6df6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a87c7baea1161c7819c2215f9483e6df6" kindref="member">OnPreCullHandTransforms</ref>(Camera<sp/>camera)<sp/>{</highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ae9458c66f5008c4592c6f94453b0b043" kindref="member">updateHandInPrecull</ref>)<sp/>{</highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Don&apos;t<sp/>update<sp/>pre<sp/>cull<sp/>for<sp/>preview,<sp/>reflection,<sp/>or<sp/>scene<sp/>view<sp/>cameras</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="429"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(camera.cameraType)<sp/>{</highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>CameraType.Preview:</highlight></codeline>
<codeline lineno="431"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#if<sp/>UNITY_2017_1_OR_NEWER</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>CameraType.Reflection:</highlight></codeline>
<codeline lineno="433"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>CameraType.SceneView:</highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="437"><highlight class="normal"></highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(Application.isPlaying</highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;<sp/>!<ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ad00d8ff3e04135ec3f23c90bd0a3b4ff" kindref="member">manualUpdateHasBeenCalledSinceUpdate</ref></highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;<sp/><ref refid="class_leap_1_1_unity_1_1_leap_service_provider_1a81109a7f1bd8d6fb195fb31e5c85fad3" kindref="member">_leapController</ref><sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ad00d8ff3e04135ec3f23c90bd0a3b4ff" kindref="member">manualUpdateHasBeenCalledSinceUpdate</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="442"><highlight class="normal"></highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Find<sp/>the<sp/>left<sp/>and/or<sp/>right<sp/>hand(s)<sp/>to<sp/>latch</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="444"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_hand" kindref="compound">Hand</ref><sp/>leftHand<sp/>=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">,<sp/>rightHand<sp/>=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_leap_1_1_leap_transform" kindref="compound">LeapTransform</ref><sp/>precullLeftHand<sp/>=<sp/><ref refid="struct_leap_1_1_leap_transform" kindref="compound">LeapTransform</ref>.<ref refid="struct_leap_1_1_leap_transform_1a10de68df5cf1afa89c273a33d0629f16" kindref="member">Identity</ref>;</highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_leap_1_1_leap_transform" kindref="compound">LeapTransform</ref><sp/>precullRightHand<sp/>=<sp/><ref refid="struct_leap_1_1_leap_transform" kindref="compound">LeapTransform</ref>.<ref refid="struct_leap_1_1_leap_transform_1a10de68df5cf1afa89c273a33d0629f16" kindref="member">Identity</ref>;</highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/><ref refid="class_leap_1_1_unity_1_1_leap_service_provider_1ad651609e570c614c6d99de319ad990cd" kindref="member">CurrentFrame</ref>.<ref refid="class_leap_1_1_frame_1af0281471fb3831307b40a1124565d069" kindref="member">Hands</ref>.Count;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_hand" kindref="compound">Hand</ref><sp/>updateHand<sp/>=<sp/><ref refid="class_leap_1_1_unity_1_1_leap_service_provider_1ad651609e570c614c6d99de319ad990cd" kindref="member">CurrentFrame</ref>.<ref refid="class_leap_1_1_frame_1af0281471fb3831307b40a1124565d069" kindref="member">Hands</ref>[i];</highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(updateHand.<ref refid="class_leap_1_1_hand_1a783d6adaec7c3f3422e70bba4480b39d" kindref="member">IsLeft</ref><sp/>&amp;&amp;<sp/>leftHand<sp/>==<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="450"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>leftHand<sp/>=<sp/>updateHand;</highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(updateHand.<ref refid="class_leap_1_1_hand_1afa3c502b072d3101b7366fd928376e18" kindref="member">IsRight</ref><sp/>&amp;&amp;<sp/>rightHand<sp/>==<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rightHand<sp/>=<sp/>updateHand;</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="455"><highlight class="normal"></highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Determine<sp/>their<sp/>new<sp/>Transforms</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>interpolationTime<sp/>=<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1aafadeb0206fa3309e894ca7241535e81" kindref="member">CalculateInterpolationTime</ref>();</highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_service_provider_1a81109a7f1bd8d6fb195fb31e5c85fad3" kindref="member">_leapController</ref>.<ref refid="class_leap_1_1_controller_1a10fe0670c31aa9c8193cde4abd57fcd7" kindref="member">GetInterpolatedLeftRightTransform</ref>(</highlight></codeline>
<codeline lineno="459"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>interpolationTime<sp/>+<sp/>(<ref refid="class_leap_1_1_unity_1_1_leap_service_provider_1ab8edf176edaa9cddcc300f170f61c55e" kindref="member">ExtrapolationAmount</ref><sp/>*<sp/>1000),</highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>interpolationTime<sp/>-<sp/>(<ref refid="class_leap_1_1_unity_1_1_leap_service_provider_1a7ce59365ab427558123780fa15ca50fd" kindref="member">BounceAmount</ref><sp/>*<sp/>1000),</highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(leftHand<sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal"><sp/>?<sp/>leftHand.<ref refid="class_leap_1_1_hand_1ac7bfb32524382f4c9e4fb830437fe72b" kindref="member">Id</ref><sp/>:<sp/>0),</highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(rightHand<sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal"><sp/>?<sp/>rightHand.Id<sp/>:<sp/>0),</highlight></codeline>
<codeline lineno="463"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out<sp/>precullLeftHand,</highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out<sp/>precullRightHand);</highlight></codeline>
<codeline lineno="465"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>leftValid<sp/>=<sp/>precullLeftHand.translation<sp/>!=<sp/><ref refid="struct_leap_1_1_vector" kindref="compound">Vector</ref>.<ref refid="struct_leap_1_1_vector_1a007c4ee68aa890118b7a2d24aa4d9a6b" kindref="member">Zero</ref>;</highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>rightValid<sp/>=<sp/>precullRightHand.translation<sp/>!=<sp/><ref refid="struct_leap_1_1_vector" kindref="compound">Vector</ref>.<ref refid="struct_leap_1_1_vector_1a007c4ee68aa890118b7a2d24aa4d9a6b" kindref="member">Zero</ref>;</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1ad85fd202780306f400ee2609b37d3293" kindref="member">transformHands</ref>(ref<sp/>precullLeftHand,<sp/>ref<sp/>precullRightHand);</highlight></codeline>
<codeline lineno="468"><highlight class="normal"></highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Calculate<sp/>the<sp/>delta<sp/>Transforms</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="470"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rightHand<sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal"><sp/>&amp;&amp;<sp/>rightValid)<sp/>{</highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a5b9871acb331833b7f15215adb0d3015" kindref="member">_transformArray</ref>[0]<sp/>=</highlight></codeline>
<codeline lineno="472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Matrix4x4.TRS(precullRightHand.translation.ToVector3(),</highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>precullRightHand.rotation.ToQuaternion(),</highlight></codeline>
<codeline lineno="474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Vector3.one)</highlight></codeline>
<codeline lineno="475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>Matrix4x4.Inverse(Matrix4x4.TRS(rightHand.PalmPosition.ToVector3(),</highlight></codeline>
<codeline lineno="476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rightHand.Rotation.ToQuaternion(),</highlight></codeline>
<codeline lineno="477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Vector3.one));</highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(leftHand<sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal"><sp/>&amp;&amp;<sp/>leftValid)<sp/>{</highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a5b9871acb331833b7f15215adb0d3015" kindref="member">_transformArray</ref>[1]<sp/>=</highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Matrix4x4.TRS(precullLeftHand.translation.ToVector3(),</highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>precullLeftHand.rotation.ToQuaternion(),</highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Vector3.one)</highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>Matrix4x4.Inverse(Matrix4x4.TRS(leftHand.<ref refid="class_leap_1_1_hand_1aaf0940b9108e92c22e33b9c6cd32921a" kindref="member">PalmPosition</ref>.ToVector3(),</highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>leftHand.<ref refid="class_leap_1_1_hand_1ad1f22c3baf75294e2aa4d834d87fec20" kindref="member">Rotation</ref>.ToQuaternion(),</highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Vector3.one));</highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="488"><highlight class="normal"></highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Apply<sp/>inside<sp/>of<sp/>the<sp/>vertex<sp/>shader</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Shader.SetGlobalMatrixArray(<ref refid="class_leap_1_1_unity_1_1_leap_service_provider_1ad8198649c99ee41eaba597cae378815b" kindref="member">HAND_ARRAY_GLOBAL_NAME</ref>,<sp/><ref refid="class_leap_1_1_unity_1_1_leap_x_r_service_provider_1a5b9871acb331833b7f15215adb0d3015" kindref="member">_transformArray</ref>);</highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="492"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="493"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="494"><highlight class="normal"></highlight></codeline>
<codeline lineno="495"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#endregion</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="496"><highlight class="normal"></highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="498"><highlight class="normal"></highlight></codeline>
<codeline lineno="499"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="O:/GitHUBMINIPRoject/Assets/LeapMotion/Core/Scripts/LeapXRServiceProvider.cs"/>
  </compounddef>
</doxygen>
